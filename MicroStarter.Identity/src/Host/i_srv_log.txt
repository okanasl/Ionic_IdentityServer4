2018-08-09 03:14:03.124 +03:00 [WRN] No XML encryptor configured. Key "1c62c6fc-8f7f-4b85-8273-893fbfe654fd" may be persisted to storage in unencrypted form.
2018-08-09 03:14:03.570 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 03:14:03.570 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 03:14:03.570 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 03:14:03.570 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 03:14:03.570 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 03:14:03.805 +03:00 [DBG] Starting token cleanup
2018-08-09 03:14:41.536 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:14:41.546 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:14:41.547 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:14:41.551 +03:00 [DBG] Rendering check session result
2018-08-09 03:14:46.222 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:14:46.276 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:14:46.276 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:14:46.283 +03:00 [DBG] Start authorize request
2018-08-09 03:14:46.300 +03:00 [DBG] No user present in authorize request
2018-08-09 03:14:46.310 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:14:48.449 +03:00 [ERR] An error occurred using the connection to database 'microstarter.identity_config' on server 'tcp://postgre_name:5432'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-08-09 03:14:48.512 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-08-09 03:14:48.518 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2018-08-09 03:14:48.579 +03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address\n   at System.Net.Dns.InternalGetHostByName(String hostName)\n   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)\n   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnector.cs:line 663\n   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnector.cs:line 555\n   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnector.cs:line 414\n   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\\projects\\npgsql\\src\\Npgsql\\ConnectorPool.cs:line 246\n   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnection.cs:line 298\n--- End of stack trace from previous location where exception was thrown ---\n   at Npgsql.NpgsqlConnection.Open() in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnection.cs:line 153\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\\projects\\EFCore.PG\\src\\EFCore.PG\\Storage\\Internal\\NpgsqlExecutionStrategy.cs:line 51\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\n   at lambda_method(Closure )\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in /home/doom/microboiler/src/IonicStarter/src/IdentityServices/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Stores/ClientStore.cs:line 47\n   at IdentityServer4.Extensions.ICacheExtensions.GetAsync[T](ICache`1 cache, String key, TimeSpan duration, Func`1 get, ILogger logger) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\ICacheExtensions.cs:line 45\n   at IdentityServer4.Stores.CachingClientStore`1.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Stores\\Caching\\CachingClientStore.cs:line 51\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\IClientStoreExtensions.cs:line 23\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 147\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 65\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpointBase.cs:line 67\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpoint.cs:line 55\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54",
  "Message": "No such device or address",
  "ActivityId": "0HLFTHKCI7PVN:00000002",
  "TimeStamp": "2018-08-09T00:14:48Z",
  "ProcessId": 27650,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 03:14:48.582 +03:00 [FTL] Unhandled exception: System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in /home/doom/microboiler/src/IonicStarter/src/IdentityServices/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Stores/ClientStore.cs:line 47
   at IdentityServer4.Extensions.ICacheExtensions.GetAsync[T](ICache`1 cache, String key, TimeSpan duration, Func`1 get, ILogger logger) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\ICacheExtensions.cs:line 45
   at IdentityServer4.Stores.CachingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Stores\Caching\CachingClientStore.cs:line 51
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
2018-08-09 03:14:48.585 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in /home/doom/microboiler/src/IonicStarter/src/IdentityServices/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Stores/ClientStore.cs:line 47
   at IdentityServer4.Extensions.ICacheExtensions.GetAsync[T](ICache`1 cache, String key, TimeSpan duration, Func`1 get, ILogger logger) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\ICacheExtensions.cs:line 45
   at IdentityServer4.Stores.CachingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Stores\Caching\CachingClientStore.cs:line 51
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.Invoke(HttpContext context)
2018-08-09 03:15:44.256 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-09 03:15:44.303 +03:00 [DBG] Stopping token cleanup
2018-08-09 03:16:04.901 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 03:16:04.947 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 03:16:04.947 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 03:16:04.947 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 03:16:04.947 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 03:16:05.122 +03:00 [DBG] Starting token cleanup
2018-08-09 03:16:25.619 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:16:25.628 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:16:25.629 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:16:25.642 +03:00 [DBG] Rendering check session result
2018-08-09 03:16:28.701 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:16:28.745 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:16:28.749 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:16:28.762 +03:00 [DBG] Start authorize request
2018-08-09 03:16:28.785 +03:00 [DBG] No user present in authorize request
2018-08-09 03:16:28.797 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:16:29.709 +03:00 [ERR] An error occurred using the connection to database 'microstarter.identity_config' on server 'tcp://postgre_name:5432'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-08-09 03:16:29.740 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-08-09 03:16:29.745 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2018-08-09 03:16:29.785 +03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address\n   at System.Net.Dns.InternalGetHostByName(String hostName)\n   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)\n   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnector.cs:line 663\n   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnector.cs:line 555\n   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnector.cs:line 414\n   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\\projects\\npgsql\\src\\Npgsql\\ConnectorPool.cs:line 246\n   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnection.cs:line 298\n--- End of stack trace from previous location where exception was thrown ---\n   at Npgsql.NpgsqlConnection.Open() in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnection.cs:line 153\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\\projects\\EFCore.PG\\src\\EFCore.PG\\Storage\\Internal\\NpgsqlExecutionStrategy.cs:line 51\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\n   at lambda_method(Closure )\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in /home/doom/microboiler/src/IonicStarter/src/IdentityServices/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Stores/ClientStore.cs:line 47\n   at IdentityServer4.Extensions.ICacheExtensions.GetAsync[T](ICache`1 cache, String key, TimeSpan duration, Func`1 get, ILogger logger) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\ICacheExtensions.cs:line 45\n   at IdentityServer4.Stores.CachingClientStore`1.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Stores\\Caching\\CachingClientStore.cs:line 51\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\IClientStoreExtensions.cs:line 23\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 147\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 65\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpointBase.cs:line 67\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpoint.cs:line 55\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54",
  "Message": "No such device or address",
  "ActivityId": "0HLFTHLBKE41G:00000002",
  "TimeStamp": "2018-08-09T00:16:29Z",
  "ProcessId": 28107,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 03:16:29.787 +03:00 [FTL] Unhandled exception: System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in /home/doom/microboiler/src/IonicStarter/src/IdentityServices/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Stores/ClientStore.cs:line 47
   at IdentityServer4.Extensions.ICacheExtensions.GetAsync[T](ICache`1 cache, String key, TimeSpan duration, Func`1 get, ILogger logger) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\ICacheExtensions.cs:line 45
   at IdentityServer4.Stores.CachingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Stores\Caching\CachingClientStore.cs:line 51
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
2018-08-09 03:16:29.811 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in /home/doom/microboiler/src/IonicStarter/src/IdentityServices/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Stores/ClientStore.cs:line 47
   at IdentityServer4.Extensions.ICacheExtensions.GetAsync[T](ICache`1 cache, String key, TimeSpan duration, Func`1 get, ILogger logger) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\ICacheExtensions.cs:line 45
   at IdentityServer4.Stores.CachingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Stores\Caching\CachingClientStore.cs:line 51
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.Invoke(HttpContext context)
2018-08-09 03:17:32.340 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-09 03:17:32.392 +03:00 [DBG] Stopping token cleanup
2018-08-09 03:18:44.021 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 03:18:44.059 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 03:18:44.059 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 03:18:44.060 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 03:18:44.060 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 03:18:44.239 +03:00 [DBG] Starting token cleanup
2018-08-09 03:19:34.355 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-09 03:19:34.393 +03:00 [DBG] Stopping token cleanup
2018-08-09 03:19:58.267 +03:00 [ERR] An error occurred using the connection to database 'microstarter.identity_config' on server 'tcp://localhost:5432:5432'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-08-09 03:19:58.374 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-08-09 03:19:58.381 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2018-08-09 03:23:18.599 +03:00 [ERR] An error occurred using the connection to database 'microstarter.identity_config' on server 'tcp://localhost:5432:5432'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-08-09 03:23:18.729 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction(IsolationLevel isolationLevel)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransaction()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2018-08-09 03:24:46.636 +03:00 [ERR] Failed executing DbCommand (25ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (Size = 2000), @p12='?' (Size = 200), @p13='?' (Size = 200), @p14='?' (Size = 200), @p15='?' (Size = 2000), @p16='?' (DbType = Int32), @p17='?' (Size = 1000), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = Boolean), @p21='?' (Size = 2000), @p22='?' (DbType = Int32), @p23='?' (DbType = Boolean), @p24='?' (Size = 2000), @p25='?' (Size = 200), @p26='?' (Size = 200), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = Boolean), @p32='?' (DbType = Int32), @p33='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Clients" ("AbsoluteRefreshTokenLifetime", "AccessTokenLifetime", "AccessTokenType", "AllowAccessTokensViaBrowser", "AllowOfflineAccess", "AllowPlainTextPkce", "AllowRememberConsent", "AlwaysIncludeUserClaimsInIdToken", "AlwaysSendClientClaims", "AuthorizationCodeLifetime", "BackChannelLogoutSessionRequired", "BackChannelLogoutUri", "ClientClaimsPrefix", "ClientId", "ClientName", "ClientUri", "ConsentLifetime", "Description", "EnableLocalLogin", "Enabled", "FrontChannelLogoutSessionRequired", "FrontChannelLogoutUri", "IdentityTokenLifetime", "IncludeJwtId", "LogoUri", "PairWiseSubjectSalt", "ProtocolType", "RefreshTokenExpiration", "RefreshTokenUsage", "RequireClientSecret", "RequireConsent", "RequirePkce", "SlidingRefreshTokenLifetime", "UpdateAccessTokenClaimsOnRefresh")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33)
RETURNING "Id";
Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Clients_ClientId"
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming) in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 467
   at Npgsql.NpgsqlDataReader.NextResult() in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 332
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1221
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1132
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2018-08-09 03:24:46.789 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23505: duplicate key value violates unique constraint "IX_Clients_ClientId"
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming) in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 467
   at Npgsql.NpgsqlDataReader.NextResult() in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 332
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1221
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1132
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23505: duplicate key value violates unique constraint "IX_Clients_ClientId"
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming) in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 467
   at Npgsql.NpgsqlDataReader.NextResult() in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 332
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1221
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1132
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2018-08-09 03:26:19.720 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 03:26:19.760 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 03:26:19.760 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 03:26:19.761 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 03:26:19.761 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 03:26:20.026 +03:00 [DBG] Starting token cleanup
2018-08-09 03:26:52.532 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:26:52.541 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:26:52.542 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:26:52.545 +03:00 [DBG] Rendering check session result
2018-08-09 03:26:58.201 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:26:58.243 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:26:58.243 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:26:58.251 +03:00 [DBG] Start authorize request
2018-08-09 03:26:58.263 +03:00 [DBG] No user present in authorize request
2018-08-09 03:26:58.273 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:26:59.217 +03:00 [DBG] IonicClient found in database: true
2018-08-09 03:26:59.322 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-09 03:26:59.457 +03:00 [DBG] Found [] API scopes in database
2018-08-09 03:26:59.486 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:26:59.511 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicClient",
  "ClientName": "IonicClient",
  "RedirectUri": "http://localhost:8100",
  "AllowedRedirectUris": [
    "http://localhost:8100/silent-renew.html",
    "http://localhost:8100/login-callback.html",
    "http://localhost:8100"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.349258011393368541533774418161",
  "Raw": {
    "client_id": "IonicClient",
    "redirect_uri": "http://localhost:8100",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.349258011393368541533774418161",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:26:59.525 +03:00 [INF] Showing login: User is not authenticated
2018-08-09 03:26:59.860 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:26:59.861 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:28:37.872 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-09 03:28:37.925 +03:00 [DBG] Stopping token cleanup
2018-08-09 03:28:51.035 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 03:28:51.078 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 03:28:51.078 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 03:28:51.079 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 03:28:51.079 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 03:28:51.240 +03:00 [DBG] Starting token cleanup
2018-08-09 03:29:00.395 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:29:00.401 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:29:00.402 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:29:00.404 +03:00 [DBG] Rendering check session result
2018-08-09 03:29:02.578 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:29:02.639 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:29:02.640 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:29:02.646 +03:00 [DBG] Start authorize request
2018-08-09 03:29:02.663 +03:00 [DBG] No user present in authorize request
2018-08-09 03:29:02.674 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:29:04.891 +03:00 [DBG] IonicClient found in database: true
2018-08-09 03:29:05.008 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-09 03:29:05.145 +03:00 [DBG] Found [] API scopes in database
2018-08-09 03:29:05.176 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:29:05.203 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicClient",
  "ClientName": "IonicClient",
  "RedirectUri": "http://localhost:8100",
  "AllowedRedirectUris": [
    "http://localhost:8100/silent-renew.html",
    "http://localhost:8100/login-callback.html",
    "http://localhost:8100"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.09841615192093191533774542543",
  "Raw": {
    "client_id": "IonicClient",
    "redirect_uri": "http://localhost:8100",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.09841615192093191533774542543",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:29:05.215 +03:00 [INF] Showing login: User is not authenticated
2018-08-09 03:29:05.415 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:29:05.417 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:29:26.282 +03:00 [DBG] Augmenting SignInContext
2018-08-09 03:29:26.287 +03:00 [DBG] Adding idp claim with value: local
2018-08-09 03:29:26.287 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-09 03:29:26.288 +03:00 [DBG] Adding auth_time claim with value: 1533774566
2018-08-09 03:29:26.307 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-09 03:29:26.308 +03:00 [INF] User created a new account with password.
2018-08-09 03:29:26.348 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-09 03:29:26.350 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-09 03:29:26.351 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-09 03:29:26.362 +03:00 [DBG] Start authorize callback request
2018-08-09 03:29:26.369 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:29:26.370 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:29:26.370 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:29:26.371 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicClient",
  "ClientName": "IonicClient",
  "RedirectUri": "http://localhost:8100",
  "AllowedRedirectUris": [
    "http://localhost:8100/silent-renew.html",
    "http://localhost:8100/login-callback.html",
    "http://localhost:8100"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.09841615192093191533774542543",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicClient",
    "redirect_uri": "http://localhost:8100",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.09841615192093191533774542543",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:29:26.459 +03:00 [DBG] G/RfjH+Ur2oPu3mPIJigBjJMYXjqj1QqHu6cc4lWfSw= found in database: false
2018-08-09 03:29:26.459 +03:00 [DBG] user_consent grant with value: IonicClient|d1862db5-db7d-4edc-89ed-4b486588a3c1 not found in store.
2018-08-09 03:29:26.460 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-09 03:29:26.460 +03:00 [INF] Showing consent: User has not yet consented
2018-08-09 03:29:26.485 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:29:26.486 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:29:28.374 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:29:28.375 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:29:28.402 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-09 03:29:28.403 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-09 03:29:28.403 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-09 03:29:28.403 +03:00 [DBG] Start authorize callback request
2018-08-09 03:29:28.410 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:29:28.410 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:29:28.410 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:29:28.411 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicClient",
  "ClientName": "IonicClient",
  "RedirectUri": "http://localhost:8100",
  "AllowedRedirectUris": [
    "http://localhost:8100/silent-renew.html",
    "http://localhost:8100/login-callback.html",
    "http://localhost:8100"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.09841615192093191533774542543",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicClient",
    "redirect_uri": "http://localhost:8100",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.09841615192093191533774542543",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:29:28.423 +03:00 [DBG] G/RfjH+Ur2oPu3mPIJigBjJMYXjqj1QqHu6cc4lWfSw= found in database: false
2018-08-09 03:29:28.423 +03:00 [DBG] user_consent grant with value: IonicClient|d1862db5-db7d-4edc-89ed-4b486588a3c1 not found in store.
2018-08-09 03:29:28.423 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-09 03:29:28.436 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-09 03:29:28.440 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-09 03:29:28.447 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:29:28.485 +03:00 [DBG] G/RfjH+Ur2oPu3mPIJigBjJMYXjqj1QqHu6cc4lWfSw= not found in database
2018-08-09 03:29:28.578 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 03:29:28.594 +03:00 [DBG] Getting claims for access token for client: IonicClient
2018-08-09 03:29:28.594 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:29:28.654 +03:00 [DBG] yu9k2sCYgBZ2lwcx1PKTKshDYO/vwn/7HAuUrcA4sQI= not found in database
2018-08-09 03:29:28.680 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicClient
2018-08-09 03:29:28.680 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 03:29:28.778 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicClient",
  "ClientName": "IonicClient",
  "RedirectUri": "http://localhost:8100",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****_B2w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****cef2"
    }
  ],
  "ActivityId": "0HLFTHSCHTQPT:00000013",
  "TimeStamp": "2018-08-09T00:29:28Z",
  "ProcessId": 30237,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 03:29:28.785 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicClient",
  "RedirectUri": "http://localhost:8100",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 03:29:28.820 +03:00 [DBG] Augmenting SignInContext
2018-08-09 03:29:28.821 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-09 03:31:41.993 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:31:41.993 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:31:41.994 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:31:41.994 +03:00 [DBG] Rendering check session result
2018-08-09 03:39:16.496 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:39:16.497 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:39:16.498 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:39:16.498 +03:00 [DBG] Rendering check session result
2018-08-09 03:41:53.642 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-09 03:41:53.661 +03:00 [DBG] Stopping token cleanup
2018-08-09 03:42:15.380 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 03:42:15.417 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 03:42:15.417 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 03:42:15.417 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 03:42:15.418 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 03:42:15.539 +03:00 [DBG] Starting token cleanup
2018-08-09 03:42:55.187 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-09 03:42:55.230 +03:00 [DBG] Stopping token cleanup
2018-08-09 03:43:13.013 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 03:43:13.042 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 03:43:13.043 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 03:43:13.043 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 03:43:13.043 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 03:43:13.148 +03:00 [DBG] Starting token cleanup
2018-08-09 03:43:17.107 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:43:17.113 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:43:17.113 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:43:17.117 +03:00 [DBG] Rendering check session result
2018-08-09 03:43:18.905 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:43:18.920 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:43:18.922 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:43:18.931 +03:00 [DBG] Start authorize request
2018-08-09 03:43:18.951 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:43:18.961 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:43:19.329 +03:00 [DBG] IonicoClient found in database: true
2018-08-09 03:43:19.456 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-09 03:43:19.592 +03:00 [DBG] Found [] API scopes in database
2018-08-09 03:43:19.614 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:43:19.643 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.40778410048335111533775398866",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.40778410048335111533775398866",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:43:19.973 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= found in database: false
2018-08-09 03:43:19.973 +03:00 [DBG] user_consent grant with value: IonicoClient|d1862db5-db7d-4edc-89ed-4b486588a3c1 not found in store.
2018-08-09 03:43:19.974 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-09 03:43:19.974 +03:00 [INF] Showing consent: User has not yet consented
2018-08-09 03:43:20.166 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:43:20.167 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:43:23.423 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:43:23.424 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:43:23.447 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-09 03:43:23.449 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-09 03:43:23.449 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-09 03:43:23.457 +03:00 [DBG] Start authorize callback request
2018-08-09 03:43:23.466 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:43:23.466 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:43:23.466 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:43:23.467 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.40778410048335111533775398866",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.40778410048335111533775398866",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:43:23.473 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= found in database: false
2018-08-09 03:43:23.474 +03:00 [DBG] user_consent grant with value: IonicoClient|d1862db5-db7d-4edc-89ed-4b486588a3c1 not found in store.
2018-08-09 03:43:23.475 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-09 03:43:23.483 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-09 03:43:23.485 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-09 03:43:23.491 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:43:23.514 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= not found in database
2018-08-09 03:43:23.619 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 03:43:23.635 +03:00 [DBG] Getting claims for access token for client: IonicoClient
2018-08-09 03:43:23.635 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:43:23.844 +03:00 [DBG] QEePj40UpXX37K+PxLosHfITt6UypDmzn7P8FGRG6yk= not found in database
2018-08-09 03:43:23.867 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicoClient
2018-08-09 03:43:23.867 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 03:43:23.956 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****JwhA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****25ed"
    }
  ],
  "ActivityId": "0HLFTI4C3OCL0:00000005",
  "TimeStamp": "2018-08-09T00:43:23Z",
  "ProcessId": 2009,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 03:43:23.962 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 03:43:23.998 +03:00 [DBG] Augmenting SignInContext
2018-08-09 03:43:24.015 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-09 03:44:00.553 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:44:00.553 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:44:00.553 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:44:00.554 +03:00 [DBG] Rendering check session result
2018-08-09 03:44:11.654 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:44:11.656 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:44:11.656 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:44:11.656 +03:00 [DBG] Start authorize request
2018-08-09 03:44:11.657 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:44:11.657 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:44:11.659 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:44:11.660 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.76765315623620371533775451601",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.76765315623620371533775451601",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:44:11.684 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= found in database: true
2018-08-09 03:44:11.698 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 03:44:11.699 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 03:44:11.699 +03:00 [DBG] Getting claims for access token for client: IonicoClient
2018-08-09 03:44:11.699 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:44:11.729 +03:00 [DBG] KV8F5TlV03AJLH3xqXvDhd7ddYcxHiRgQxJ1r0gS8r4= not found in database
2018-08-09 03:44:11.764 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicoClient
2018-08-09 03:44:11.764 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 03:44:11.769 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-OQg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****edf2"
    }
  ],
  "ActivityId": "0HLFTI4C3OCL0:00000007",
  "TimeStamp": "2018-08-09T00:44:11Z",
  "ProcessId": 2009,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 03:44:11.770 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 03:47:49.094 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:47:49.098 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:47:49.100 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:47:49.100 +03:00 [DBG] Rendering check session result
2018-08-09 03:48:03.486 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:48:03.487 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:48:03.487 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:48:03.487 +03:00 [DBG] Start authorize request
2018-08-09 03:48:03.487 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:48:03.487 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:48:03.488 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:48:03.488 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.39807362475282071533775683449",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.39807362475282071533775683449",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:48:03.493 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= found in database: true
2018-08-09 03:48:03.502 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 03:48:03.502 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 03:48:03.502 +03:00 [DBG] Getting claims for access token for client: IonicoClient
2018-08-09 03:48:03.503 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:48:03.519 +03:00 [DBG] DxSOJ+fWf0BB5D2rO6synjLLt+vaoZYatt4N9w6FYzw= not found in database
2018-08-09 03:48:03.568 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicoClient
2018-08-09 03:48:03.568 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 03:48:03.572 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****_JxQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****76b0"
    }
  ],
  "ActivityId": "0HLFTI4C3OCL8:00000002",
  "TimeStamp": "2018-08-09T00:48:03Z",
  "ProcessId": 2009,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 03:48:03.573 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 03:52:02.292 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:52:02.293 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:52:02.293 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:52:02.293 +03:00 [DBG] Rendering check session result
2018-08-09 03:52:05.608 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:52:05.609 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:52:05.609 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:52:05.609 +03:00 [DBG] Rendering check session result
2018-08-09 03:52:08.442 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:52:08.443 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:52:08.443 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:52:08.443 +03:00 [DBG] Start authorize request
2018-08-09 03:52:08.443 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:52:08.443 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:52:08.444 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:52:08.444 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.0361703581453551861533775928416",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.0361703581453551861533775928416",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:52:08.450 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= found in database: true
2018-08-09 03:52:08.459 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 03:52:08.460 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 03:52:08.461 +03:00 [DBG] Getting claims for access token for client: IonicoClient
2018-08-09 03:52:08.462 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:52:08.479 +03:00 [DBG] OZS7K/PabLj82dEzjUd3TmfL1Yi+EbXMUQsvjHpNHKI= not found in database
2018-08-09 03:52:08.528 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicoClient
2018-08-09 03:52:08.529 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 03:52:08.534 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****w82A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****c773"
    }
  ],
  "ActivityId": "0HLFTI4C3OCLD:00000003",
  "TimeStamp": "2018-08-09T00:52:08Z",
  "ProcessId": 2009,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 03:52:08.534 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 03:52:13.292 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:52:13.292 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:52:13.292 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:52:13.293 +03:00 [DBG] Start authorize request
2018-08-09 03:52:13.293 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:52:13.293 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:52:13.293 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:52:13.293 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.66852921402493681533775933259",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.66852921402493681533775933259",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:52:13.298 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= found in database: true
2018-08-09 03:52:13.303 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 03:52:13.304 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 03:52:13.304 +03:00 [DBG] Getting claims for access token for client: IonicoClient
2018-08-09 03:52:13.304 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:52:13.320 +03:00 [DBG] BaI+iYqZG6pZD7hqq/zXUXNdZnUK2dI8jLuGcdnbFlg= not found in database
2018-08-09 03:52:13.387 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicoClient
2018-08-09 03:52:13.388 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 03:52:13.394 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-COw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****16b8"
    }
  ],
  "ActivityId": "0HLFTI4C3OCLD:00000004",
  "TimeStamp": "2018-08-09T00:52:13Z",
  "ProcessId": 2009,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 03:52:13.395 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 03:52:14.713 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:52:14.713 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:52:14.714 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:52:14.714 +03:00 [DBG] Rendering check session result
2018-08-09 03:59:13.731 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 03:59:13.732 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 03:59:13.732 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 03:59:13.733 +03:00 [DBG] Rendering check session result
2018-08-09 03:59:23.471 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 03:59:23.472 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 03:59:23.473 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 03:59:23.473 +03:00 [DBG] Start authorize request
2018-08-09 03:59:23.473 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:59:23.474 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 03:59:23.500 +03:00 [DBG] IonicoClient found in database: true
2018-08-09 03:59:23.505 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-09 03:59:23.512 +03:00 [DBG] Found [] API scopes in database
2018-08-09 03:59:23.513 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 03:59:23.514 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.8475813872295871533776363442",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.8475813872295871533776363442",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 03:59:23.536 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= found in database: true
2018-08-09 03:59:23.544 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 03:59:23.544 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 03:59:23.544 +03:00 [DBG] Getting claims for access token for client: IonicoClient
2018-08-09 03:59:23.544 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 03:59:23.562 +03:00 [DBG] IPIKbma/8KSzRJmIaNdeVcQyY8Vwh9KxSeCT2BrUo9E= not found in database
2018-08-09 03:59:23.614 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicoClient
2018-08-09 03:59:23.614 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 03:59:23.622 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****fECA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****a49c"
    }
  ],
  "ActivityId": "0HLFTI4C3OCLG:00000002",
  "TimeStamp": "2018-08-09T00:59:23Z",
  "ProcessId": 2009,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 03:59:23.623 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 04:13:32.376 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:13:32.376 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:13:32.377 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:13:32.377 +03:00 [DBG] Rendering check session result
2018-08-09 04:24:00.728 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:24:00.728 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:24:00.728 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:24:00.728 +03:00 [DBG] Rendering check session result
2018-08-09 04:24:03.277 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 04:24:03.278 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 04:24:03.278 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 04:24:03.279 +03:00 [DBG] Start authorize request
2018-08-09 04:24:03.279 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:24:03.279 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:24:03.301 +03:00 [DBG] IonicoClient found in database: true
2018-08-09 04:24:03.306 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-09 04:24:03.311 +03:00 [DBG] Found [] API scopes in database
2018-08-09 04:24:03.312 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:24:03.312 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.8794960951289491533777843239",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.8794960951289491533777843239",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 04:24:03.323 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= found in database: true
2018-08-09 04:24:03.328 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 04:24:03.328 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 04:24:03.328 +03:00 [DBG] Getting claims for access token for client: IonicoClient
2018-08-09 04:24:03.328 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:24:03.344 +03:00 [DBG] jeioTKL5N77Jg+/8Y9Y0dKAmyRpJ8j+WqKIdBMDMtT0= not found in database
2018-08-09 04:24:03.384 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicoClient
2018-08-09 04:24:03.384 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 04:24:03.388 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****d7bA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d8ea"
    }
  ],
  "ActivityId": "0HLFTI4C3OCLN:00000002",
  "TimeStamp": "2018-08-09T01:24:03Z",
  "ProcessId": 2009,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 04:24:03.389 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 04:24:26.953 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:24:26.953 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:24:26.953 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:24:26.953 +03:00 [DBG] Rendering check session result
2018-08-09 04:24:51.859 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:24:51.859 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:24:51.859 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:24:51.859 +03:00 [DBG] Rendering check session result
2018-08-09 04:25:00.494 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:25:00.495 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:25:00.495 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:25:00.496 +03:00 [DBG] Rendering check session result
2018-08-09 04:25:13.377 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:25:13.379 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:25:13.381 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:25:13.382 +03:00 [DBG] Rendering check session result
2018-08-09 04:25:17.728 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:25:17.728 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:25:17.728 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:25:17.728 +03:00 [DBG] Rendering check session result
2018-08-09 04:26:19.439 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-09 04:26:19.468 +03:00 [DBG] Stopping token cleanup
2018-08-09 04:26:43.285 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 04:26:43.321 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 04:26:43.321 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 04:26:43.321 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 04:26:43.321 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 04:26:43.433 +03:00 [DBG] Starting token cleanup
2018-08-09 04:27:11.093 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:27:11.101 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:27:11.102 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:27:11.106 +03:00 [DBG] Rendering check session result
2018-08-09 04:27:14.132 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 04:27:14.154 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 04:27:14.155 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 04:27:14.162 +03:00 [DBG] Start authorize request
2018-08-09 04:27:14.186 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:27:14.193 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:27:14.581 +03:00 [DBG] IonicoClient found in database: true
2018-08-09 04:27:14.692 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-09 04:27:14.817 +03:00 [DBG] Found [] API scopes in database
2018-08-09 04:27:14.839 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:27:14.868 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.97062196588780751533778034073",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.97062196588780751533778034073",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 04:27:15.209 +03:00 [DBG] 0LmUybTLImXdTBV+gnNFwSJ6/5SoNil+Ot+qaRfQyao= found in database: true
2018-08-09 04:27:15.218 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 04:27:15.231 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 04:27:15.247 +03:00 [DBG] Getting claims for access token for client: IonicoClient
2018-08-09 04:27:15.247 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:27:15.462 +03:00 [DBG] 2Z4B9iq6iL5mvgyR5iASxZfc+5bwwzpIndqFHoyz6Hc= not found in database
2018-08-09 04:27:15.562 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicoClient
2018-08-09 04:27:15.562 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 04:27:15.636 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicoClient",
  "ClientName": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hJPw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****2c06"
    }
  ],
  "ActivityId": "0HLFTISSRQ2SS:00000002",
  "TimeStamp": "2018-08-09T01:27:15Z",
  "ProcessId": 9269,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 04:27:15.641 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 04:27:17.807 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-09 04:27:17.838 +03:00 [DBG] Stopping token cleanup
2018-08-09 04:27:26.665 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 04:27:26.695 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 04:27:26.695 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 04:27:26.695 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 04:27:26.695 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 04:27:26.839 +03:00 [DBG] Starting token cleanup
2018-08-09 04:27:55.637 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:27:55.642 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:27:55.643 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:27:55.646 +03:00 [DBG] Rendering check session result
2018-08-09 04:28:04.828 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 04:28:04.845 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 04:28:04.846 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 04:28:04.856 +03:00 [DBG] Start authorize request
2018-08-09 04:28:04.878 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:28:04.887 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:28:07.119 +03:00 [DBG] IonicooClient found in database: true
2018-08-09 04:28:07.234 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-09 04:28:07.386 +03:00 [DBG] Found [] API scopes in database
2018-08-09 04:28:07.406 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:28:07.428 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.35811350506651141533778084751",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.35811350506651141533778084751",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 04:28:07.780 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: false
2018-08-09 04:28:07.781 +03:00 [DBG] user_consent grant with value: IonicooClient|d1862db5-db7d-4edc-89ed-4b486588a3c1 not found in store.
2018-08-09 04:28:07.782 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-09 04:28:07.782 +03:00 [INF] Showing consent: User has not yet consented
2018-08-09 04:28:08.035 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:28:08.036 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:28:09.938 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:28:09.939 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:28:09.963 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-09 04:28:09.965 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-09 04:28:09.965 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-09 04:28:09.974 +03:00 [DBG] Start authorize callback request
2018-08-09 04:28:09.981 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:28:09.981 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:28:09.982 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:28:09.982 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.35811350506651141533778084751",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.35811350506651141533778084751",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 04:28:09.989 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: false
2018-08-09 04:28:09.989 +03:00 [DBG] user_consent grant with value: IonicooClient|d1862db5-db7d-4edc-89ed-4b486588a3c1 not found in store.
2018-08-09 04:28:09.990 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-09 04:28:09.997 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-09 04:28:09.999 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-09 04:28:10.004 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:28:10.025 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= not found in database
2018-08-09 04:28:10.167 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 04:28:10.184 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-09 04:28:10.184 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:28:10.398 +03:00 [DBG] COFuRYjoFxvrRXoAsprKIUd0HEQMlqS2rG8277aqo+Q= not found in database
2018-08-09 04:28:10.437 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-09 04:28:10.437 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 04:28:10.497 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****TuqQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****dbdd"
    }
  ],
  "ActivityId": "0HLFTITA5ACD9:00000005",
  "TimeStamp": "2018-08-09T01:28:10Z",
  "ProcessId": 9559,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 04:28:10.502 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 04:28:10.535 +03:00 [DBG] Augmenting SignInContext
2018-08-09 04:28:10.547 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-09 04:34:29.707 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:34:29.708 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:34:29.709 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:34:29.710 +03:00 [DBG] Rendering check session result
2018-08-09 04:34:33.842 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:34:33.842 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:34:33.842 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:34:33.842 +03:00 [DBG] Rendering check session result
2018-08-09 04:34:41.679 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:34:41.679 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:34:41.679 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:34:41.679 +03:00 [DBG] Rendering check session result
2018-08-09 04:34:45.011 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 04:34:45.012 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 04:34:45.016 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 04:34:45.020 +03:00 [DBG] Start authorize request
2018-08-09 04:34:45.021 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:34:45.022 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:34:45.024 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:34:45.025 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.62659998927171621533778484978",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.62659998927171621533778484978",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 04:34:45.090 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-09 04:34:45.106 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 04:34:45.107 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 04:34:45.108 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-09 04:34:45.109 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:34:45.143 +03:00 [DBG] Gl/s5PVJMITmkEBv4oREBqK2CR1St1WU6Qr4DS3KB2Q= not found in database
2018-08-09 04:34:45.182 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-09 04:34:45.183 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 04:34:45.191 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zyGg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****c7fb"
    }
  ],
  "ActivityId": "0HLFTITA5ACDB:00000004",
  "TimeStamp": "2018-08-09T01:34:45Z",
  "ProcessId": 9559,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 04:34:45.192 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 04:36:26.995 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:36:26.998 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:36:26.999 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:36:26.999 +03:00 [DBG] Rendering check session result
2018-08-09 04:36:32.231 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:36:32.235 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:36:32.238 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:36:32.239 +03:00 [DBG] Rendering check session result
2018-08-09 04:36:34.878 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 04:36:34.879 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 04:36:34.879 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 04:36:34.879 +03:00 [DBG] Start authorize request
2018-08-09 04:36:34.879 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:36:34.879 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:36:34.880 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:36:34.880 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.418301613117467051533778594845",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.418301613117467051533778594845",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 04:36:34.887 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-09 04:36:34.894 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 04:36:34.894 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 04:36:34.894 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-09 04:36:34.894 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:36:34.909 +03:00 [DBG] KNHGixFPJ+268WcCuOuFgb1UG7PUHOR1lfzIKysW0VA= not found in database
2018-08-09 04:36:34.942 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-09 04:36:34.942 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 04:36:34.949 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****trqw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****1816"
    }
  ],
  "ActivityId": "0HLFTITA5ACDB:00000007",
  "TimeStamp": "2018-08-09T01:36:34Z",
  "ProcessId": 9559,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 04:36:34.950 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 04:39:28.966 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:39:28.966 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:39:28.966 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:39:28.966 +03:00 [DBG] Rendering check session result
2018-08-09 04:39:33.629 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 04:39:33.629 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 04:39:33.630 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 04:39:33.630 +03:00 [DBG] Start authorize request
2018-08-09 04:39:33.630 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:39:33.630 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:39:33.630 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:39:33.630 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.86826247842973551533778773596",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.86826247842973551533778773596",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 04:39:33.635 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-09 04:39:33.642 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 04:39:33.644 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 04:39:33.645 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-09 04:39:33.645 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:39:33.659 +03:00 [DBG] KBkwI0BIfRP0lV4pNSs/wv6eLwXhhfMZ3JK4XZ92T90= not found in database
2018-08-09 04:39:33.694 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-09 04:39:33.694 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 04:39:33.698 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XdTA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****a7f2"
    }
  ],
  "ActivityId": "0HLFTITA5ACDL:00000002",
  "TimeStamp": "2018-08-09T01:39:33Z",
  "ProcessId": 9559,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 04:39:33.699 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 04:40:24.935 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 04:40:24.936 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 04:40:24.937 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 04:40:24.938 +03:00 [DBG] Rendering check session result
2018-08-09 04:40:32.558 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 04:40:32.559 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 04:40:32.561 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 04:40:32.561 +03:00 [DBG] Start authorize request
2018-08-09 04:40:32.562 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:40:32.562 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 04:40:32.562 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 04:40:32.563 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.99135029747510961533778832526",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.99135029747510961533778832526",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 04:40:32.568 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-09 04:40:32.574 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 04:40:32.575 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 04:40:32.575 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-09 04:40:32.576 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 04:40:32.592 +03:00 [DBG] BqxBOfto8T+/DNf4k5BCKKJsdyP2xdeBhaHFDser7ak= not found in database
2018-08-09 04:40:32.623 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-09 04:40:32.623 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 04:40:32.629 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****aUTw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****260d"
    }
  ],
  "ActivityId": "0HLFTITA5ACDL:00000004",
  "TimeStamp": "2018-08-09T01:40:32Z",
  "ProcessId": 9559,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 04:40:32.630 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 15:51:44.820 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-09 15:51:44.875 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-09 15:51:44.875 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-09 15:51:44.876 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-09 15:51:44.876 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-09 15:51:45.036 +03:00 [DBG] Starting token cleanup
2018-08-09 15:52:27.986 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 15:52:27.993 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 15:52:27.993 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 15:52:27.996 +03:00 [DBG] Rendering check session result
2018-08-09 15:52:32.136 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 15:52:32.161 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 15:52:32.161 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 15:52:32.171 +03:00 [DBG] Start authorize request
2018-08-09 15:52:32.193 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 15:52:32.202 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 15:52:33.325 +03:00 [DBG] IonicooClient found in database: true
2018-08-09 15:52:33.444 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-09 15:52:33.631 +03:00 [DBG] Found [] API scopes in database
2018-08-09 15:52:33.657 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 15:52:33.678 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.48649701254176891533819152076",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.48649701254176891533819152076",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 15:52:33.779 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-09 15:52:33.789 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 15:52:33.800 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 15:52:33.821 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-09 15:52:33.822 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 15:52:33.886 +03:00 [DBG] cbJz4fPxEhWJeQGPm2i+nJfI0vndqMBGwau6yeTkT2A= not found in database
2018-08-09 15:52:34.133 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-09 15:52:34.134 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 15:52:34.240 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****PkoA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****27de"
    }
  ],
  "ActivityId": "0HLFTURQ32JNN:00000002",
  "TimeStamp": "2018-08-09T12:52:34Z",
  "ProcessId": 24949,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 15:52:34.246 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 15:57:47.089 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 15:57:47.089 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 15:57:47.089 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 15:57:47.089 +03:00 [DBG] Rendering check session result
2018-08-09 16:03:15.775 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 16:03:15.777 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 16:03:15.780 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 16:03:15.780 +03:00 [DBG] Rendering check session result
2018-08-09 16:04:34.381 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 16:04:34.381 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 16:04:34.381 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 16:04:34.381 +03:00 [DBG] Rendering check session result
2018-08-09 16:04:41.433 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 16:04:41.434 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 16:04:41.436 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 16:04:41.437 +03:00 [DBG] Start authorize request
2018-08-09 16:04:41.438 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 16:04:41.438 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 16:04:41.441 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 16:04:41.442 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.51703095950744051533819881397",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.51703095950744051533819881397",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 16:04:41.463 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-09 16:04:41.472 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 16:04:41.473 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 16:04:41.473 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-09 16:04:41.474 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 16:04:41.518 +03:00 [DBG] rwx+8+cxON1zUN71/X9qev9cKV6shCmu+6kK9E9SXNw= not found in database
2018-08-09 16:04:41.552 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-09 16:04:41.552 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 16:04:41.560 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****sxYw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****b5e4"
    }
  ],
  "ActivityId": "0HLFTURQ32JO0:00000003",
  "TimeStamp": "2018-08-09T13:04:41Z",
  "ProcessId": 24949,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 16:04:41.560 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 16:11:34.102 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-09 16:11:34.104 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-09 16:11:34.105 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-09 16:11:34.107 +03:00 [DBG] Rendering check session result
2018-08-09 16:11:40.096 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-09 16:11:40.097 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-09 16:11:40.098 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-09 16:11:40.098 +03:00 [DBG] Start authorize request
2018-08-09 16:11:40.098 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 16:11:40.098 +03:00 [DBG] Start authorize request protocol validation
2018-08-09 16:11:40.118 +03:00 [DBG] IonicooClient found in database: true
2018-08-09 16:11:40.125 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-09 16:11:40.128 +03:00 [DBG] Found [] API scopes in database
2018-08-09 16:11:40.129 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-09 16:11:40.129 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.208217193722671561533820300062",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.208217193722671561533820300062",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-09 16:11:40.153 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-09 16:11:40.160 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-09 16:11:40.160 +03:00 [DBG] Creating Implicit Flow response.
2018-08-09 16:11:40.160 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-09 16:11:40.160 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-09 16:11:40.177 +03:00 [DBG] ISYAEcIev0gvVhxscuAfTyNuoyRE+Cywo34Jtu1S60s= not found in database
2018-08-09 16:11:40.214 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-09 16:11:40.215 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-09 16:11:40.223 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****aYZg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6346"
    }
  ],
  "ActivityId": "0HLFTURQ32JO5:00000002",
  "TimeStamp": "2018-08-09T13:11:40Z",
  "ProcessId": 24949,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-09 16:11:40.224 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-09 16:51:45.099 +03:00 [INF] Clearing 14 tokens
2018-08-09 17:35:08.770 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-09 17:35:08.790 +03:00 [DBG] Stopping token cleanup
2018-08-10 19:25:50.327 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-10 19:25:50.426 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-10 19:25:50.426 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-10 19:25:50.426 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-10 19:25:50.426 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-10 19:25:50.986 +03:00 [DBG] Starting token cleanup
2018-08-10 19:26:06.866 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-10 19:26:06.914 +03:00 [DBG] Stopping token cleanup
2018-08-10 19:28:24.173 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-10 19:28:24.228 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-10 19:28:24.229 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-10 19:28:24.229 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-10 19:28:24.229 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-10 19:28:24.631 +03:00 [DBG] Starting token cleanup
2018-08-10 19:28:34.569 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:28:34.583 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:28:34.584 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:28:34.591 +03:00 [DBG] Start authorize request
2018-08-10 19:28:34.603 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:28:34.610 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:28:34.904 +03:00 [DBG] IonicooClient found in database: true
2018-08-10 19:28:34.999 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-10 19:28:35.127 +03:00 [DBG] Found [] API scopes in database
2018-08-10 19:28:35.152 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:28:35.172 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337726759040.489609379910539",
  "Nonce": "N0.364496582691743451533918513683",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.364496582691743451533918513683",
    "state": "15337726759040.489609379910539"
  }
}
2018-08-10 19:28:35.249 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:28:35.258 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:28:35.268 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:28:35.283 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:28:35.284 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:28:35.342 +03:00 [DBG] PjPhMP1yQw+kXh2HSCsRknNUyMUSmBR0uonrPFyPHdM= not found in database
2018-08-10 19:28:35.732 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:28:35.732 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:28:35.815 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Nl4w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6722"
    }
  ],
  "ActivityId": "0HLFURP8FDOBM:00000001",
  "TimeStamp": "2018-08-10T16:28:35Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:28:35.820 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337726759040.489609379910539",
  "Scope": "openid profile email"
}
2018-08-10 19:30:44.497 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 19:30:44.508 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 19:30:44.508 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 19:30:44.514 +03:00 [DBG] Rendering check session result
2018-08-10 19:31:06.374 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:31:06.376 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:31:06.376 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:31:06.377 +03:00 [DBG] Start authorize request
2018-08-10 19:31:06.378 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:31:06.379 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:31:06.381 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:31:06.382 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.45959077502179271533918666319",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.45959077502179271533918666319",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 19:31:06.394 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:31:06.407 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:31:06.408 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:31:06.409 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:31:06.410 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:31:06.442 +03:00 [DBG] gF+SOIUJqTMGA+6VYxc7BRdFJdcqAJmlfc04Oci723U= not found in database
2018-08-10 19:31:06.487 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:31:06.488 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:31:06.494 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****bEXQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****1cda"
    }
  ],
  "ActivityId": "0HLFURP8FDOBO:00000002",
  "TimeStamp": "2018-08-10T16:31:06Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:31:06.495 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 19:35:56.439 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 19:35:56.440 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 19:35:56.440 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 19:35:56.441 +03:00 [DBG] Rendering check session result
2018-08-10 19:40:32.353 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 19:40:32.353 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 19:40:32.354 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 19:40:32.354 +03:00 [DBG] Rendering check session result
2018-08-10 19:40:39.808 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:40:39.809 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:40:39.812 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:40:39.812 +03:00 [DBG] Start authorize request
2018-08-10 19:40:39.812 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:40:39.812 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:40:39.813 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:40:39.813 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.153349747170097751533919239780",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.153349747170097751533919239780",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 19:40:39.846 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:40:39.852 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:40:39.852 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:40:39.852 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:40:39.852 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:40:39.870 +03:00 [DBG] 5XE0i3JYZD7cTuJgOQ8p/dKlbj3LPxydqzhHhifSoxM= not found in database
2018-08-10 19:40:39.915 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:40:39.915 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:40:39.920 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****B_Bg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7d80"
    }
  ],
  "ActivityId": "0HLFURP8FDOC0:00000002",
  "TimeStamp": "2018-08-10T16:40:39Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:40:39.921 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 19:43:31.935 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 19:43:31.935 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 19:43:31.935 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 19:43:31.935 +03:00 [DBG] Rendering check session result
2018-08-10 19:43:34.165 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:43:34.166 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:43:34.167 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:43:34.167 +03:00 [DBG] Start authorize request
2018-08-10 19:43:34.168 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:43:34.168 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:43:34.169 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:43:34.169 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.170005230277283651533919414129",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.170005230277283651533919414129",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 19:43:34.177 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:43:34.187 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:43:34.187 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:43:34.187 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:43:34.188 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:43:34.206 +03:00 [DBG] S6ls8yNV2cM9eNuDjsqznALGkPpcG5tqm/rn1tpHHH4= not found in database
2018-08-10 19:43:34.241 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:43:34.241 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:43:34.247 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****yV1g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****db12"
    }
  ],
  "ActivityId": "0HLFURP8FDOC4:00000002",
  "TimeStamp": "2018-08-10T16:43:34Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:43:34.248 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 19:45:57.357 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 19:45:57.359 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 19:45:57.359 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 19:45:57.359 +03:00 [DBG] Rendering check session result
2018-08-10 19:45:59.781 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:45:59.783 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:45:59.784 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:45:59.784 +03:00 [DBG] Start authorize request
2018-08-10 19:45:59.784 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:45:59.789 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:45:59.807 +03:00 [DBG] IonicooClient found in database: true
2018-08-10 19:45:59.813 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-10 19:45:59.818 +03:00 [DBG] Found [] API scopes in database
2018-08-10 19:45:59.818 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:45:59.818 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.63099727391497781533919559725",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.63099727391497781533919559725",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 19:45:59.823 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:45:59.831 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:45:59.832 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:45:59.832 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:45:59.833 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:45:59.850 +03:00 [DBG] AWYoY1YuILAOYXtklBGfaMZwuiIj0pghx8Dv5IbTqZo= not found in database
2018-08-10 19:45:59.878 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:45:59.880 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:45:59.886 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OZ0g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****5836"
    }
  ],
  "ActivityId": "0HLFURP8FDOC7:00000002",
  "TimeStamp": "2018-08-10T16:45:59Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:45:59.886 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 19:46:09.797 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:46:09.797 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:46:09.797 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:46:09.798 +03:00 [DBG] Start authorize request
2018-08-10 19:46:09.798 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:46:09.798 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:46:09.798 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:46:09.798 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.39272412103775791533919569766",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.39272412103775791533919569766",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 19:46:09.806 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:46:09.812 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:46:09.812 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:46:09.813 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:46:09.813 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:46:09.832 +03:00 [DBG] Rct7PTSnzkJtzRTOHgqpthFkmORxqQhdvd1xryECbdE= not found in database
2018-08-10 19:46:09.862 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:46:09.862 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:46:09.866 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****m08A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3ef1"
    }
  ],
  "ActivityId": "0HLFURP8FDOC7:00000003",
  "TimeStamp": "2018-08-10T16:46:09Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:46:09.866 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 19:49:16.556 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 19:49:16.557 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 19:49:16.558 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 19:49:16.559 +03:00 [DBG] Rendering check session result
2018-08-10 19:49:22.656 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:49:22.657 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:49:22.657 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:49:22.658 +03:00 [DBG] Start authorize request
2018-08-10 19:49:22.658 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:49:22.658 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:49:22.659 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:49:22.660 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.22408092633195831533919762613",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.22408092633195831533919762613",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 19:49:22.672 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:49:22.681 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:49:22.684 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:49:22.687 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:49:22.688 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:49:22.718 +03:00 [DBG] 8yE0InXYy/eKCNZSnlHRvnpuYh7uAP8ob3X9LYBdRBs= not found in database
2018-08-10 19:49:22.747 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:49:22.747 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:49:22.752 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hdsA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****9d76"
    }
  ],
  "ActivityId": "0HLFURP8FDOCC:00000002",
  "TimeStamp": "2018-08-10T16:49:22Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:49:22.752 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 19:50:14.047 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:50:14.048 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:50:14.048 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:50:14.048 +03:00 [DBG] Start authorize request
2018-08-10 19:50:14.048 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:50:14.048 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:50:14.049 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:50:14.049 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.76811327255953791533919814008",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.76811327255953791533919814008",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 19:50:14.059 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:50:14.066 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:50:14.067 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:50:14.068 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:50:14.068 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:50:14.084 +03:00 [DBG] jEe1nmPsw425WI+YyWsgjzAuYYd9ccbiPbtCl5cDKpE= not found in database
2018-08-10 19:50:14.111 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:50:14.111 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:50:14.116 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1g9Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****4607"
    }
  ],
  "ActivityId": "0HLFURP8FDOCC:00000003",
  "TimeStamp": "2018-08-10T16:50:14Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:50:14.120 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 19:56:04.984 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 19:56:04.986 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 19:56:04.987 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 19:56:04.987 +03:00 [DBG] Rendering check session result
2018-08-10 19:56:16.080 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:56:16.081 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:56:16.082 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:56:16.082 +03:00 [DBG] Start authorize request
2018-08-10 19:56:16.082 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:56:16.082 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:56:16.082 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:56:16.083 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.182863102059332761533920176043",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.182863102059332761533920176043",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 19:56:16.102 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:56:16.109 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:56:16.109 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:56:16.110 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:56:16.110 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:56:16.132 +03:00 [DBG] T9dBPk86RYqlemVk2t8MH9gky++6wlIy6paN5DVFShQ= not found in database
2018-08-10 19:56:16.162 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:56:16.162 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:56:16.166 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****q89w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****1fac"
    }
  ],
  "ActivityId": "0HLFURP8FDOCH:00000002",
  "TimeStamp": "2018-08-10T16:56:16Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:56:16.166 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 19:58:42.444 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 19:58:42.444 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 19:58:42.444 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 19:58:42.445 +03:00 [DBG] Rendering check session result
2018-08-10 19:59:10.564 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 19:59:10.565 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 19:59:10.565 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 19:59:10.566 +03:00 [DBG] Start authorize request
2018-08-10 19:59:10.566 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:59:10.566 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 19:59:10.567 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 19:59:10.567 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.19907262470227651533920350525",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.19907262470227651533920350525",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 19:59:10.573 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 19:59:10.582 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 19:59:10.583 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 19:59:10.585 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 19:59:10.585 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 19:59:10.604 +03:00 [DBG] HG625eA9FfW2grohholKDBOPS1ssS5O5AMp1RftCwEg= not found in database
2018-08-10 19:59:10.631 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 19:59:10.632 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 19:59:10.639 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****TWRQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3d6f"
    }
  ],
  "ActivityId": "0HLFURP8FDOCL:00000002",
  "TimeStamp": "2018-08-10T16:59:10Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 19:59:10.639 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 20:06:37.976 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 20:06:37.976 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 20:06:37.977 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 20:06:37.977 +03:00 [DBG] Rendering check session result
2018-08-10 20:06:57.382 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 20:06:57.383 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 20:06:57.383 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 20:06:57.383 +03:00 [DBG] Start authorize request
2018-08-10 20:06:57.383 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:06:57.383 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 20:06:57.405 +03:00 [DBG] IonicooClient found in database: true
2018-08-10 20:06:57.413 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-10 20:06:57.416 +03:00 [DBG] Found [] API scopes in database
2018-08-10 20:06:57.416 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 20:06:57.417 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.78434693447745941533920817346",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.78434693447745941533920817346",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 20:06:57.430 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 20:06:57.436 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 20:06:57.437 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 20:06:57.437 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 20:06:57.438 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:06:57.453 +03:00 [DBG] /n24nbIYhbyYOrQKzfvIx8N+F6IQHwZkKVfV4b+wGR4= not found in database
2018-08-10 20:06:57.483 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 20:06:57.483 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 20:06:57.488 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****egNw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0fec"
    }
  ],
  "ActivityId": "0HLFURP8FDOCO:00000002",
  "TimeStamp": "2018-08-10T17:06:57Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 20:06:57.488 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 20:06:59.163 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-10 20:06:59.220 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-10 20:06:59.221 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 20:06:59.225 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-10 20:06:59.229 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-10 20:06:59.229 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-10 20:06:59.235 +03:00 [DBG] Start key discovery request
2018-08-10 20:11:03.976 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 20:11:03.976 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 20:11:03.976 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 20:11:03.976 +03:00 [DBG] Rendering check session result
2018-08-10 20:11:10.509 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 20:11:10.510 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 20:11:10.510 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 20:11:10.510 +03:00 [DBG] Start authorize request
2018-08-10 20:11:10.510 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:11:10.510 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 20:11:10.511 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 20:11:10.511 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.64775961120407241533921070477",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.64775961120407241533921070477",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 20:11:10.518 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 20:11:10.525 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 20:11:10.525 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 20:11:10.525 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 20:11:10.525 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:11:10.541 +03:00 [DBG] by9wRt1ZxhcIdp9cy4QGLB6OKToMhg8K4wjkVO1twxM= not found in database
2018-08-10 20:11:12.314 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 20:11:12.314 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 20:11:12.319 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****dMKA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****5d4f"
    }
  ],
  "ActivityId": "0HLFURP8FDOCS:00000002",
  "TimeStamp": "2018-08-10T17:11:12Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 20:11:12.320 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 20:11:13.829 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-10 20:11:13.830 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 20:11:13.830 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-10 20:11:13.831 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-10 20:11:13.831 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-10 20:11:13.831 +03:00 [DBG] Start key discovery request
2018-08-10 20:14:42.198 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 20:14:42.199 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 20:14:42.199 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 20:14:42.200 +03:00 [DBG] Rendering check session result
2018-08-10 20:21:56.633 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 20:21:56.633 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 20:21:56.634 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 20:21:56.635 +03:00 [DBG] Rendering check session result
2018-08-10 20:22:01.474 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 20:22:01.475 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 20:22:01.475 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 20:22:01.475 +03:00 [DBG] Start authorize request
2018-08-10 20:22:01.475 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:22:01.475 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 20:22:01.496 +03:00 [DBG] IonicooClient found in database: true
2018-08-10 20:22:01.502 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-10 20:22:01.505 +03:00 [DBG] Found [] API scopes in database
2018-08-10 20:22:01.505 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 20:22:01.505 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.33854397607741961533921721443",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.33854397607741961533921721443",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 20:22:01.519 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 20:22:01.524 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 20:22:01.524 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 20:22:01.524 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 20:22:01.525 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:22:01.539 +03:00 [DBG] 4mJGqJAnE3I830V6y/FzNvWhRLPO5urF52iXyiNAE7k= not found in database
2018-08-10 20:22:01.566 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 20:22:01.567 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 20:22:01.572 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ngNQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****362f"
    }
  ],
  "ActivityId": "0HLFURP8FDOD3:00000002",
  "TimeStamp": "2018-08-10T17:22:01Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 20:22:01.572 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 20:22:03.062 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-10 20:22:03.065 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-10 20:22:03.065 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 20:22:03.065 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-10 20:22:03.065 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-10 20:22:03.066 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-10 20:22:03.066 +03:00 [DBG] Start key discovery request
2018-08-10 20:28:24.675 +03:00 [INF] Clearing 3 tokens
2018-08-10 20:32:12.490 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 20:32:12.491 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 20:32:12.492 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 20:32:12.492 +03:00 [DBG] Rendering check session result
2018-08-10 20:32:17.833 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 20:32:17.835 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 20:32:17.836 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 20:32:17.836 +03:00 [DBG] Start authorize request
2018-08-10 20:32:17.837 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:32:17.837 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 20:32:17.838 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 20:32:17.838 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.071084119758318741533922337801",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.071084119758318741533922337801",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 20:32:17.843 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 20:32:17.850 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 20:32:17.850 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 20:32:17.851 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 20:32:17.853 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:32:17.875 +03:00 [DBG] SY2lF0j7zfIYLmJHk1Gvx1YKvj7Jr2Ychcs/IBeXCpU= not found in database
2018-08-10 20:32:17.903 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 20:32:17.903 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 20:32:17.908 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****gvhw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****4e44"
    }
  ],
  "ActivityId": "0HLFURP8FDOD7:00000002",
  "TimeStamp": "2018-08-10T17:32:17Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 20:32:17.911 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 20:32:19.562 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-10 20:32:19.562 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 20:32:19.563 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-10 20:32:19.564 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-10 20:32:19.565 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-10 20:32:19.565 +03:00 [DBG] Start key discovery request
2018-08-10 20:38:09.213 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 20:38:09.214 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 20:38:09.215 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 20:38:09.215 +03:00 [DBG] Rendering check session result
2018-08-10 20:38:14.206 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 20:38:14.208 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 20:38:14.209 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 20:38:14.209 +03:00 [DBG] Start authorize request
2018-08-10 20:38:14.210 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:38:14.210 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 20:38:14.232 +03:00 [DBG] IonicooClient found in database: true
2018-08-10 20:38:14.238 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-10 20:38:14.242 +03:00 [DBG] Found [] API scopes in database
2018-08-10 20:38:14.243 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 20:38:14.243 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15337733645870.4421583925497439",
  "Nonce": "N0.66418570520845081533922694171",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/#/",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.66418570520845081533922694171",
    "state": "15337733645870.4421583925497439"
  }
}
2018-08-10 20:38:14.254 +03:00 [DBG] urk9tW6J6FZqo5M+J3IZWdxYCcVufZbAEHSY+DKxAeo= found in database: true
2018-08-10 20:38:14.262 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 20:38:14.262 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 20:38:14.263 +03:00 [DBG] Getting claims for access token for client: IonicooClient
2018-08-10 20:38:14.263 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:38:14.282 +03:00 [DBG] vs2j8dkb7fKdhr1386452Ed8WjSAlynSMKCDrIB0tXU= not found in database
2018-08-10 20:38:14.307 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IonicooClient
2018-08-10 20:38:14.307 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 20:38:14.316 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-8xQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6724"
    }
  ],
  "ActivityId": "0HLFURP8FDODE:00000002",
  "TimeStamp": "2018-08-10T17:38:14Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 20:38:14.317 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IonicooClient",
  "RedirectUri": "http://localhost:8000/#/",
  "State": "15337733645870.4421583925497439",
  "Scope": "openid profile email"
}
2018-08-10 20:38:15.835 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-10 20:38:15.839 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-10 20:38:15.840 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 20:38:15.840 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-10 20:38:15.841 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-10 20:38:15.843 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-10 20:38:15.844 +03:00 [DBG] Start key discovery request
2018-08-10 20:38:15.908 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 20:38:15.909 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 20:38:15.915 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 20:38:15.915 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 20:38:15.916 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-10 20:38:15.919 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-10 20:38:15.919 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-10 20:38:15.932 +03:00 [DBG] Start userinfo request
2018-08-10 20:38:15.946 +03:00 [DBG] Bearer token found in header
2018-08-10 20:38:15.974 +03:00 [DBG] vs2j8dkb7fKdhr1386452Ed8WjSAlynSMKCDrIB0tXU= found in database: true
2018-08-10 20:38:16.008 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-10 20:38:16.019 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "6c10a920d3e851564e736c007612703fb20d2a753ea391f5e2f0bd6172926724",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1533922694,
    "exp": 1533926294,
    "aud": "http://localhost:5000/resources",
    "client_id": "IonicooClient",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
    "auth_time": 1533774566,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-10 20:38:16.038 +03:00 [DBG] Creating userinfo response
2018-08-10 20:38:16.044 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 20:38:16.050 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 20:38:16.054 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-10 20:38:16.055 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 20:38:16.063 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-10 20:38:16.064 +03:00 [DBG] End userinfo request
2018-08-10 20:43:15.177 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 20:43:15.178 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 20:43:15.178 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 20:43:15.178 +03:00 [DBG] Start authorize request
2018-08-10 20:43:15.178 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:43:15.178 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 20:43:15.179 +03:00 [ERR] Invalid redirect_uri: http://localhost:8000/silent-renew.html
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.046302772659792211533922995152",
    "state": "15339229951520.15020723611362619",
    "prompt": "none"
  }
}
2018-08-10 20:43:15.187 +03:00 [ERR] Request validation failed
2018-08-10 20:43:15.192 +03:00 [INF] {
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.046302772659792211533922995152",
    "state": "15339229951520.15020723611362619",
    "prompt": "none"
  }
}
2018-08-10 20:43:15.218 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLFURP8FDODJ:00000001",
  "TimeStamp": "2018-08-10T17:43:15Z",
  "ProcessId": 31926,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 20:54:28.021 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-10 20:54:28.035 +03:00 [DBG] Stopping token cleanup
2018-08-10 20:55:03.920 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-10 20:55:03.967 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-10 20:55:03.968 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-10 20:55:03.968 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-10 20:55:03.968 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-10 20:55:04.154 +03:00 [DBG] Starting token cleanup
2018-08-10 20:55:59.970 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 20:55:59.976 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 20:55:59.977 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 20:55:59.979 +03:00 [DBG] Rendering check session result
2018-08-10 20:56:08.058 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 20:56:08.079 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 20:56:08.080 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 20:56:08.089 +03:00 [DBG] Start authorize request
2018-08-10 20:56:08.106 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:56:08.113 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 20:56:08.496 +03:00 [DBG] IonicooClient found in database: true
2018-08-10 20:56:08.529 +03:00 [ERR] Invalid redirect_uri: http://localhost:8000
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.439364066721258831533923768000",
    "state": "15339229951520.15020723611362619"
  }
}
2018-08-10 20:56:08.533 +03:00 [ERR] Request validation failed
2018-08-10 20:56:08.534 +03:00 [INF] {
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.439364066721258831533923768000",
    "state": "15339229951520.15020723611362619"
  }
}
2018-08-10 20:56:08.558 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLFUTA3ER5FT:00000002",
  "TimeStamp": "2018-08-10T17:56:08Z",
  "ProcessId": 18361,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 20:56:11.763 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 20:56:11.764 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 20:56:11.768 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 20:56:11.769 +03:00 [DBG] Start authorize request
2018-08-10 20:56:11.769 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 20:56:11.769 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 20:56:11.769 +03:00 [ERR] Invalid redirect_uri: http://localhost:8000
{
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.272358885494653261533923771732",
    "state": "15339229951520.15020723611362619"
  }
}
2018-08-10 20:56:11.769 +03:00 [ERR] Request validation failed
2018-08-10 20:56:11.770 +03:00 [INF] {
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "AllowedRedirectUris": [
    "http://localhost:8000/#/login-callback.html",
    "http://localhost:8000/#/silent-renew.html",
    "http://localhost:8000/#/"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "IonicooClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.272358885494653261533923771732",
    "state": "15339229951520.15020723611362619"
  }
}
2018-08-10 20:56:11.770 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IonicooClient",
  "ClientName": "IonicooClient",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLFUTA3ER5FT:00000004",
  "TimeStamp": "2018-08-10T17:56:11Z",
  "ProcessId": 18361,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 21:03:21.340 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-10 21:03:21.364 +03:00 [DBG] Stopping token cleanup
2018-08-10 21:03:36.096 +03:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (Size = 2000), @p12='?' (Size = 200), @p13='?' (Size = 200), @p14='?' (Size = 200), @p15='?' (Size = 2000), @p16='?' (DbType = Int32), @p17='?' (Size = 1000), @p18='?' (DbType = Boolean), @p19='?' (DbType = Boolean), @p20='?' (DbType = Boolean), @p21='?' (Size = 2000), @p22='?' (DbType = Int32), @p23='?' (DbType = Boolean), @p24='?' (Size = 2000), @p25='?' (Size = 200), @p26='?' (Size = 200), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = Boolean), @p32='?' (DbType = Int32), @p33='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Clients" ("AbsoluteRefreshTokenLifetime", "AccessTokenLifetime", "AccessTokenType", "AllowAccessTokensViaBrowser", "AllowOfflineAccess", "AllowPlainTextPkce", "AllowRememberConsent", "AlwaysIncludeUserClaimsInIdToken", "AlwaysSendClientClaims", "AuthorizationCodeLifetime", "BackChannelLogoutSessionRequired", "BackChannelLogoutUri", "ClientClaimsPrefix", "ClientId", "ClientName", "ClientUri", "ConsentLifetime", "Description", "EnableLocalLogin", "Enabled", "FrontChannelLogoutSessionRequired", "FrontChannelLogoutUri", "IdentityTokenLifetime", "IncludeJwtId", "LogoUri", "PairWiseSubjectSalt", "ProtocolType", "RefreshTokenExpiration", "RefreshTokenUsage", "RequireClientSecret", "RequireConsent", "RequirePkce", "SlidingRefreshTokenLifetime", "UpdateAccessTokenClaimsOnRefresh")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33)
RETURNING "Id";
Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Clients_ClientId"
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming) in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 467
   at Npgsql.NpgsqlDataReader.NextResult() in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 332
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1221
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1132
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
2018-08-10 21:03:36.234 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23505: duplicate key value violates unique constraint "IX_Clients_ClientId"
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming) in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 467
   at Npgsql.NpgsqlDataReader.NextResult() in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 332
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1221
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1132
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23505: duplicate key value violates unique constraint "IX_Clients_ClientId"
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming) in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 467
   at Npgsql.NpgsqlDataReader.NextResult() in C:\projects\npgsql\src\Npgsql\NpgsqlDataReader.cs:line 332
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1221
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior) in C:\projects\npgsql\src\Npgsql\NpgsqlCommand.cs:line 1132
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2018-08-10 21:04:55.668 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-10 21:04:55.713 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-10 21:04:55.713 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-10 21:04:55.713 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-10 21:04:55.713 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-10 21:04:55.886 +03:00 [DBG] Starting token cleanup
2018-08-10 21:05:42.489 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 21:05:42.496 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 21:05:43.142 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 21:05:43.147 +03:00 [DBG] Rendering check session result
2018-08-10 21:07:42.288 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 21:07:42.331 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 21:07:42.331 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 21:07:42.340 +03:00 [DBG] Start authorize request
2018-08-10 21:07:42.365 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:07:42.376 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 21:07:43.684 +03:00 [DBG] IoClient found in database: true
2018-08-10 21:07:43.786 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-10 21:07:43.918 +03:00 [DBG] Found [] API scopes in database
2018-08-10 21:07:43.943 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 21:07:43.965 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339229951520.15020723611362619",
  "Nonce": "N0.16386826825936331533924462179",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.16386826825936331533924462179",
    "state": "15339229951520.15020723611362619"
  }
}
2018-08-10 21:07:44.040 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= found in database: false
2018-08-10 21:07:44.041 +03:00 [DBG] user_consent grant with value: IoClient|d1862db5-db7d-4edc-89ed-4b486588a3c1 not found in store.
2018-08-10 21:07:44.042 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-10 21:07:44.042 +03:00 [INF] Showing consent: User has not yet consented
2018-08-10 21:07:44.252 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 21:07:44.253 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 21:07:48.507 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 21:07:48.507 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 21:07:48.531 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-10 21:07:48.533 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-10 21:07:48.533 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-10 21:07:48.541 +03:00 [DBG] Start authorize callback request
2018-08-10 21:07:48.548 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:07:48.549 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 21:07:48.549 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 21:07:48.549 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339229951520.15020723611362619",
  "Nonce": "N0.16386826825936331533924462179",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.16386826825936331533924462179",
    "state": "15339229951520.15020723611362619"
  }
}
2018-08-10 21:07:48.554 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= found in database: false
2018-08-10 21:07:48.554 +03:00 [DBG] user_consent grant with value: IoClient|d1862db5-db7d-4edc-89ed-4b486588a3c1 not found in store.
2018-08-10 21:07:48.555 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-10 21:07:48.562 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-10 21:07:48.565 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-10 21:07:48.570 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:07:48.590 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= not found in database
2018-08-10 21:07:48.714 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 21:07:48.729 +03:00 [DBG] Getting claims for access token for client: IoClient
2018-08-10 21:07:48.729 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:07:48.774 +03:00 [DBG] OHyXyCdQ9fvUtv/k228SgcQZ5Vpv4clyLU0ee6s4i+8= not found in database
2018-08-10 21:07:48.862 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IoClient
2018-08-10 21:07:48.862 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 21:07:48.924 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****LKlw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****49ab"
    }
  ],
  "ActivityId": "0HLFUTFG051NC:00000006",
  "TimeStamp": "2018-08-10T18:07:48Z",
  "ProcessId": 20299,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 21:07:48.929 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15339229951520.15020723611362619",
  "Scope": "openid profile email"
}
2018-08-10 21:07:48.961 +03:00 [DBG] Augmenting SignInContext
2018-08-10 21:07:48.973 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-10 21:08:05.619 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 21:08:05.621 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 21:08:05.623 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 21:08:05.624 +03:00 [DBG] Rendering check session result
2018-08-10 21:08:08.065 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 21:08:08.066 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 21:08:08.066 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 21:08:08.067 +03:00 [DBG] Start authorize request
2018-08-10 21:08:08.068 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:08:08.068 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 21:08:08.069 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 21:08:08.070 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339229951520.15020723611362619",
  "Nonce": "N0.85744531699173711533924488032",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.85744531699173711533924488032",
    "state": "15339229951520.15020723611362619"
  }
}
2018-08-10 21:08:08.086 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= found in database: true
2018-08-10 21:08:08.101 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 21:08:08.101 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 21:08:08.102 +03:00 [DBG] Getting claims for access token for client: IoClient
2018-08-10 21:08:08.103 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:08:08.127 +03:00 [DBG] HndmQQAcpoqMUFf/Au/J5szszIOI+gnJIL9TZLdtsHk= not found in database
2018-08-10 21:08:08.158 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IoClient
2018-08-10 21:08:08.158 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 21:08:08.163 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****vo8Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****a6a1"
    }
  ],
  "ActivityId": "0HLFUTFG051NC:00000008",
  "TimeStamp": "2018-08-10T18:08:08Z",
  "ProcessId": 20299,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 21:08:08.167 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15339229951520.15020723611362619",
  "Scope": "openid profile email"
}
2018-08-10 21:08:52.268 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 21:08:52.269 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 21:08:52.270 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 21:08:52.271 +03:00 [DBG] Rendering check session result
2018-08-10 21:09:00.642 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 21:09:00.643 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 21:09:00.643 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 21:09:00.643 +03:00 [DBG] Start authorize request
2018-08-10 21:09:00.643 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:09:00.643 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 21:09:00.644 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 21:09:00.644 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339229951520.15020723611362619",
  "Nonce": "N0.276849981805524561533924540609",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.276849981805524561533924540609",
    "state": "15339229951520.15020723611362619"
  }
}
2018-08-10 21:09:00.655 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= found in database: true
2018-08-10 21:09:00.661 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 21:09:00.661 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 21:09:00.661 +03:00 [DBG] Getting claims for access token for client: IoClient
2018-08-10 21:09:00.662 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:09:00.682 +03:00 [DBG] Zs3fg5QaRF5UISJTm7S5KeKiaHQ9gM9VVzLKp/BvcU8= not found in database
2018-08-10 21:09:00.708 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IoClient
2018-08-10 21:09:00.708 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 21:09:00.712 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****mGoQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****b3ba"
    }
  ],
  "ActivityId": "0HLFUTFG051NC:0000000A",
  "TimeStamp": "2018-08-10T18:09:00Z",
  "ProcessId": 20299,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 21:09:00.712 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15339229951520.15020723611362619",
  "Scope": "openid profile email"
}
2018-08-10 21:09:02.173 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-10 21:09:02.213 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-10 21:09:02.214 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 21:09:02.218 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-10 21:09:02.222 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-10 21:09:02.222 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-10 21:09:02.231 +03:00 [DBG] Start key discovery request
2018-08-10 21:09:02.300 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 21:09:02.300 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 21:09:02.312 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 21:09:02.312 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 21:09:02.312 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-10 21:09:02.316 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-10 21:09:02.316 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-10 21:09:02.326 +03:00 [DBG] Start userinfo request
2018-08-10 21:09:02.331 +03:00 [DBG] Bearer token found in header
2018-08-10 21:09:02.357 +03:00 [DBG] Zs3fg5QaRF5UISJTm7S5KeKiaHQ9gM9VVzLKp/BvcU8= found in database: true
2018-08-10 21:09:02.383 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-10 21:09:02.392 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b4d8164a0976d3ee6fc66a919c95dfd1f9c86419c8c68f472d90a6993b3cb3ba",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1533924540,
    "exp": 1533928140,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
    "auth_time": 1533774566,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-10 21:09:02.404 +03:00 [DBG] Creating userinfo response
2018-08-10 21:09:02.410 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 21:09:02.413 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 21:09:02.417 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-10 21:09:02.417 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 21:09:02.424 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-10 21:09:02.424 +03:00 [DBG] End userinfo request
2018-08-10 21:10:05.185 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 21:10:05.186 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 21:10:05.186 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 21:10:05.186 +03:00 [DBG] Start authorize request
2018-08-10 21:10:05.187 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:10:05.187 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 21:10:05.187 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 21:10:05.188 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339246051460.0939426084563948",
  "Nonce": "N0.033385001030450611533924605146",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.033385001030450611533924605146",
    "state": "15339246051460.0939426084563948"
  }
}
2018-08-10 21:10:05.194 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= found in database: true
2018-08-10 21:10:05.205 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 21:10:05.205 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 21:10:05.205 +03:00 [DBG] Getting claims for access token for client: IoClient
2018-08-10 21:10:05.205 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:10:05.226 +03:00 [DBG] ZIpiMQ1IG3NLGT3McXbA8V7WVHVVmuZ6mrysC/VSt1U= not found in database
2018-08-10 21:10:05.262 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IoClient
2018-08-10 21:10:05.262 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 21:10:05.267 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Ee3A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****164f"
    }
  ],
  "ActivityId": "0HLFUTFG051NC:0000000B",
  "TimeStamp": "2018-08-10T18:10:05Z",
  "ProcessId": 20299,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 21:10:05.268 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15339246051460.0939426084563948",
  "Scope": "openid profile email"
}
2018-08-10 21:10:06.943 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-10 21:10:06.944 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 21:10:06.945 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-10 21:10:06.946 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-10 21:10:06.951 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-10 21:10:06.951 +03:00 [DBG] Start key discovery request
2018-08-10 21:10:06.994 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 21:10:06.994 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 21:10:07.004 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 21:10:07.006 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 21:10:07.006 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-10 21:10:07.007 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-10 21:10:07.009 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-10 21:10:07.012 +03:00 [DBG] Start userinfo request
2018-08-10 21:10:07.013 +03:00 [DBG] Bearer token found in header
2018-08-10 21:10:07.016 +03:00 [DBG] ZIpiMQ1IG3NLGT3McXbA8V7WVHVVmuZ6mrysC/VSt1U= found in database: true
2018-08-10 21:10:07.041 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-10 21:10:07.045 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "100cd3135d9186b3983d14cf709169d207ce3233c2f0bcd03db1ce377d96164f",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1533924605,
    "exp": 1533928205,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
    "auth_time": 1533774566,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-10 21:10:07.049 +03:00 [DBG] Creating userinfo response
2018-08-10 21:10:07.053 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 21:10:07.055 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 21:10:07.056 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-10 21:10:07.057 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 21:10:07.064 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-10 21:10:07.064 +03:00 [DBG] End userinfo request
2018-08-10 21:15:05.182 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 21:15:05.183 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 21:15:05.183 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 21:15:05.183 +03:00 [DBG] Start authorize request
2018-08-10 21:15:05.183 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:15:05.183 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 21:15:05.184 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 21:15:05.184 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339249051460.41319401358696406",
  "Nonce": "N0.478487031430476331533924905146",
  "PromptMode": "none",
  "SessionId": "02c729c7979215e94e72dd555627fcfb",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.478487031430476331533924905146",
    "state": "15339249051460.41319401358696406",
    "prompt": "none"
  }
}
2018-08-10 21:15:05.193 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= found in database: true
2018-08-10 21:15:05.200 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 21:15:05.202 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 21:15:05.203 +03:00 [DBG] Getting claims for access token for client: IoClient
2018-08-10 21:15:05.204 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 21:15:05.229 +03:00 [DBG] /wQ/5sOLLMns6IBJ41y+MwTRxyLsHZpHv60SWty+C7s= not found in database
2018-08-10 21:15:05.254 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IoClient
2018-08-10 21:15:05.254 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 21:15:05.259 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****qsIQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3969"
    }
  ],
  "ActivityId": "0HLFUTFG051NR:00000001",
  "TimeStamp": "2018-08-10T18:15:05Z",
  "ProcessId": 20299,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 21:15:05.259 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "State": "15339249051460.41319401358696406",
  "Scope": "openid profile email"
}
2018-08-10 21:53:57.089 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-10 21:53:57.119 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-10 21:53:57.119 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-10 21:53:57.119 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-10 21:53:57.119 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-10 21:53:57.240 +03:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use. ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use ---> System.Net.Sockets.SocketException: Address already in use
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-08-10 21:53:57.271 +03:00 [FTL] An error occurred stopping the application
System.AggregateException: One or more errors occurred. (Not started. Call Start first.) ---> System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/TokenCleanup.cs:line 57
   at Microsoft.Extensions.DependencyInjection.IdentityServerEntityFrameworkBuilderExtensions.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Extensions/IdentityServerEntityFrameworkBuilderExtensions.cs:line 167
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.StopAsync(CancellationToken token)
---> (Inner Exception #0) System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/TokenCleanup.cs:line 57
   at Microsoft.Extensions.DependencyInjection.IdentityServerEntityFrameworkBuilderExtensions.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Extensions/IdentityServerEntityFrameworkBuilderExtensions.cs:line 167
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)<---

2018-08-10 21:55:45.652 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-10 21:55:45.682 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-10 21:55:45.682 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-10 21:55:45.682 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-10 21:55:45.682 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-10 21:55:45.816 +03:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use. ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use ---> System.Net.Sockets.SocketException: Address already in use
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-08-10 21:55:45.851 +03:00 [FTL] An error occurred stopping the application
System.AggregateException: One or more errors occurred. (Not started. Call Start first.) ---> System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/TokenCleanup.cs:line 57
   at Microsoft.Extensions.DependencyInjection.IdentityServerEntityFrameworkBuilderExtensions.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Extensions/IdentityServerEntityFrameworkBuilderExtensions.cs:line 167
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.StopAsync(CancellationToken token)
---> (Inner Exception #0) System.InvalidOperationException: Not started. Call Start first.
   at IdentityServer4.EntityFramework.TokenCleanup.Stop() in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/TokenCleanup.cs:line 57
   at Microsoft.Extensions.DependencyInjection.IdentityServerEntityFrameworkBuilderExtensions.TokenCleanupHost.StopAsync(CancellationToken cancellationToken) in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Extensions/IdentityServerEntityFrameworkBuilderExtensions.cs:line 167
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.<>c__DisplayClass4_0.<StopAsync>b__0(IHostedService service)
   at Microsoft.AspNetCore.Hosting.Internal.HostedServiceExecutor.ExecuteAsync(Func`2 callback)<---

2018-08-10 21:57:01.643 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-10 21:57:01.765 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-10 21:57:01.766 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-10 21:57:01.766 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-10 21:57:01.766 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-10 21:57:02.108 +03:00 [DBG] Starting token cleanup
2018-08-10 21:57:16.720 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 21:57:16.746 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 21:57:16.760 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 21:57:16.764 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 21:57:16.765 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 21:57:16.768 +03:00 [DBG] Rendering check session result
2018-08-10 21:58:13.815 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-10 21:58:13.865 +03:00 [DBG] Stopping token cleanup
2018-08-10 21:58:25.445 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-10 21:58:25.477 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-10 21:58:25.477 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-10 21:58:25.477 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-10 21:58:25.477 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-10 21:58:25.581 +03:00 [DBG] Starting token cleanup
2018-08-10 21:58:45.549 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 21:58:45.571 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 21:58:45.583 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 21:58:45.586 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 21:58:45.587 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 21:58:45.589 +03:00 [DBG] Rendering check session result
2018-08-10 22:11:56.707 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:11:56.707 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:11:56.708 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 22:11:56.758 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 22:11:56.758 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 22:11:56.764 +03:00 [DBG] Start authorize request
2018-08-10 22:11:56.771 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:11:56.782 +03:00 [DBG] No user present in authorize request
2018-08-10 22:11:56.793 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 22:11:57.178 +03:00 [DBG] IoClient found in database: true
2018-08-10 22:11:57.282 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-10 22:11:57.406 +03:00 [DBG] Found [] API scopes in database
2018-08-10 22:11:57.438 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 22:11:57.466 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339249051460.41319401358696406",
  "Nonce": "N0.72626296350157291533928316671",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.72626296350157291533928316671",
    "state": "15339249051460.41319401358696406"
  }
}
2018-08-10 22:11:57.482 +03:00 [INF] Showing login: User is not authenticated
2018-08-10 22:11:57.498 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:11:57.498 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:11:57.800 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:11:57.800 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 22:11:57.801 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 22:16:40.229 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:40.229 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:40.229 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 22:16:40.230 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 22:16:40.230 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 22:16:40.230 +03:00 [DBG] Rendering check session result
2018-08-10 22:16:44.242 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.242 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.242 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 22:16:44.244 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 22:16:44.244 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 22:16:44.249 +03:00 [DBG] Start authorize request
2018-08-10 22:16:44.249 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.249 +03:00 [DBG] No user present in authorize request
2018-08-10 22:16:44.250 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 22:16:44.250 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 22:16:44.251 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339249051460.41319401358696406",
  "Nonce": "N0.62472715091628351533928604212",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.62472715091628351533928604212",
    "state": "15339249051460.41319401358696406"
  }
}
2018-08-10 22:16:44.251 +03:00 [INF] Showing login: User is not authenticated
2018-08-10 22:16:44.257 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.257 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.261 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.265 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 22:16:44.267 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 22:16:44.313 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.313 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.326 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.326 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.334 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.336 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.632 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.633 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.639 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:44.639 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:49.203 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:49.203 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:49.822 +03:00 [DBG] Augmenting SignInContext
2018-08-10 22:16:49.825 +03:00 [DBG] Adding idp claim with value: local
2018-08-10 22:16:49.826 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-10 22:16:49.827 +03:00 [DBG] Adding auth_time claim with value: 1533928609
2018-08-10 22:16:49.833 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-08-10 22:16:49.841 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-10 22:16:49.844 +03:00 [INF] User with username = okanaslankan@hotmail.com logged in. 
2018-08-10 22:16:49.874 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-10 22:16:49.876 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-10 22:16:49.876 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-10 22:16:49.884 +03:00 [DBG] Start authorize callback request
2018-08-10 22:16:49.889 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 22:16:49.889 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 22:16:49.889 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 22:16:49.890 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339249051460.41319401358696406",
  "Nonce": "N0.62472715091628351533928604212",
  "SessionId": "7a1efcde5d44c7397b1f04daf2e8d3d5",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.62472715091628351533928604212",
    "state": "15339249051460.41319401358696406"
  }
}
2018-08-10 22:16:49.979 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= found in database: true
2018-08-10 22:16:49.987 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 22:16:49.997 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 22:16:50.011 +03:00 [DBG] Getting claims for access token for client: IoClient
2018-08-10 22:16:50.011 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 22:16:50.067 +03:00 [DBG] zCSMPQN9pK1RS89cIaJWeEJPOrM9/Gn9h7IpDHvk6Xg= not found in database
2018-08-10 22:16:50.141 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IoClient
2018-08-10 22:16:50.141 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 22:16:50.209 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****UKbQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7fff"
    }
  ],
  "ActivityId": "0HLFUUD5Q0T2P:0000000A",
  "TimeStamp": "2018-08-10T19:16:50Z",
  "ProcessId": 30812,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 22:16:50.217 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15339249051460.41319401358696406",
  "Scope": "openid profile email"
}
2018-08-10 22:16:50.243 +03:00 [DBG] Augmenting SignInContext
2018-08-10 22:16:50.244 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-10 22:16:51.813 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-10 22:16:51.852 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-10 22:16:51.853 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 22:16:51.855 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-10 22:16:51.858 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-10 22:16:51.858 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-10 22:16:51.866 +03:00 [DBG] Start key discovery request
2018-08-10 22:16:51.940 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 22:16:51.940 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 22:16:51.947 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 22:16:51.948 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 22:16:51.948 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-10 22:16:51.954 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-10 22:16:51.954 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-10 22:16:51.967 +03:00 [DBG] Start userinfo request
2018-08-10 22:16:51.976 +03:00 [DBG] Bearer token found in header
2018-08-10 22:16:52.011 +03:00 [DBG] zCSMPQN9pK1RS89cIaJWeEJPOrM9/Gn9h7IpDHvk6Xg= found in database: true
2018-08-10 22:16:52.046 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-10 22:16:52.058 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "592ae735f5c86ceac930d37a6f23b4b2abad3bbebed6aea38bd59545cb247fff",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1533928610,
    "exp": 1533932210,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
    "auth_time": 1533928609,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-10 22:16:52.073 +03:00 [DBG] Creating userinfo response
2018-08-10 22:16:52.078 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 22:16:52.084 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 22:16:52.088 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-10 22:16:52.088 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 22:16:52.098 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-10 22:16:52.099 +03:00 [DBG] End userinfo request
2018-08-10 22:17:09.143 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 22:17:09.144 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 22:17:09.145 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 22:17:09.145 +03:00 [DBG] Start authorize request
2018-08-10 22:17:09.145 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 22:17:09.145 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 22:17:09.145 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 22:17:09.149 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339286291110.05807933989882752",
  "Nonce": "N0.93949431132488171533928629111",
  "SessionId": "7a1efcde5d44c7397b1f04daf2e8d3d5",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.93949431132488171533928629111",
    "state": "15339286291110.05807933989882752"
  }
}
2018-08-10 22:17:09.155 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= found in database: true
2018-08-10 22:17:09.161 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 22:17:09.161 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 22:17:09.162 +03:00 [DBG] Getting claims for access token for client: IoClient
2018-08-10 22:17:09.162 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 22:17:09.192 +03:00 [DBG] DbYhZYyN/2k7dnWk3V2tgHVyQ3wz4VXUensfJvHjO/4= not found in database
2018-08-10 22:17:09.237 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IoClient
2018-08-10 22:17:09.239 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 22:17:09.244 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1Duw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****43bf"
    }
  ],
  "ActivityId": "0HLFUUD5Q0T2P:0000000B",
  "TimeStamp": "2018-08-10T19:17:09Z",
  "ProcessId": 30812,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 22:17:09.244 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "State": "15339286291110.05807933989882752",
  "Scope": "openid profile email"
}
2018-08-10 22:17:10.854 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-10 22:17:10.855 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 22:17:10.855 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-10 22:17:10.856 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-10 22:17:10.862 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-10 22:17:10.862 +03:00 [DBG] Start key discovery request
2018-08-10 22:17:10.932 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 22:17:10.933 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 22:17:10.938 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-10 22:17:10.938 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-10 22:17:10.939 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-10 22:17:10.939 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-10 22:17:10.939 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-10 22:17:10.939 +03:00 [DBG] Start userinfo request
2018-08-10 22:17:10.940 +03:00 [DBG] Bearer token found in header
2018-08-10 22:17:10.953 +03:00 [DBG] DbYhZYyN/2k7dnWk3V2tgHVyQ3wz4VXUensfJvHjO/4= found in database: true
2018-08-10 22:17:10.993 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-10 22:17:10.993 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "3dddba3ec7080389bb82d0366e47d3f644a1d8585f05b2fe58a12c94bb3443bf",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1533928629,
    "exp": 1533932229,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
    "auth_time": 1533928609,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-10 22:17:10.994 +03:00 [DBG] Creating userinfo response
2018-08-10 22:17:10.994 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 22:17:10.994 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 22:17:10.994 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-10 22:17:10.994 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-10 22:17:11.000 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-10 22:17:11.000 +03:00 [DBG] End userinfo request
2018-08-10 22:18:33.895 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-10 22:18:33.896 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-10 22:18:33.896 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-10 22:18:33.896 +03:00 [DBG] Rendering check session result
2018-08-10 22:22:10.541 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-10 22:22:10.542 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-10 22:22:10.543 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-10 22:22:10.546 +03:00 [DBG] Start authorize request
2018-08-10 22:22:10.547 +03:00 [DBG] User in authorize request: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 22:22:10.547 +03:00 [DBG] Start authorize request protocol validation
2018-08-10 22:22:10.548 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-10 22:22:10.548 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/login-callback.html",
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15339289305190.012578409469509166",
  "Nonce": "N0.482993173938731871533928930519",
  "PromptMode": "none",
  "SessionId": "7a1efcde5d44c7397b1f04daf2e8d3d5",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.482993173938731871533928930519",
    "state": "15339289305190.012578409469509166",
    "prompt": "none"
  }
}
2018-08-10 22:22:10.553 +03:00 [DBG] MjI3qE8pBKnFFMlwKB3VdTRNHUxzy17XK31wg0Rh8Cs= found in database: true
2018-08-10 22:22:10.557 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-10 22:22:10.558 +03:00 [DBG] Creating Implicit Flow response.
2018-08-10 22:22:10.558 +03:00 [DBG] Getting claims for access token for client: IoClient
2018-08-10 22:22:10.558 +03:00 [DBG] Getting claims for access token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1
2018-08-10 22:22:10.573 +03:00 [DBG] nEccyu4eE0adiAbjzvOD54lg69dGVbMN9SJ+y0r0LHU= not found in database
2018-08-10 22:22:10.605 +03:00 [DBG] Getting claims for identity token for subject: d1862db5-db7d-4edc-89ed-4b486588a3c1 and client: IoClient
2018-08-10 22:22:10.605 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-10 22:22:10.611 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OyNQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****a557"
    }
  ],
  "ActivityId": "0HLFUUD5Q0T38:00000001",
  "TimeStamp": "2018-08-10T19:22:10Z",
  "ProcessId": 30812,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-10 22:22:10.612 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d1862db5-db7d-4edc-89ed-4b486588a3c1",
  "ClientId": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "State": "15339289305190.012578409469509166",
  "Scope": "openid profile email"
}
2018-08-10 22:58:25.638 +03:00 [INF] Clearing 20 tokens
2018-08-19 15:38:06.403 +03:00 [ERR] An error occurred using the connection to database 'microstarter.identity_config' on server 'tcp://postgre_name:5432'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-08-19 15:38:06.550 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-08-19 15:38:06.557 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2018-08-19 15:39:21.073 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-19 15:39:21.104 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-19 15:39:21.105 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-19 15:39:21.105 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-19 15:39:21.105 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-19 15:39:21.250 +03:00 [DBG] Starting token cleanup
2018-08-19 15:39:23.485 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-19 15:39:23.514 +03:00 [DBG] Stopping token cleanup
2018-08-19 15:39:31.605 +03:00 [ERR] An error occurred using the connection to database 'microstarter.identity_config' on server 'tcp://localhost:5432'.
Npgsql.PostgresException (0x80004005): 3D000: database "microstarter.identity_config" does not exist
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1003
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 425
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-08-19 15:39:31.667 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Npgsql.PostgresException (0x80004005): 3D000: database "microstarter.identity_config" does not exist
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1003
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 425
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
Npgsql.PostgresException (0x80004005): 3D000: database "microstarter.identity_config" does not exist
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1003
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 425
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-08-19 15:39:31.673 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Npgsql.PostgresException (0x80004005): 3D000: database "microstarter.identity_config" does not exist
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1003
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 425
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
Npgsql.PostgresException (0x80004005): 3D000: database "microstarter.identity_config" does not exist
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1003
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.<>c__DisplayClass161_0.<<ReadMessage>g__ReadMessageLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 1032
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 425
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2018-08-19 15:42:06.127 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-19 15:42:06.161 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-19 15:42:06.161 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-19 15:42:06.161 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-19 15:42:06.161 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-19 15:42:06.294 +03:00 [DBG] Starting token cleanup
2018-08-19 15:42:17.440 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:42:17.456 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:42:17.540 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 15:42:17.543 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 15:42:17.544 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 15:42:17.546 +03:00 [DBG] Rendering check session result
2018-08-19 15:42:22.450 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:42:22.450 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:42:22.458 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 15:42:22.518 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 15:42:22.518 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 15:42:22.528 +03:00 [DBG] Start authorize request
2018-08-19 15:42:22.551 +03:00 [DBG] No user present in authorize request
2018-08-19 15:42:22.562 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:42:22.857 +03:00 [DBG] IoClient found in database: false
2018-08-19 15:42:22.889 +03:00 [ERR] Unknown client or not enabled: IoClient
{
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.068004906443606241534682542428",
    "state": "15346825424280.5784118505457473"
  }
}
2018-08-19 15:42:22.894 +03:00 [ERR] Request validation failed
2018-08-19 15:42:22.894 +03:00 [INF] {
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "IoClient",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.068004906443606241534682542428",
    "state": "15346825424280.5784118505457473"
  }
}
2018-08-19 15:42:22.925 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IoClient",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ActivityId": "0HLG5Q4P7FT5H:00000002",
  "TimeStamp": "2018-08-19T12:42:22Z",
  "ProcessId": 16115,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 15:42:22.967 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:42:22.968 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:42:23.474 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:42:23.474 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:42:23.489 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:42:23.489 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:42:23.493 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:42:23.493 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:42:23.510 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:42:23.513 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:42:23.535 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:42:23.535 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:43:31.937 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:43:31.937 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:43:31.938 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 15:43:31.938 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 15:43:31.938 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 15:43:31.938 +03:00 [DBG] Rendering check session result
2018-08-19 15:43:44.491 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:43:44.491 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:43:44.492 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 15:43:44.498 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 15:43:44.499 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 15:43:44.499 +03:00 [DBG] Start authorize request
2018-08-19 15:43:44.499 +03:00 [DBG] No user present in authorize request
2018-08-19 15:43:44.499 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:43:44.687 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 15:43:44.779 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-19 15:43:44.934 +03:00 [DBG] Found [] API scopes in database
2018-08-19 15:43:44.956 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 15:43:44.959 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346826244660.6322552848823946",
  "Nonce": "N0.9524745121415531534682624466",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.9524745121415531534682624466",
    "state": "15346826244660.6322552848823946"
  }
}
2018-08-19 15:43:44.971 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 15:43:44.985 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:43:44.985 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:43:45.026 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:43:45.027 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 15:45:06.178 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:06.178 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:06.179 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 15:45:06.180 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 15:45:06.180 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 15:45:06.180 +03:00 [DBG] Start authorize request
2018-08-19 15:45:06.180 +03:00 [DBG] No user present in authorize request
2018-08-19 15:45:06.180 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:45:06.181 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 15:45:06.181 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346826244660.6322552848823946",
  "Nonce": "N0.59276372202354421534682706149",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.59276372202354421534682706149",
    "state": "15346826244660.6322552848823946"
  }
}
2018-08-19 15:45:06.182 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 15:45:06.273 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:06.273 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:06.275 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:45:06.276 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 15:45:06.355 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:06.355 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:06.361 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:06.361 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:06.365 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:06.365 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:06.767 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:06.768 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:06.887 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:06.887 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:17.990 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:17.990 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:18.145 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:18.146 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:18.212 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:18.212 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:18.324 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:18.325 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:30.559 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:30.560 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:31.202 +03:00 [DBG] Augmenting SignInContext
2018-08-19 15:45:31.207 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 15:45:31.207 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 15:45:31.207 +03:00 [DBG] Adding auth_time claim with value: 1534682731
2018-08-19 15:45:31.219 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 15:45:31.220 +03:00 [INF] User created a new account with password.
2018-08-19 15:45:31.242 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:31.243 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:31.252 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 15:45:31.254 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 15:45:31.254 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 15:45:31.263 +03:00 [DBG] Start authorize callback request
2018-08-19 15:45:31.269 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 15:45:31.269 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:45:31.270 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 15:45:31.272 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346826244660.6322552848823946",
  "Nonce": "N0.59276372202354421534682706149",
  "SessionId": "eedc6841f7c282db953189dacea998df",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.59276372202354421534682706149",
    "state": "15346826244660.6322552848823946"
  }
}
2018-08-19 15:45:31.373 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 15:45:31.374 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 15:45:31.374 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 15:45:31.375 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 15:45:31.392 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:31.392 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:31.413 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:45:31.414 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 15:45:31.613 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:31.614 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:33.852 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:33.852 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:33.885 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:45:33.885 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 15:45:33.915 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:33.915 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:33.916 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 15:45:33.917 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 15:45:33.917 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 15:45:33.917 +03:00 [DBG] Start authorize callback request
2018-08-19 15:45:33.927 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 15:45:33.928 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:45:33.928 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 15:45:33.928 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346826244660.6322552848823946",
  "Nonce": "N0.59276372202354421534682706149",
  "SessionId": "eedc6841f7c282db953189dacea998df",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.59276372202354421534682706149",
    "state": "15346826244660.6322552848823946"
  }
}
2018-08-19 15:45:33.935 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 15:45:33.936 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 15:45:33.936 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 15:45:33.951 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 15:45:33.958 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 15:45:33.965 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 15:45:33.988 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 15:45:34.079 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 15:45:34.101 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 15:45:34.101 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 15:45:34.148 +03:00 [DBG] XBq1/UZt/kYf4zEmgwUJuNXRQ8ij1jYxSoTv5NWXJ3Q= not found in database
2018-08-19 15:45:34.175 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 15:45:34.175 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 15:45:34.262 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****3HvA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0db7"
    }
  ],
  "ActivityId": "0HLG5Q4P7FT5J:00000014",
  "TimeStamp": "2018-08-19T12:45:34Z",
  "ProcessId": 16115,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 15:45:34.270 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346826244660.6322552848823946",
  "Scope": "openid profile email"
}
2018-08-19 15:45:34.295 +03:00 [DBG] Augmenting SignInContext
2018-08-19 15:45:34.297 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 15:45:37.735 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:37.735 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:37.749 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 15:45:37.792 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-19 15:45:37.792 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 15:45:37.795 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 15:45:37.800 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 15:45:37.801 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 15:45:37.809 +03:00 [DBG] Start key discovery request
2018-08-19 15:45:37.934 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:37.934 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:37.934 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 15:45:37.935 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 15:45:37.944 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:37.944 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:37.945 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 15:45:37.945 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 15:45:37.945 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 15:45:37.952 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 15:45:37.952 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 15:45:37.968 +03:00 [DBG] Start userinfo request
2018-08-19 15:45:37.977 +03:00 [DBG] Bearer token found in header
2018-08-19 15:45:38.026 +03:00 [DBG] XBq1/UZt/kYf4zEmgwUJuNXRQ8ij1jYxSoTv5NWXJ3Q= found in database: true
2018-08-19 15:45:38.069 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 15:45:38.083 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "702e6e772799468b717b3e6adbfcaf8a14c7a0890d0a8bea07e753af3b930db7",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534682734,
    "exp": 1534686334,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534682731,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 15:45:38.105 +03:00 [DBG] Creating userinfo response
2018-08-19 15:45:38.113 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 15:45:38.119 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 15:45:38.125 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 15:45:38.125 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 15:45:38.134 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 15:45:38.134 +03:00 [DBG] End userinfo request
2018-08-19 15:45:41.591 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:41.592 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:41.593 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 15:45:41.600 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 15:45:41.601 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 15:45:41.617 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 15:45:41.629 +03:00 [DBG] Start end session request validation
2018-08-19 15:45:41.643 +03:00 [DBG] Start identity token validation
2018-08-19 15:45:41.653 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 15:45:41.669 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 15:45:41.670 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534682734,
    "exp": 1534683034,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.59276372202354421534682706149",
    "iat": 1534682734,
    "at_hash": "Uv4GiEM69ui1zixisq5q_Q",
    "sid": "eedc6841f7c282db953189dacea998df",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534682731,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 15:45:41.681 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODI3MzQsImV4cCI6MTUzNDY4MzAzNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjU5Mjc2MzcyMjAyMzU0NDIxNTM0NjgyNzA2MTQ5IiwiaWF0IjoxNTM0NjgyNzM0LCJhdF9oYXNoIjoiVXY0R2lFTTY5dWkxeml4aXNxNXFfUSIsInNpZCI6ImVlZGM2ODQxZjdjMjgyZGI5NTMxODlkYWNlYTk5OGRmIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0NjgyNzMxLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.iQ8dTL5UyOq3m89q20ANBaS8XFwr9AfkW78MOBNf7RK4rCwuREESIhQxSTtUKD8uLWaMbMvfTKSVgqJInOuFbdm96lgiKap4tR0ZJIYf0FK8VBsXG3qDTrKspfDhdXG3jZsq0B1VGGze4qsYnxb-VME-obPg3E17zh87nTIseCJJrrIcA-6HOSZL9vIXDGn6fjNoI1qK6qSoH9wwNA5burob6HKA7EyYMKWW935BWQ7RaYpvU7Hd9jZ8iiZSMfRngw15UGmLsduKXzhrrjFm6sFdICXNqm5RIpWo7XfRqFs49jZ2fsv3kMl_vgP3g3OUzcAbpNELtEmHxFLKUN3HvA",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 15:45:41.681 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 15:45:41.717 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:41.719 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:41.769 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 15:45:41.769 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 15:45:41.770 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 15:45:41.782 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 15:45:41.893 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:41.894 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:41.894 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 15:45:41.901 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 15:45:41.901 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 15:45:41.914 +03:00 [DBG] Processing signout callback request
2018-08-19 15:45:41.939 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 15:45:41.939 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 15:45:41.939 +03:00 [INF] Successful signout callback.
2018-08-19 15:45:41.940 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 15:45:41.940 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 15:45:48.572 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:48.574 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:48.575 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 15:45:48.576 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 15:45:48.583 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 15:45:48.583 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 15:45:48.583 +03:00 [DBG] Start end session request validation
2018-08-19 15:45:48.583 +03:00 [DBG] Start identity token validation
2018-08-19 15:45:48.583 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 15:45:48.587 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 15:45:48.587 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534682734,
    "exp": 1534683034,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.59276372202354421534682706149",
    "iat": 1534682734,
    "at_hash": "Uv4GiEM69ui1zixisq5q_Q",
    "sid": "eedc6841f7c282db953189dacea998df",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534682731,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 15:45:48.592 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODI3MzQsImV4cCI6MTUzNDY4MzAzNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjU5Mjc2MzcyMjAyMzU0NDIxNTM0NjgyNzA2MTQ5IiwiaWF0IjoxNTM0NjgyNzM0LCJhdF9oYXNoIjoiVXY0R2lFTTY5dWkxeml4aXNxNXFfUSIsInNpZCI6ImVlZGM2ODQxZjdjMjgyZGI5NTMxODlkYWNlYTk5OGRmIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0NjgyNzMxLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.iQ8dTL5UyOq3m89q20ANBaS8XFwr9AfkW78MOBNf7RK4rCwuREESIhQxSTtUKD8uLWaMbMvfTKSVgqJInOuFbdm96lgiKap4tR0ZJIYf0FK8VBsXG3qDTrKspfDhdXG3jZsq0B1VGGze4qsYnxb-VME-obPg3E17zh87nTIseCJJrrIcA-6HOSZL9vIXDGn6fjNoI1qK6qSoH9wwNA5burob6HKA7EyYMKWW935BWQ7RaYpvU7Hd9jZ8iiZSMfRngw15UGmLsduKXzhrrjFm6sFdICXNqm5RIpWo7XfRqFs49jZ2fsv3kMl_vgP3g3OUzcAbpNELtEmHxFLKUN3HvA",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 15:45:48.593 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 15:45:48.621 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:45:48.623 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:45:48.628 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 15:50:34.525 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 15:50:34.526 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 15:50:34.527 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 15:50:34.528 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 15:50:34.528 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 15:50:34.529 +03:00 [DBG] Start authorize request
2018-08-19 15:50:34.529 +03:00 [DBG] No user present in authorize request
2018-08-19 15:50:34.529 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 15:50:34.530 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 15:50:34.530 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346830345090.4650663231606239",
  "Nonce": "N0.380200473635200041534683034509",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.380200473635200041534683034509",
    "state": "15346830345090.4650663231606239",
    "prompt": "none"
  }
}
2018-08-19 15:50:34.531 +03:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2018-08-19 15:50:34.531 +03:00 [INF] {
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346830345090.4650663231606239",
  "Nonce": "N0.380200473635200041534683034509",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.380200473635200041534683034509",
    "state": "15346830345090.4650663231606239",
    "prompt": "none"
  }
}
2018-08-19 15:50:34.532 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Error": "login_required",
  "ActivityId": "0HLG5Q4P7FT5N:00000001",
  "TimeStamp": "2018-08-19T12:50:34Z",
  "ProcessId": 16115,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:03:01.601 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-19 16:03:01.638 +03:00 [DBG] Stopping token cleanup
2018-08-19 16:03:17.045 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-19 16:03:17.092 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-19 16:03:17.093 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-19 16:03:17.093 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-19 16:03:17.094 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-19 16:03:17.229 +03:00 [DBG] Starting token cleanup
2018-08-19 16:03:29.292 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:29.306 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:29.386 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:03:29.411 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:03:29.411 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:03:29.427 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:03:29.437 +03:00 [DBG] Start end session request validation
2018-08-19 16:03:29.449 +03:00 [DBG] Start identity token validation
2018-08-19 16:03:31.638 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 16:03:31.642 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:03:31.966 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:03:31.975 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534682734,
    "exp": 1534683034,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.59276372202354421534682706149",
    "iat": 1534682734,
    "at_hash": "Uv4GiEM69ui1zixisq5q_Q",
    "sid": "eedc6841f7c282db953189dacea998df",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534682731,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:03:31.986 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODI3MzQsImV4cCI6MTUzNDY4MzAzNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjU5Mjc2MzcyMjAyMzU0NDIxNTM0NjgyNzA2MTQ5IiwiaWF0IjoxNTM0NjgyNzM0LCJhdF9oYXNoIjoiVXY0R2lFTTY5dWkxeml4aXNxNXFfUSIsInNpZCI6ImVlZGM2ODQxZjdjMjgyZGI5NTMxODlkYWNlYTk5OGRmIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0NjgyNzMxLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.iQ8dTL5UyOq3m89q20ANBaS8XFwr9AfkW78MOBNf7RK4rCwuREESIhQxSTtUKD8uLWaMbMvfTKSVgqJInOuFbdm96lgiKap4tR0ZJIYf0FK8VBsXG3qDTrKspfDhdXG3jZsq0B1VGGze4qsYnxb-VME-obPg3E17zh87nTIseCJJrrIcA-6HOSZL9vIXDGn6fjNoI1qK6qSoH9wwNA5burob6HKA7EyYMKWW935BWQ7RaYpvU7Hd9jZ8iiZSMfRngw15UGmLsduKXzhrrjFm6sFdICXNqm5RIpWo7XfRqFs49jZ2fsv3kMl_vgP3g3OUzcAbpNELtEmHxFLKUN3HvA",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:03:31.988 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:03:35.027 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:35.032 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:35.034 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:03:35.048 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:03:35.048 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:03:35.063 +03:00 [DBG] Rendering check session result
2018-08-19 16:03:47.536 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:47.537 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:47.537 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:03:47.551 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:03:47.555 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:03:47.562 +03:00 [DBG] Start authorize request
2018-08-19 16:03:47.575 +03:00 [DBG] No user present in authorize request
2018-08-19 16:03:47.586 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:03:47.763 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-19 16:03:47.900 +03:00 [DBG] Found [] API scopes in database
2018-08-19 16:03:47.925 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:03:47.938 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346830345090.4650663231606239",
  "Nonce": "N0.334023017983699161534683827510",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.334023017983699161534683827510",
    "state": "15346830345090.4650663231606239"
  }
}
2018-08-19 16:03:47.949 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:03:47.966 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:47.966 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:48.178 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:03:48.179 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:03:48.457 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:48.458 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:48.476 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:48.477 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:48.498 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:48.498 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:48.791 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:48.792 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:48.810 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:48.810 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:49.954 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:49.956 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:50.261 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:03:50.265 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:03:50.266 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:03:50.266 +03:00 [DBG] Adding auth_time claim with value: 1534683830
2018-08-19 16:03:50.279 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:03:50.283 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:03:50.307 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:50.307 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:50.316 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:03:50.317 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:03:50.318 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:03:50.328 +03:00 [DBG] Start authorize callback request
2018-08-19 16:03:50.334 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:03:50.334 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:03:50.335 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:03:50.335 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346830345090.4650663231606239",
  "Nonce": "N0.334023017983699161534683827510",
  "SessionId": "c8d9554199775b447ead09f48aadb4ce",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.334023017983699161534683827510",
    "state": "15346830345090.4650663231606239"
  }
}
2018-08-19 16:03:50.405 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:03:50.406 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:03:50.406 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:03:50.406 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:03:50.415 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:50.416 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:50.437 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:03:50.440 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:03:51.971 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:51.971 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:52.001 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:03:52.001 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:03:52.035 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:52.036 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:52.037 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:03:52.037 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:03:52.037 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:03:52.038 +03:00 [DBG] Start authorize callback request
2018-08-19 16:03:52.051 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:03:52.052 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:03:52.052 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:03:52.052 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346830345090.4650663231606239",
  "Nonce": "N0.334023017983699161534683827510",
  "SessionId": "c8d9554199775b447ead09f48aadb4ce",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.334023017983699161534683827510",
    "state": "15346830345090.4650663231606239"
  }
}
2018-08-19 16:03:52.059 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:03:52.060 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:03:52.062 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:03:52.071 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:03:52.073 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:03:52.081 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:03:52.118 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:03:52.386 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:03:52.402 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:03:52.402 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:03:52.454 +03:00 [DBG] r/WSPQ3vcvf/XcS9KK3d4jozuA3ha0zNpn0wM76XBSk= not found in database
2018-08-19 16:03:52.481 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:03:52.482 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:03:52.552 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****MQqQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****aacc"
    }
  ],
  "ActivityId": "0HLG5QGK9BICC:0000000C",
  "TimeStamp": "2018-08-19T13:03:52Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:03:52.558 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346830345090.4650663231606239",
  "Scope": "openid profile email"
}
2018-08-19 16:03:52.592 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:03:52.593 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:03:55.792 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:55.792 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:55.805 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:03:55.852 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-19 16:03:55.855 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:03:55.859 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:03:55.863 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:03:55.864 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:03:55.871 +03:00 [DBG] Start key discovery request
2018-08-19 16:03:56.055 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:56.055 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:56.055 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:03:56.056 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:03:56.066 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:03:56.067 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:03:56.067 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:03:56.068 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:03:56.069 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:03:56.072 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:03:56.072 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:03:56.091 +03:00 [DBG] Start userinfo request
2018-08-19 16:03:56.099 +03:00 [DBG] Bearer token found in header
2018-08-19 16:03:56.140 +03:00 [DBG] r/WSPQ3vcvf/XcS9KK3d4jozuA3ha0zNpn0wM76XBSk= found in database: true
2018-08-19 16:03:56.163 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:03:56.168 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1782462e8d82b6c41b444a429a3740e5a2a4998fc2b628c3c1d7a7e15ea9aacc",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534683832,
    "exp": 1534687432,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534683830,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:03:56.185 +03:00 [DBG] Creating userinfo response
2018-08-19 16:03:56.191 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:03:56.195 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:03:56.200 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:03:56.200 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:03:56.207 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:03:56.207 +03:00 [DBG] End userinfo request
2018-08-19 16:04:05.460 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:04:05.460 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:04:05.461 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:04:05.462 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:04:05.467 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:04:05.467 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:04:05.467 +03:00 [DBG] Start end session request validation
2018-08-19 16:04:05.468 +03:00 [DBG] Start identity token validation
2018-08-19 16:04:05.468 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:04:05.476 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:04:05.476 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534683832,
    "exp": 1534684132,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.334023017983699161534683827510",
    "iat": 1534683832,
    "at_hash": "I7qqt2bzjpLv6uZJ8Z0ywA",
    "sid": "c8d9554199775b447ead09f48aadb4ce",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534683830,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:04:05.481 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODM4MzIsImV4cCI6MTUzNDY4NDEzMiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjMzNDAyMzAxNzk4MzY5OTE2MTUzNDY4MzgyNzUxMCIsImlhdCI6MTUzNDY4MzgzMiwiYXRfaGFzaCI6Ikk3cXF0MmJ6anBMdjZ1Wko4WjB5d0EiLCJzaWQiOiJjOGQ5NTU0MTk5Nzc1YjQ0N2VhZDA5ZjQ4YWFkYjRjZSIsInN1YiI6IjU3MzFmYzViLTllMWUtNDkyMi05MDA4LTYyMjY5OGZjZTBmYiIsImF1dGhfdGltZSI6MTUzNDY4MzgzMCwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.NWQh4CjLqzZAuCEbxHipSLbIY0dTgf8ZX0sDMqdTgwBsOCEMCnqnuzT_otYoyY4x_wvhNBfwlS-PsfUX_ZK5NE-MEPHGuesGKOUXL2Eu4_U3joMeiEEWXI3gL26dJIKT3OOHb458MPcNHjcAV2-i1ZOTbSBS3vn4-yGPiLMWk17Dm1Mu5F1QritiXyTp4R6GGGtTiWbCsyAtlL5m0jIJhzDGQtu7ARwqb2owb7S9mzer1_jrAmilQnIfircFBDHeyAKz-KBMEPHdot2h-G6OdiJlnM2CEKfvrP7sw6Wvj8zFZqPIiQjhGUP967fty9NNMphKcy-lN0P3JNLBDvMQqQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:04:05.482 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:04:05.511 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:04:05.511 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:04:05.608 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 16:04:05.612 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 16:04:05.615 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 16:04:05.634 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 16:04:05.742 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:04:05.742 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:04:05.742 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 16:04:05.747 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 16:04:05.747 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 16:04:05.758 +03:00 [DBG] Processing signout callback request
2018-08-19 16:04:05.784 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 16:04:05.784 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 16:04:05.784 +03:00 [INF] Successful signout callback.
2018-08-19 16:04:05.784 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 16:04:05.784 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 16:06:53.893 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:06:53.893 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:06:53.893 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:06:53.894 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:06:53.895 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:06:53.895 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:06:53.895 +03:00 [DBG] Start end session request validation
2018-08-19 16:06:53.895 +03:00 [DBG] Start identity token validation
2018-08-19 16:06:53.896 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:06:53.907 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:06:53.907 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534683832,
    "exp": 1534684132,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.334023017983699161534683827510",
    "iat": 1534683832,
    "at_hash": "I7qqt2bzjpLv6uZJ8Z0ywA",
    "sid": "c8d9554199775b447ead09f48aadb4ce",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534683830,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:06:53.907 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODM4MzIsImV4cCI6MTUzNDY4NDEzMiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjMzNDAyMzAxNzk4MzY5OTE2MTUzNDY4MzgyNzUxMCIsImlhdCI6MTUzNDY4MzgzMiwiYXRfaGFzaCI6Ikk3cXF0MmJ6anBMdjZ1Wko4WjB5d0EiLCJzaWQiOiJjOGQ5NTU0MTk5Nzc1YjQ0N2VhZDA5ZjQ4YWFkYjRjZSIsInN1YiI6IjU3MzFmYzViLTllMWUtNDkyMi05MDA4LTYyMjY5OGZjZTBmYiIsImF1dGhfdGltZSI6MTUzNDY4MzgzMCwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.NWQh4CjLqzZAuCEbxHipSLbIY0dTgf8ZX0sDMqdTgwBsOCEMCnqnuzT_otYoyY4x_wvhNBfwlS-PsfUX_ZK5NE-MEPHGuesGKOUXL2Eu4_U3joMeiEEWXI3gL26dJIKT3OOHb458MPcNHjcAV2-i1ZOTbSBS3vn4-yGPiLMWk17Dm1Mu5F1QritiXyTp4R6GGGtTiWbCsyAtlL5m0jIJhzDGQtu7ARwqb2owb7S9mzer1_jrAmilQnIfircFBDHeyAKz-KBMEPHdot2h-G6OdiJlnM2CEKfvrP7sw6Wvj8zFZqPIiQjhGUP967fty9NNMphKcy-lN0P3JNLBDvMQqQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:06:53.908 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:06:53.927 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:06:53.928 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:06:53.933 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:07:57.198 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:07:57.199 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:07:57.201 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:07:57.201 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:07:57.204 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:07:57.205 +03:00 [DBG] Rendering check session result
2018-08-19 16:08:02.595 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:02.595 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:02.596 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:08:02.596 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:08:02.597 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:08:02.597 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:08:02.597 +03:00 [DBG] Start end session request validation
2018-08-19 16:08:02.597 +03:00 [DBG] Start identity token validation
2018-08-19 16:08:02.597 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:08:02.602 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:08:02.603 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534683832,
    "exp": 1534684132,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.334023017983699161534683827510",
    "iat": 1534683832,
    "at_hash": "I7qqt2bzjpLv6uZJ8Z0ywA",
    "sid": "c8d9554199775b447ead09f48aadb4ce",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534683830,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:08:02.603 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODM4MzIsImV4cCI6MTUzNDY4NDEzMiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjMzNDAyMzAxNzk4MzY5OTE2MTUzNDY4MzgyNzUxMCIsImlhdCI6MTUzNDY4MzgzMiwiYXRfaGFzaCI6Ikk3cXF0MmJ6anBMdjZ1Wko4WjB5d0EiLCJzaWQiOiJjOGQ5NTU0MTk5Nzc1YjQ0N2VhZDA5ZjQ4YWFkYjRjZSIsInN1YiI6IjU3MzFmYzViLTllMWUtNDkyMi05MDA4LTYyMjY5OGZjZTBmYiIsImF1dGhfdGltZSI6MTUzNDY4MzgzMCwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.NWQh4CjLqzZAuCEbxHipSLbIY0dTgf8ZX0sDMqdTgwBsOCEMCnqnuzT_otYoyY4x_wvhNBfwlS-PsfUX_ZK5NE-MEPHGuesGKOUXL2Eu4_U3joMeiEEWXI3gL26dJIKT3OOHb458MPcNHjcAV2-i1ZOTbSBS3vn4-yGPiLMWk17Dm1Mu5F1QritiXyTp4R6GGGtTiWbCsyAtlL5m0jIJhzDGQtu7ARwqb2owb7S9mzer1_jrAmilQnIfircFBDHeyAKz-KBMEPHdot2h-G6OdiJlnM2CEKfvrP7sw6Wvj8zFZqPIiQjhGUP967fty9NNMphKcy-lN0P3JNLBDvMQqQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:08:02.603 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:08:02.641 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:02.641 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:02.644 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:08:09.252 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:09.254 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:09.255 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:08:09.255 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:08:09.255 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:08:09.256 +03:00 [DBG] Rendering check session result
2018-08-19 16:08:13.531 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:13.531 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:13.531 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:08:13.532 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:08:13.532 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:08:13.532 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:08:13.532 +03:00 [DBG] Start end session request validation
2018-08-19 16:08:13.532 +03:00 [DBG] Start identity token validation
2018-08-19 16:08:13.532 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:08:13.536 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:08:13.538 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534683832,
    "exp": 1534684132,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.334023017983699161534683827510",
    "iat": 1534683832,
    "at_hash": "I7qqt2bzjpLv6uZJ8Z0ywA",
    "sid": "c8d9554199775b447ead09f48aadb4ce",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534683830,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:08:13.540 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODM4MzIsImV4cCI6MTUzNDY4NDEzMiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjMzNDAyMzAxNzk4MzY5OTE2MTUzNDY4MzgyNzUxMCIsImlhdCI6MTUzNDY4MzgzMiwiYXRfaGFzaCI6Ikk3cXF0MmJ6anBMdjZ1Wko4WjB5d0EiLCJzaWQiOiJjOGQ5NTU0MTk5Nzc1YjQ0N2VhZDA5ZjQ4YWFkYjRjZSIsInN1YiI6IjU3MzFmYzViLTllMWUtNDkyMi05MDA4LTYyMjY5OGZjZTBmYiIsImF1dGhfdGltZSI6MTUzNDY4MzgzMCwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.NWQh4CjLqzZAuCEbxHipSLbIY0dTgf8ZX0sDMqdTgwBsOCEMCnqnuzT_otYoyY4x_wvhNBfwlS-PsfUX_ZK5NE-MEPHGuesGKOUXL2Eu4_U3joMeiEEWXI3gL26dJIKT3OOHb458MPcNHjcAV2-i1ZOTbSBS3vn4-yGPiLMWk17Dm1Mu5F1QritiXyTp4R6GGGtTiWbCsyAtlL5m0jIJhzDGQtu7ARwqb2owb7S9mzer1_jrAmilQnIfircFBDHeyAKz-KBMEPHdot2h-G6OdiJlnM2CEKfvrP7sw6Wvj8zFZqPIiQjhGUP967fty9NNMphKcy-lN0P3JNLBDvMQqQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:08:13.540 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:08:13.584 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:13.585 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:13.588 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:08:46.039 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:46.040 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:46.040 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:08:46.040 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:08:46.040 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:08:46.041 +03:00 [DBG] Rendering check session result
2018-08-19 16:08:50.727 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:50.728 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:50.728 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:08:50.730 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:08:50.730 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:08:50.730 +03:00 [DBG] Start authorize request
2018-08-19 16:08:50.731 +03:00 [DBG] No user present in authorize request
2018-08-19 16:08:50.731 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:08:50.731 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:08:50.731 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346841307020.7458719323873085",
  "Nonce": "N0.21407370305196451534684130702",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.21407370305196451534684130702",
    "state": "15346841307020.7458719323873085"
  }
}
2018-08-19 16:08:50.731 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:08:50.766 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:50.766 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:50.767 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:08:50.768 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:08:50.832 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:50.833 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:50.856 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:50.861 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:50.864 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:50.865 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:50.963 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:50.963 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:51.025 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:51.026 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:52.774 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:52.782 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:52.805 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:08:52.805 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:08:52.805 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:08:52.806 +03:00 [DBG] Adding auth_time claim with value: 1534684132
2018-08-19 16:08:52.806 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:08:52.806 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:08:52.819 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:52.819 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:52.820 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:08:52.820 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:08:52.821 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:08:52.821 +03:00 [DBG] Start authorize callback request
2018-08-19 16:08:52.821 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:08:52.822 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:08:52.822 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:08:52.823 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346841307020.7458719323873085",
  "Nonce": "N0.21407370305196451534684130702",
  "SessionId": "a11e852c87f2c377f8610fbe4c1eb033",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.21407370305196451534684130702",
    "state": "15346841307020.7458719323873085"
  }
}
2018-08-19 16:08:52.827 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:08:52.828 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:08:52.828 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:08:52.828 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:08:52.844 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:52.844 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:52.846 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:08:52.847 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:08:54.420 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:54.420 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:54.422 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:08:54.423 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:08:54.445 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:54.445 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:54.446 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:08:54.446 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:08:54.446 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:08:54.446 +03:00 [DBG] Start authorize callback request
2018-08-19 16:08:54.447 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:08:54.447 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:08:54.448 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:08:54.449 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346841307020.7458719323873085",
  "Nonce": "N0.21407370305196451534684130702",
  "SessionId": "a11e852c87f2c377f8610fbe4c1eb033",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.21407370305196451534684130702",
    "state": "15346841307020.7458719323873085"
  }
}
2018-08-19 16:08:54.454 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:08:54.454 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:08:54.455 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:08:54.455 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:08:54.455 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:08:54.455 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:08:54.462 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:08:54.514 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:08:54.515 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:08:54.515 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:08:54.531 +03:00 [DBG] Jvo2CmgdkdY78+dDwu46e/2ygrwjNrmbnCPpINvz5YM= not found in database
2018-08-19 16:08:54.536 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:08:54.537 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:08:54.541 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****m6YQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****acec"
    }
  ],
  "ActivityId": "0HLG5QGK9BICF:00000014",
  "TimeStamp": "2018-08-19T13:08:54Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:08:54.541 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346841307020.7458719323873085",
  "Scope": "openid profile email"
}
2018-08-19 16:08:54.542 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:08:54.542 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:08:57.713 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:57.713 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:57.713 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:08:57.713 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:08:57.714 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:08:57.714 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:08:57.715 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:08:57.715 +03:00 [DBG] Start key discovery request
2018-08-19 16:08:58.214 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:58.215 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:58.216 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:08:58.217 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:08:58.231 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:08:58.231 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:08:58.231 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:08:58.231 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:08:58.231 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:08:58.232 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:08:58.232 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:08:58.232 +03:00 [DBG] Start userinfo request
2018-08-19 16:08:58.232 +03:00 [DBG] Bearer token found in header
2018-08-19 16:08:58.241 +03:00 [DBG] Jvo2CmgdkdY78+dDwu46e/2ygrwjNrmbnCPpINvz5YM= found in database: true
2018-08-19 16:08:58.279 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:08:58.280 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "f12d9eede0531131e077279bbc13b3aef23ae2c2554364ec2bc93e085dabacec",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534684134,
    "exp": 1534687734,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684132,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:08:58.281 +03:00 [DBG] Creating userinfo response
2018-08-19 16:08:58.283 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:08:58.283 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:08:58.283 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:08:58.284 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:08:58.290 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:08:58.290 +03:00 [DBG] End userinfo request
2018-08-19 16:09:04.530 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:09:04.530 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:09:04.531 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:09:04.540 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:09:04.542 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:09:04.542 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:09:04.543 +03:00 [DBG] Start end session request validation
2018-08-19 16:09:04.543 +03:00 [DBG] Start identity token validation
2018-08-19 16:09:04.543 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:09:04.548 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:09:04.548 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534684134,
    "exp": 1534684434,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.21407370305196451534684130702",
    "iat": 1534684134,
    "at_hash": "4HoINu80yjkOwHliBTok0Q",
    "sid": "a11e852c87f2c377f8610fbe4c1eb033",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684132,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:09:04.549 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODQxMzQsImV4cCI6MTUzNDY4NDQzNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjIxNDA3MzcwMzA1MTk2NDUxNTM0Njg0MTMwNzAyIiwiaWF0IjoxNTM0Njg0MTM0LCJhdF9oYXNoIjoiNEhvSU51ODB5amtPd0hsaUJUb2swUSIsInNpZCI6ImExMWU4NTJjODdmMmMzNzdmODYxMGZiZTRjMWViMDMzIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg0MTMyLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.dQa9-5H8rPLM6V0JIHTZiAAftUKrD6jnn9nKwzXs3oq0dSeGg3HsFupw9LFYi5gAnqsraC5UUp0GUDgQo0x7aLfOoU89cok8MKO6ews8Cpbasdht_jjfHvHJXKmQWIm_cAuPfJL8ZPXOXVvupzGquDpY_4_MWVyt23QDeCko37rq_000qAmprj02SIHisFfToZO1zNWvPL8ake81J6nUGZZxsJ_QfF5Ko82bNbWgu9xsyZa_el2Vi38s7-hAn8fUYs3Ww37RgIajWzUXqbqAexK2S7iSOPuieq4AijNEKnAXrf1kD9jsCThPNTJy4KnhNUsMbxDCaENIqpX3CMm6YQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:09:04.551 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:09:04.622 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:09:04.622 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:09:04.624 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 16:09:04.625 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 16:09:04.625 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 16:09:04.627 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 16:09:04.780 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:09:04.781 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:09:04.781 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 16:09:04.782 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 16:09:04.783 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 16:09:04.783 +03:00 [DBG] Processing signout callback request
2018-08-19 16:09:04.784 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 16:09:04.784 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 16:09:04.784 +03:00 [INF] Successful signout callback.
2018-08-19 16:09:04.791 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 16:09:04.791 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 16:09:27.823 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:09:27.824 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:09:27.825 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:09:27.829 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:09:27.829 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:09:27.830 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:09:27.830 +03:00 [DBG] Start end session request validation
2018-08-19 16:09:27.830 +03:00 [DBG] Start identity token validation
2018-08-19 16:09:27.830 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:09:27.834 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:09:27.834 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534684134,
    "exp": 1534684434,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.21407370305196451534684130702",
    "iat": 1534684134,
    "at_hash": "4HoINu80yjkOwHliBTok0Q",
    "sid": "a11e852c87f2c377f8610fbe4c1eb033",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684132,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:09:27.835 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODQxMzQsImV4cCI6MTUzNDY4NDQzNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjIxNDA3MzcwMzA1MTk2NDUxNTM0Njg0MTMwNzAyIiwiaWF0IjoxNTM0Njg0MTM0LCJhdF9oYXNoIjoiNEhvSU51ODB5amtPd0hsaUJUb2swUSIsInNpZCI6ImExMWU4NTJjODdmMmMzNzdmODYxMGZiZTRjMWViMDMzIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg0MTMyLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.dQa9-5H8rPLM6V0JIHTZiAAftUKrD6jnn9nKwzXs3oq0dSeGg3HsFupw9LFYi5gAnqsraC5UUp0GUDgQo0x7aLfOoU89cok8MKO6ews8Cpbasdht_jjfHvHJXKmQWIm_cAuPfJL8ZPXOXVvupzGquDpY_4_MWVyt23QDeCko37rq_000qAmprj02SIHisFfToZO1zNWvPL8ake81J6nUGZZxsJ_QfF5Ko82bNbWgu9xsyZa_el2Vi38s7-hAn8fUYs3Ww37RgIajWzUXqbqAexK2S7iSOPuieq4AijNEKnAXrf1kD9jsCThPNTJy4KnhNUsMbxDCaENIqpX3CMm6YQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:09:27.835 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:09:27.892 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:09:27.892 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:09:27.895 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:09:33.592 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:09:33.592 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:09:33.593 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:09:33.595 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:09:33.596 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:09:33.596 +03:00 [DBG] Rendering check session result
2018-08-19 16:09:39.029 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:09:39.031 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:09:39.031 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:09:39.032 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:09:39.032 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:09:39.032 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:09:39.032 +03:00 [DBG] Start end session request validation
2018-08-19 16:09:39.032 +03:00 [DBG] Start identity token validation
2018-08-19 16:09:39.033 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:09:39.036 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:09:39.038 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534684134,
    "exp": 1534684434,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.21407370305196451534684130702",
    "iat": 1534684134,
    "at_hash": "4HoINu80yjkOwHliBTok0Q",
    "sid": "a11e852c87f2c377f8610fbe4c1eb033",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684132,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:09:39.039 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODQxMzQsImV4cCI6MTUzNDY4NDQzNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjIxNDA3MzcwMzA1MTk2NDUxNTM0Njg0MTMwNzAyIiwiaWF0IjoxNTM0Njg0MTM0LCJhdF9oYXNoIjoiNEhvSU51ODB5amtPd0hsaUJUb2swUSIsInNpZCI6ImExMWU4NTJjODdmMmMzNzdmODYxMGZiZTRjMWViMDMzIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg0MTMyLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.dQa9-5H8rPLM6V0JIHTZiAAftUKrD6jnn9nKwzXs3oq0dSeGg3HsFupw9LFYi5gAnqsraC5UUp0GUDgQo0x7aLfOoU89cok8MKO6ews8Cpbasdht_jjfHvHJXKmQWIm_cAuPfJL8ZPXOXVvupzGquDpY_4_MWVyt23QDeCko37rq_000qAmprj02SIHisFfToZO1zNWvPL8ake81J6nUGZZxsJ_QfF5Ko82bNbWgu9xsyZa_el2Vi38s7-hAn8fUYs3Ww37RgIajWzUXqbqAexK2S7iSOPuieq4AijNEKnAXrf1kD9jsCThPNTJy4KnhNUsMbxDCaENIqpX3CMm6YQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:09:39.039 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:09:39.059 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:09:39.059 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:09:39.061 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:09:57.387 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:09:57.387 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:09:57.387 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:09:57.387 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:09:57.388 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:09:57.388 +03:00 [DBG] Rendering check session result
2018-08-19 16:10:11.873 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:11.874 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:11.874 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:10:11.875 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:10:11.877 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:10:11.878 +03:00 [DBG] Start authorize request
2018-08-19 16:10:11.878 +03:00 [DBG] No user present in authorize request
2018-08-19 16:10:11.878 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:10:11.879 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:10:11.880 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346842118540.9360888433901198",
  "Nonce": "N0.379154654592165131534684211854",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.379154654592165131534684211854",
    "state": "15346842118540.9360888433901198"
  }
}
2018-08-19 16:10:11.880 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:10:11.913 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:11.913 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:11.914 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:10:11.915 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:10:11.997 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:11.997 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:12.024 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:12.024 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:12.036 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:12.037 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:13.238 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:13.238 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:13.263 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:10:13.264 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:10:13.264 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:10:13.270 +03:00 [DBG] Adding auth_time claim with value: 1534684213
2018-08-19 16:10:13.272 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:10:13.273 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:10:13.281 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:13.282 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:13.283 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:10:13.283 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:10:13.283 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:10:13.284 +03:00 [DBG] Start authorize callback request
2018-08-19 16:10:13.284 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:10:13.284 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:10:13.284 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:10:13.285 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346842118540.9360888433901198",
  "Nonce": "N0.379154654592165131534684211854",
  "SessionId": "efcb117e0026f7a3adfcdab8a49901f2",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.379154654592165131534684211854",
    "state": "15346842118540.9360888433901198"
  }
}
2018-08-19 16:10:13.289 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:10:13.289 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:10:13.290 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:10:13.290 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:10:13.314 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:13.314 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:13.316 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:10:13.316 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:10:14.696 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:14.696 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:14.698 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:10:14.699 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:10:14.715 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:14.715 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:14.716 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:10:14.717 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:10:14.717 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:10:14.717 +03:00 [DBG] Start authorize callback request
2018-08-19 16:10:14.718 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:10:14.718 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:10:14.718 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:10:14.720 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346842118540.9360888433901198",
  "Nonce": "N0.379154654592165131534684211854",
  "SessionId": "efcb117e0026f7a3adfcdab8a49901f2",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.379154654592165131534684211854",
    "state": "15346842118540.9360888433901198"
  }
}
2018-08-19 16:10:14.725 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:10:14.725 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:10:14.725 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:10:14.726 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:10:14.726 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:10:14.726 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:10:14.735 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:10:14.765 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:10:14.765 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:10:14.765 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:10:14.781 +03:00 [DBG] oMFzNVhamSi7pb0CbvIJJR4x63qbo7BZX0J1C7idKjI= not found in database
2018-08-19 16:10:14.787 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:10:14.788 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:10:14.792 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****n9wQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****87e8"
    }
  ],
  "ActivityId": "0HLG5QGK9BICF:00000026",
  "TimeStamp": "2018-08-19T13:10:14Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:10:14.792 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346842118540.9360888433901198",
  "Scope": "openid profile email"
}
2018-08-19 16:10:14.792 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:10:14.793 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:10:18.137 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:18.138 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:18.138 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:10:18.138 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:10:18.139 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:10:18.140 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:10:18.140 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:10:18.141 +03:00 [DBG] Start key discovery request
2018-08-19 16:10:18.213 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:18.213 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:18.213 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:10:18.214 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:10:18.218 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:18.218 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:18.218 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:10:18.218 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:10:18.219 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:10:18.219 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:10:18.219 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:10:18.221 +03:00 [DBG] Start userinfo request
2018-08-19 16:10:18.221 +03:00 [DBG] Bearer token found in header
2018-08-19 16:10:18.223 +03:00 [DBG] oMFzNVhamSi7pb0CbvIJJR4x63qbo7BZX0J1C7idKjI= found in database: true
2018-08-19 16:10:18.242 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:10:18.242 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "63333037823a34af84c73596c526f78417cec77dae556d6e203bf9f9cd0987e8",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534684214,
    "exp": 1534687814,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684213,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:10:18.243 +03:00 [DBG] Creating userinfo response
2018-08-19 16:10:18.243 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:10:18.243 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:10:18.243 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:10:18.243 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:10:18.252 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:10:18.253 +03:00 [DBG] End userinfo request
2018-08-19 16:10:25.975 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:25.975 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:25.977 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:10:25.978 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:10:25.978 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:10:25.978 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:10:25.978 +03:00 [DBG] Start end session request validation
2018-08-19 16:10:25.978 +03:00 [DBG] Start identity token validation
2018-08-19 16:10:25.978 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:10:25.982 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:10:25.982 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534684214,
    "exp": 1534684514,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.379154654592165131534684211854",
    "iat": 1534684214,
    "at_hash": "xxnC1eWgNEZNsb8iIYC4Nw",
    "sid": "efcb117e0026f7a3adfcdab8a49901f2",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684213,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:10:25.983 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODQyMTQsImV4cCI6MTUzNDY4NDUxNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjM3OTE1NDY1NDU5MjE2NTEzMTUzNDY4NDIxMTg1NCIsImlhdCI6MTUzNDY4NDIxNCwiYXRfaGFzaCI6Inh4bkMxZVdnTkVaTnNiOGlJWUM0TnciLCJzaWQiOiJlZmNiMTE3ZTAwMjZmN2EzYWRmY2RhYjhhNDk5MDFmMiIsInN1YiI6IjU3MzFmYzViLTllMWUtNDkyMi05MDA4LTYyMjY5OGZjZTBmYiIsImF1dGhfdGltZSI6MTUzNDY4NDIxMywiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.d39BCtWn1kFyN9iXoGF1fcRO7-yjSzlcR3f9z3vDt0X4Xn7JJ5ugoT7WgW8_1z71lTlPT1Xndvlht5PePD-uB7XhkDwwIUge2B9wYYAIls6Edu-v4uZCH_6LzXu6FOONR0KBcc41epMtEoKdnluEkcPYzj5r8nxcHR18Wf5yc7L6GDKe8l-gMj9vp2oFmGUFmgOUgRACz6SqW493pHLzpvxe3hbUvTx715Uw3SKdDjkVqtUE9rWNDnjfJ09XxwXIDapT4DMjyA1sHM7JkRjP8j38GYIBKs9ZOdMGmaH-JWO8jHxlm-92tnB9xYwebcei-JXUJ-ojZ8zTR3RIRWn9wQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:10:25.983 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:10:26.000 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:26.001 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:26.003 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 16:10:26.003 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 16:10:26.003 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 16:10:26.009 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 16:10:26.101 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:10:26.102 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:10:26.103 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 16:10:26.107 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 16:10:26.108 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 16:10:26.108 +03:00 [DBG] Processing signout callback request
2018-08-19 16:10:26.108 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 16:10:26.110 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 16:10:26.110 +03:00 [INF] Successful signout callback.
2018-08-19 16:10:26.110 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 16:10:26.110 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 16:13:17.705 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:17.705 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:17.705 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:13:17.706 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:13:17.706 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:13:17.706 +03:00 [DBG] Rendering check session result
2018-08-19 16:13:22.887 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:22.888 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:22.888 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:13:22.889 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:13:22.890 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:13:22.890 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:13:22.890 +03:00 [DBG] Start end session request validation
2018-08-19 16:13:22.891 +03:00 [DBG] Start identity token validation
2018-08-19 16:13:22.891 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:13:22.895 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:13:22.895 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534684214,
    "exp": 1534684514,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.379154654592165131534684211854",
    "iat": 1534684214,
    "at_hash": "xxnC1eWgNEZNsb8iIYC4Nw",
    "sid": "efcb117e0026f7a3adfcdab8a49901f2",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684213,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:13:22.896 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODQyMTQsImV4cCI6MTUzNDY4NDUxNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjM3OTE1NDY1NDU5MjE2NTEzMTUzNDY4NDIxMTg1NCIsImlhdCI6MTUzNDY4NDIxNCwiYXRfaGFzaCI6Inh4bkMxZVdnTkVaTnNiOGlJWUM0TnciLCJzaWQiOiJlZmNiMTE3ZTAwMjZmN2EzYWRmY2RhYjhhNDk5MDFmMiIsInN1YiI6IjU3MzFmYzViLTllMWUtNDkyMi05MDA4LTYyMjY5OGZjZTBmYiIsImF1dGhfdGltZSI6MTUzNDY4NDIxMywiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.d39BCtWn1kFyN9iXoGF1fcRO7-yjSzlcR3f9z3vDt0X4Xn7JJ5ugoT7WgW8_1z71lTlPT1Xndvlht5PePD-uB7XhkDwwIUge2B9wYYAIls6Edu-v4uZCH_6LzXu6FOONR0KBcc41epMtEoKdnluEkcPYzj5r8nxcHR18Wf5yc7L6GDKe8l-gMj9vp2oFmGUFmgOUgRACz6SqW493pHLzpvxe3hbUvTx715Uw3SKdDjkVqtUE9rWNDnjfJ09XxwXIDapT4DMjyA1sHM7JkRjP8j38GYIBKs9ZOdMGmaH-JWO8jHxlm-92tnB9xYwebcei-JXUJ-ojZ8zTR3RIRWn9wQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:13:22.896 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:13:22.927 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:22.927 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:22.932 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:13:35.435 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:35.436 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:35.436 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:13:35.439 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:13:35.439 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:13:35.439 +03:00 [DBG] Rendering check session result
2018-08-19 16:13:39.759 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:39.759 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:39.760 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:13:39.760 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:13:39.761 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:13:39.761 +03:00 [DBG] Start authorize request
2018-08-19 16:13:39.761 +03:00 [DBG] No user present in authorize request
2018-08-19 16:13:39.761 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:13:39.761 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:13:39.761 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346844197400.7273893796716783",
  "Nonce": "N0.54251139311528951534684419740",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.54251139311528951534684419740",
    "state": "15346844197400.7273893796716783"
  }
}
2018-08-19 16:13:39.762 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:13:39.792 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:39.792 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:39.793 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:13:39.793 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:13:39.849 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:39.849 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:39.867 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:39.867 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:39.867 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:39.867 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:39.955 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:39.956 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:40.026 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:40.026 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:41.371 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:41.375 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:41.397 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:13:41.397 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:13:41.397 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:13:41.397 +03:00 [DBG] Adding auth_time claim with value: 1534684421
2018-08-19 16:13:41.398 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:13:41.398 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:13:41.410 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:41.410 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:41.411 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:13:41.412 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:13:41.412 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:13:41.412 +03:00 [DBG] Start authorize callback request
2018-08-19 16:13:41.413 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:13:41.413 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:13:41.413 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:13:41.414 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346844197400.7273893796716783",
  "Nonce": "N0.54251139311528951534684419740",
  "SessionId": "c175113c9c01fca0f4ae8f54a2d5e615",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.54251139311528951534684419740",
    "state": "15346844197400.7273893796716783"
  }
}
2018-08-19 16:13:41.420 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:13:41.420 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:13:41.420 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:13:41.420 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:13:41.428 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:41.428 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:41.429 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:13:41.431 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:13:41.504 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:41.504 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:43.042 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:43.042 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:43.044 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:13:43.044 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:13:43.060 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:43.060 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:43.061 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:13:43.061 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:13:43.062 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:13:43.062 +03:00 [DBG] Start authorize callback request
2018-08-19 16:13:43.062 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:13:43.062 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:13:43.063 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:13:43.063 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346844197400.7273893796716783",
  "Nonce": "N0.54251139311528951534684419740",
  "SessionId": "c175113c9c01fca0f4ae8f54a2d5e615",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.54251139311528951534684419740",
    "state": "15346844197400.7273893796716783"
  }
}
2018-08-19 16:13:43.069 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:13:43.070 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:13:43.070 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:13:43.070 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:13:43.071 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:13:43.071 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:13:43.077 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:13:43.103 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:13:43.103 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:13:43.103 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:13:43.121 +03:00 [DBG] BsgqmC+8PVab4QE9wIk3EdNHsvE6gYE+tQ4p2L9vRhM= not found in database
2018-08-19 16:13:43.136 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:13:43.136 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:13:43.140 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****VoAw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d32b"
    }
  ],
  "ActivityId": "0HLG5QGK9BICJ:00000003",
  "TimeStamp": "2018-08-19T13:13:43Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:13:43.140 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346844197400.7273893796716783",
  "Scope": "openid profile email"
}
2018-08-19 16:13:43.141 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:13:43.141 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:13:46.200 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:46.200 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:46.200 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:13:46.200 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:13:46.200 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:13:46.201 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:13:46.201 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:13:46.201 +03:00 [DBG] Start key discovery request
2018-08-19 16:13:46.275 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:46.275 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:46.275 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:13:46.275 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:13:46.279 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:46.280 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:46.280 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:13:46.280 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:13:46.280 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:13:46.281 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:13:46.281 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:13:46.281 +03:00 [DBG] Start userinfo request
2018-08-19 16:13:46.281 +03:00 [DBG] Bearer token found in header
2018-08-19 16:13:46.283 +03:00 [DBG] BsgqmC+8PVab4QE9wIk3EdNHsvE6gYE+tQ4p2L9vRhM= found in database: true
2018-08-19 16:13:46.304 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:13:46.304 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "5e7cf6576b812b86ccdbef38702ff20a8b04f650a4e06298a61cb5aa2201d32b",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534684423,
    "exp": 1534688023,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684421,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:13:46.305 +03:00 [DBG] Creating userinfo response
2018-08-19 16:13:46.305 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:13:46.305 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:13:46.305 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:13:46.305 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:13:46.311 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:13:46.313 +03:00 [DBG] End userinfo request
2018-08-19 16:13:59.831 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:59.832 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:59.832 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:13:59.834 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:13:59.834 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:13:59.834 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:13:59.835 +03:00 [DBG] Start end session request validation
2018-08-19 16:13:59.835 +03:00 [DBG] Start identity token validation
2018-08-19 16:13:59.836 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:13:59.840 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:13:59.841 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534684423,
    "exp": 1534684723,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.54251139311528951534684419740",
    "iat": 1534684423,
    "at_hash": "Oe-tIkYgWEZTV6dl3MFPQg",
    "sid": "c175113c9c01fca0f4ae8f54a2d5e615",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684421,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:13:59.841 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODQ0MjMsImV4cCI6MTUzNDY4NDcyMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjU0MjUxMTM5MzExNTI4OTUxNTM0Njg0NDE5NzQwIiwiaWF0IjoxNTM0Njg0NDIzLCJhdF9oYXNoIjoiT2UtdElrWWdXRVpUVjZkbDNNRlBRZyIsInNpZCI6ImMxNzUxMTNjOWMwMWZjYTBmNGFlOGY1NGEyZDVlNjE1Iiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg0NDIxLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.ewv8DZInEHnB28GQnTZZ3ELJnGvpQNbjzumB_kvbwVyWllXBl3iiKrJJmysz8Oq7L_2CgXNLgFSPmWeJSNAIis01I8w-5Vut9gLXPpIhCJ3ufHNRrj7eGGUYD7c23q-fHycDB2ynUPWplKlaWiDH3ZutFydAGm2VICPHgqsZpRSUNR1bQBNe_MiO-SAEbXB2BjLxRi38ORtbJFJcjh8vvT7IuQQ9bfqDHBUMWQ1Sst3DPzv7zLgmg0UHFRRi9bXFKszZOa9E-RqR2Car0idn4yHwfL4JNK5eRoyeF_72NnC7WCVSb6wlxy_qnBhVOVDMNt8hrLbKs0WzGYlSK5VoAw",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:13:59.842 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:13:59.860 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:59.860 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:59.862 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 16:13:59.863 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 16:13:59.863 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 16:13:59.866 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 16:13:59.984 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:13:59.984 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:13:59.984 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 16:13:59.985 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 16:13:59.985 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 16:13:59.985 +03:00 [DBG] Processing signout callback request
2018-08-19 16:13:59.985 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 16:13:59.986 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 16:13:59.986 +03:00 [INF] Successful signout callback.
2018-08-19 16:13:59.986 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 16:13:59.986 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 16:14:44.789 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:14:44.789 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:18:45.455 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:18:45.456 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:18:45.458 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:18:45.459 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:18:45.460 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:18:45.460 +03:00 [DBG] Start authorize request
2018-08-19 16:18:45.460 +03:00 [DBG] No user present in authorize request
2018-08-19 16:18:45.460 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:18:45.480 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 16:18:45.480 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:18:45.481 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346847254320.18325893541228333",
  "Nonce": "N0.085888058683322721534684725432",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.085888058683322721534684725432",
    "state": "15346847254320.18325893541228333",
    "prompt": "none"
  }
}
2018-08-19 16:18:45.481 +03:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2018-08-19 16:18:45.488 +03:00 [INF] {
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346847254320.18325893541228333",
  "Nonce": "N0.085888058683322721534684725432",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.085888058683322721534684725432",
    "state": "15346847254320.18325893541228333",
    "prompt": "none"
  }
}
2018-08-19 16:18:45.500 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Error": "login_required",
  "ActivityId": "0HLG5QGK9BICL:00000001",
  "TimeStamp": "2018-08-19T13:18:45Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:19:18.790 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:18.790 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:18.791 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:19:18.791 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:19:18.791 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:19:18.791 +03:00 [DBG] Rendering check session result
2018-08-19 16:19:27.300 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:27.301 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:27.303 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:19:27.304 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:19:27.306 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:19:27.307 +03:00 [DBG] Start authorize request
2018-08-19 16:19:27.307 +03:00 [DBG] No user present in authorize request
2018-08-19 16:19:27.307 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:19:27.314 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-19 16:19:27.322 +03:00 [DBG] Found [] API scopes in database
2018-08-19 16:19:27.322 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:19:27.322 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346847254320.18325893541228333",
  "Nonce": "N0.41648575736028671534684767275",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.41648575736028671534684767275",
    "state": "15346847254320.18325893541228333"
  }
}
2018-08-19 16:19:27.323 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:19:27.571 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:27.572 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:27.573 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:19:27.573 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:19:27.799 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:27.799 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:27.803 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:27.803 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:27.818 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:27.818 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:27.819 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:27.819 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:27.922 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:27.923 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:29.411 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:29.411 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:29.455 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:19:29.455 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:19:29.455 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:19:29.455 +03:00 [DBG] Adding auth_time claim with value: 1534684769
2018-08-19 16:19:29.455 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:19:29.456 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:19:29.466 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:29.468 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:29.471 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:19:29.471 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:19:29.472 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:19:29.472 +03:00 [DBG] Start authorize callback request
2018-08-19 16:19:29.473 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:19:29.473 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:19:29.473 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:19:29.474 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346847254320.18325893541228333",
  "Nonce": "N0.41648575736028671534684767275",
  "SessionId": "9d58f3b1d6021a5598c4db6fbab255a8",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.41648575736028671534684767275",
    "state": "15346847254320.18325893541228333"
  }
}
2018-08-19 16:19:29.479 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:19:29.479 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:19:29.479 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:19:29.479 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:19:29.486 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:29.486 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:29.488 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:19:29.489 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:19:31.016 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:31.016 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:31.017 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:19:31.018 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:19:31.036 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:31.037 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:31.038 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:19:31.039 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:19:31.039 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:19:31.039 +03:00 [DBG] Start authorize callback request
2018-08-19 16:19:31.040 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:19:31.040 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:19:31.040 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:19:31.041 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346847254320.18325893541228333",
  "Nonce": "N0.41648575736028671534684767275",
  "SessionId": "9d58f3b1d6021a5598c4db6fbab255a8",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.41648575736028671534684767275",
    "state": "15346847254320.18325893541228333"
  }
}
2018-08-19 16:19:31.046 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:19:31.046 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:19:31.046 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:19:31.046 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:19:31.047 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:19:31.047 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:19:31.052 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:19:31.122 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:19:31.123 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:19:31.123 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:19:31.144 +03:00 [DBG] EhMhvDYKiAFaIVVkdcpqrq4CoFO7ricBTkoTdo+PNH0= not found in database
2018-08-19 16:19:31.197 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:19:31.198 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:19:31.202 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****JJOQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****4f98"
    }
  ],
  "ActivityId": "0HLG5QGK9BICL:0000000C",
  "TimeStamp": "2018-08-19T13:19:31Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:19:31.202 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346847254320.18325893541228333",
  "Scope": "openid profile email"
}
2018-08-19 16:19:31.203 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:19:31.203 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:19:34.104 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:34.104 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:34.104 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:19:34.107 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-19 16:19:34.107 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:19:34.108 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:19:34.108 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:19:34.108 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:19:34.108 +03:00 [DBG] Start key discovery request
2018-08-19 16:19:34.220 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:34.220 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:34.220 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:19:34.220 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:19:34.225 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:34.225 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:34.226 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:19:34.226 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:19:34.226 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:19:34.227 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:19:34.227 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:19:34.227 +03:00 [DBG] Start userinfo request
2018-08-19 16:19:34.227 +03:00 [DBG] Bearer token found in header
2018-08-19 16:19:34.229 +03:00 [DBG] EhMhvDYKiAFaIVVkdcpqrq4CoFO7ricBTkoTdo+PNH0= found in database: true
2018-08-19 16:19:34.249 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:19:34.249 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "bcc771d69c14e3c5c6e78efd1001cadd39554ffeb634b3a87c14fb6510294f98",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534684771,
    "exp": 1534688371,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684769,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:19:34.250 +03:00 [DBG] Creating userinfo response
2018-08-19 16:19:34.250 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:19:34.250 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:19:34.251 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:19:34.251 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:19:34.257 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:19:34.257 +03:00 [DBG] End userinfo request
2018-08-19 16:19:38.250 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:38.251 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:38.253 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:19:38.259 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:19:38.259 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:19:38.259 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:19:38.259 +03:00 [DBG] Start end session request validation
2018-08-19 16:19:38.259 +03:00 [DBG] Start identity token validation
2018-08-19 16:19:38.260 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:19:38.264 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:19:38.264 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534684771,
    "exp": 1534685071,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.41648575736028671534684767275",
    "iat": 1534684771,
    "at_hash": "TxRj0MuZvo-WxZ9asq8PLA",
    "sid": "9d58f3b1d6021a5598c4db6fbab255a8",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534684769,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:19:38.264 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODQ3NzEsImV4cCI6MTUzNDY4NTA3MSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjQxNjQ4NTc1NzM2MDI4NjcxNTM0Njg0NzY3Mjc1IiwiaWF0IjoxNTM0Njg0NzcxLCJhdF9oYXNoIjoiVHhSajBNdVp2by1XeFo5YXNxOFBMQSIsInNpZCI6IjlkNThmM2IxZDYwMjFhNTU5OGM0ZGI2ZmJhYjI1NWE4Iiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg0NzY5LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.bIbPAcBthl-e1UoZs77vG9atReb_3OvJydAjtzOup1PtdQbMAkrkHtKwD78a4_CfDMoirMAlWOwRk4RqNcaSWVvjO7NSsoNn9ETS6stOq6uiWpkcPRAsS-SrJxDi-tFeUVMQMsc6-6JItKweTUcLlxJJrOHVMuGsw2Gl1q29XFb9-OF1VV2AjIMQuZAhScfU2vtIGQQrRQktI0FDhBUP-iYoUrB8neGjtQYURAC5Xk2BiyM1xxL93A8VxJ4yI149wwKHBKwY4wNeVQ0hFLojWWxSg_f7KdLRzqTXs1ipCUkvsVv7xKLTEAG3zCKBoOxNvbJRDxviv-cx25FpE0JJOQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:19:38.264 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:19:38.283 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:38.283 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:38.285 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 16:19:38.286 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 16:19:38.286 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 16:19:38.289 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 16:19:38.408 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:19:38.408 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:19:38.409 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 16:19:38.410 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 16:19:38.410 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 16:19:38.410 +03:00 [DBG] Processing signout callback request
2018-08-19 16:19:38.411 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 16:19:38.411 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 16:19:38.412 +03:00 [INF] Successful signout callback.
2018-08-19 16:19:38.412 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 16:19:38.412 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 16:24:31.971 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:24:31.972 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:24:31.972 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:24:31.973 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:24:31.973 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:24:31.973 +03:00 [DBG] Start authorize request
2018-08-19 16:24:31.974 +03:00 [DBG] No user present in authorize request
2018-08-19 16:24:31.974 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:24:31.975 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:24:31.975 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346850719570.2371151543900616",
  "Nonce": "N0.56354658259033191534685071957",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.56354658259033191534685071957",
    "state": "15346850719570.2371151543900616",
    "prompt": "none"
  }
}
2018-08-19 16:24:31.975 +03:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2018-08-19 16:24:31.976 +03:00 [INF] {
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346850719570.2371151543900616",
  "Nonce": "N0.56354658259033191534685071957",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.56354658259033191534685071957",
    "state": "15346850719570.2371151543900616",
    "prompt": "none"
  }
}
2018-08-19 16:24:31.976 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Error": "login_required",
  "ActivityId": "0HLG5QGK9BICP:00000001",
  "TimeStamp": "2018-08-19T13:24:31Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:31:44.918 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:31:44.919 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:17.948 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:17.948 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:17.949 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:33:17.949 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:33:17.949 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:33:17.949 +03:00 [DBG] Rendering check session result
2018-08-19 16:33:30.052 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:30.053 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:30.056 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:33:30.063 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:33:30.064 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:33:30.065 +03:00 [DBG] Start authorize request
2018-08-19 16:33:30.065 +03:00 [DBG] No user present in authorize request
2018-08-19 16:33:30.065 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:33:30.066 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:33:30.066 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346850719570.2371151543900616",
  "Nonce": "N0.39784193606999621534685610028",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.39784193606999621534685610028",
    "state": "15346850719570.2371151543900616"
  }
}
2018-08-19 16:33:30.066 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:33:30.087 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:30.087 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:30.088 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:33:30.089 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:33:30.185 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:30.185 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:30.190 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:30.191 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:30.192 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:30.193 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:30.195 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:30.195 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:30.200 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:30.200 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:30.320 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:30.321 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:30.339 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:30.339 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:31.347 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:31.352 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:31.389 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:33:31.393 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:33:31.395 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:33:31.399 +03:00 [DBG] Adding auth_time claim with value: 1534685611
2018-08-19 16:33:31.402 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:33:31.403 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:33:31.415 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:31.415 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:31.416 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:33:31.417 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:33:31.417 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:33:31.417 +03:00 [DBG] Start authorize callback request
2018-08-19 16:33:31.417 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:33:31.418 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:33:31.418 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:33:31.418 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346850719570.2371151543900616",
  "Nonce": "N0.39784193606999621534685610028",
  "SessionId": "a8c2018381cc0516014dc6692a85826c",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.39784193606999621534685610028",
    "state": "15346850719570.2371151543900616"
  }
}
2018-08-19 16:33:31.430 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:33:31.430 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:33:31.431 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:33:31.431 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:33:31.443 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:31.443 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:31.445 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:33:31.445 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:33:31.538 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:31.538 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:33.003 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:33.004 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:33.008 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:33:33.008 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:33:33.031 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:33.031 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:33.032 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:33:33.032 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:33:33.032 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:33:33.033 +03:00 [DBG] Start authorize callback request
2018-08-19 16:33:33.033 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:33:33.033 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:33:33.034 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:33:33.034 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346850719570.2371151543900616",
  "Nonce": "N0.39784193606999621534685610028",
  "SessionId": "a8c2018381cc0516014dc6692a85826c",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.39784193606999621534685610028",
    "state": "15346850719570.2371151543900616"
  }
}
2018-08-19 16:33:33.040 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:33:33.040 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:33:33.040 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:33:33.041 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:33:33.041 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:33:33.041 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:33:33.049 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:33:33.078 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:33:33.079 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:33:33.080 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:33:33.101 +03:00 [DBG] /Lvw00n6XP6Ak77rGIqPaGKaO+uLm+bcqy6cUPVjeBA= not found in database
2018-08-19 16:33:33.111 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:33:33.112 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:33:33.116 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Kayw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****20e5"
    }
  ],
  "ActivityId": "0HLG5QGK9BICQ:0000000E",
  "TimeStamp": "2018-08-19T13:33:33Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:33:33.116 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346850719570.2371151543900616",
  "Scope": "openid profile email"
}
2018-08-19 16:33:33.117 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:33:33.117 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:33:36.888 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:36.889 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:36.889 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:33:36.889 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:33:36.890 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:33:36.890 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:33:36.890 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:33:36.891 +03:00 [DBG] Start key discovery request
2018-08-19 16:33:37.014 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:37.014 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:37.015 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:33:37.015 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:33:37.070 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:37.070 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:37.070 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:33:37.070 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:33:37.070 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:33:37.071 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:33:37.071 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:33:37.072 +03:00 [DBG] Start userinfo request
2018-08-19 16:33:37.072 +03:00 [DBG] Bearer token found in header
2018-08-19 16:33:37.074 +03:00 [DBG] /Lvw00n6XP6Ak77rGIqPaGKaO+uLm+bcqy6cUPVjeBA= found in database: true
2018-08-19 16:33:37.094 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:33:37.095 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "5c0d95a1951f5e8da36f4be8668cdf221c54a7aa739ace32f636ac71b03a20e5",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534685613,
    "exp": 1534689213,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534685611,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:33:37.095 +03:00 [DBG] Creating userinfo response
2018-08-19 16:33:37.096 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:33:37.096 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:33:37.096 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:33:37.097 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:33:37.102 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:33:37.104 +03:00 [DBG] End userinfo request
2018-08-19 16:33:49.687 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:49.688 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:49.688 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:33:49.689 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:33:49.689 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:33:49.690 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:33:49.693 +03:00 [DBG] Start end session request validation
2018-08-19 16:33:49.693 +03:00 [DBG] Start identity token validation
2018-08-19 16:33:49.715 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 16:33:49.715 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:33:49.721 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:33:49.722 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534685613,
    "exp": 1534685913,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.39784193606999621534685610028",
    "iat": 1534685613,
    "at_hash": "bFdw89eS-6hlNapVhH6Rbw",
    "sid": "a8c2018381cc0516014dc6692a85826c",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534685611,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:33:49.722 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODU2MTMsImV4cCI6MTUzNDY4NTkxMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjM5Nzg0MTkzNjA2OTk5NjIxNTM0Njg1NjEwMDI4IiwiaWF0IjoxNTM0Njg1NjEzLCJhdF9oYXNoIjoiYkZkdzg5ZVMtNmhsTmFwVmhINlJidyIsInNpZCI6ImE4YzIwMTgzODFjYzA1MTYwMTRkYzY2OTJhODU4MjZjIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg1NjExLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.JDZf_b5aoQEKpf1PO8YuWclZOtyZyjROkbble3NWpZIpFAkKBnH_9tQ29H53DbiKv0QSOHUgp_-HBT1LvPfBUrUmwTg0nfJoiPBNJYaXXYIgjAh9dcOfgKRwuIc1TgSb2-R66LeX9H48siTn9jEz8PVZfJ10VFFR_a8Pa09PmwJr05N8n0ZSkoKLD092h_X2-mbkL9K5qc8UEqJk7nM31aYkonfQA6ui-78rXihdkV6jlsKBWQHXzCNLBmG-KjbVVlSjEomjOYsi7_ML1SjPYVaras_88qlx_yU9ziaXToOtWXgXhGZrPplXnWC6Wz6Z5P4VDL1ImJjWxMvTwDKayw",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:33:49.722 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:33:49.821 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:49.821 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:49.823 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 16:33:49.824 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 16:33:49.824 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 16:33:49.829 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 16:33:50.084 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:33:50.084 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:33:50.084 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 16:33:50.085 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 16:33:50.085 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 16:33:50.085 +03:00 [DBG] Processing signout callback request
2018-08-19 16:33:50.086 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 16:33:50.086 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 16:33:50.086 +03:00 [INF] Successful signout callback.
2018-08-19 16:33:50.086 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 16:33:50.086 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 16:38:35.774 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:38:35.774 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:38:35.774 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:38:35.775 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:38:35.775 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:38:35.775 +03:00 [DBG] Start authorize request
2018-08-19 16:38:35.775 +03:00 [DBG] No user present in authorize request
2018-08-19 16:38:35.775 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:38:35.782 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-19 16:38:35.788 +03:00 [DBG] Found [] API scopes in database
2018-08-19 16:38:35.792 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:38:35.792 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346859157590.2976354130204141",
  "Nonce": "N0.82593794715418791534685915759",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.82593794715418791534685915759",
    "state": "15346859157590.2976354130204141",
    "prompt": "none"
  }
}
2018-08-19 16:38:35.793 +03:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2018-08-19 16:38:35.793 +03:00 [INF] {
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346859157590.2976354130204141",
  "Nonce": "N0.82593794715418791534685915759",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.82593794715418791534685915759",
    "state": "15346859157590.2976354130204141",
    "prompt": "none"
  }
}
2018-08-19 16:38:35.794 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Error": "login_required",
  "ActivityId": "0HLG5QGK9BID0:00000001",
  "TimeStamp": "2018-08-19T13:38:35Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:42:26.304 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:26.305 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:33.244 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:33.245 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:33.245 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:42:33.250 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:42:33.250 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:42:33.251 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:42:33.251 +03:00 [DBG] Start end session request validation
2018-08-19 16:42:33.251 +03:00 [DBG] Start identity token validation
2018-08-19 16:42:33.251 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:42:33.263 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:42:33.263 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534685613,
    "exp": 1534685913,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.39784193606999621534685610028",
    "iat": 1534685613,
    "at_hash": "bFdw89eS-6hlNapVhH6Rbw",
    "sid": "a8c2018381cc0516014dc6692a85826c",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534685611,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:42:33.263 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODU2MTMsImV4cCI6MTUzNDY4NTkxMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjM5Nzg0MTkzNjA2OTk5NjIxNTM0Njg1NjEwMDI4IiwiaWF0IjoxNTM0Njg1NjEzLCJhdF9oYXNoIjoiYkZkdzg5ZVMtNmhsTmFwVmhINlJidyIsInNpZCI6ImE4YzIwMTgzODFjYzA1MTYwMTRkYzY2OTJhODU4MjZjIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg1NjExLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.JDZf_b5aoQEKpf1PO8YuWclZOtyZyjROkbble3NWpZIpFAkKBnH_9tQ29H53DbiKv0QSOHUgp_-HBT1LvPfBUrUmwTg0nfJoiPBNJYaXXYIgjAh9dcOfgKRwuIc1TgSb2-R66LeX9H48siTn9jEz8PVZfJ10VFFR_a8Pa09PmwJr05N8n0ZSkoKLD092h_X2-mbkL9K5qc8UEqJk7nM31aYkonfQA6ui-78rXihdkV6jlsKBWQHXzCNLBmG-KjbVVlSjEomjOYsi7_ML1SjPYVaras_88qlx_yU9ziaXToOtWXgXhGZrPplXnWC6Wz6Z5P4VDL1ImJjWxMvTwDKayw",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:42:33.264 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:42:33.275 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:33.275 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:33.278 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:42:33.345 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:33.345 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:33.361 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:33.362 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:48.570 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:48.571 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:48.573 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:42:48.573 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:42:48.575 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:42:48.576 +03:00 [DBG] Rendering check session result
2018-08-19 16:42:53.104 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:53.104 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:53.107 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:42:53.111 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:42:53.113 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:42:53.113 +03:00 [DBG] Start authorize request
2018-08-19 16:42:53.113 +03:00 [DBG] No user present in authorize request
2018-08-19 16:42:53.114 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:42:53.114 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:42:53.115 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346861730830.04756787089586878",
  "Nonce": "N0.031816247601223591534686173083",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.031816247601223591534686173083",
    "state": "15346861730830.04756787089586878"
  }
}
2018-08-19 16:42:53.115 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:42:53.135 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:53.136 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:53.138 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:42:53.140 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:42:53.204 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:53.204 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:53.215 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:53.215 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:53.217 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:53.218 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:53.296 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:53.296 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:53.347 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:53.347 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:54.484 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:54.493 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:54.522 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:42:54.523 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:42:54.523 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:42:54.523 +03:00 [DBG] Adding auth_time claim with value: 1534686174
2018-08-19 16:42:54.524 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:42:54.524 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:42:54.546 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:54.546 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:54.547 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:42:54.547 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:42:54.547 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:42:54.547 +03:00 [DBG] Start authorize callback request
2018-08-19 16:42:54.548 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:42:54.548 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:42:54.548 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:42:54.548 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346861730830.04756787089586878",
  "Nonce": "N0.031816247601223591534686173083",
  "SessionId": "daab63eb95239d68d1f7f62cdea32214",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.031816247601223591534686173083",
    "state": "15346861730830.04756787089586878"
  }
}
2018-08-19 16:42:54.553 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:42:54.553 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:42:54.554 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:42:54.554 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:42:54.566 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:54.567 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:54.569 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:42:54.569 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:42:56.208 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:56.208 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:56.210 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:42:56.211 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:42:56.233 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:56.234 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:56.236 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:42:56.238 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:42:56.238 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:42:56.238 +03:00 [DBG] Start authorize callback request
2018-08-19 16:42:56.239 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:42:56.239 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:42:56.240 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:42:56.240 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346861730830.04756787089586878",
  "Nonce": "N0.031816247601223591534686173083",
  "SessionId": "daab63eb95239d68d1f7f62cdea32214",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.031816247601223591534686173083",
    "state": "15346861730830.04756787089586878"
  }
}
2018-08-19 16:42:56.245 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:42:56.245 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:42:56.245 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:42:56.246 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:42:56.246 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:42:56.246 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:42:56.253 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:42:56.265 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:42:56.266 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:42:56.266 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:42:56.284 +03:00 [DBG] Q8VzeCTzG1wSS26OFZLsZVyP0QsJ9M6YBwrPou/tvB8= not found in database
2018-08-19 16:42:56.299 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:42:56.299 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:42:56.304 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****0WzA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****cab7"
    }
  ],
  "ActivityId": "0HLG5QGK9BID1:00000011",
  "TimeStamp": "2018-08-19T13:42:56Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:42:56.305 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346861730830.04756787089586878",
  "Scope": "openid profile email"
}
2018-08-19 16:42:56.305 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:42:56.306 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:42:59.054 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:59.054 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:59.054 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:42:59.059 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-19 16:42:59.059 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:42:59.059 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:42:59.060 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:42:59.060 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:42:59.060 +03:00 [DBG] Start key discovery request
2018-08-19 16:42:59.119 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:59.119 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:59.119 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:42:59.119 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:42:59.123 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:42:59.124 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:42:59.124 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:42:59.124 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:42:59.125 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:42:59.125 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:42:59.126 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:42:59.126 +03:00 [DBG] Start userinfo request
2018-08-19 16:42:59.126 +03:00 [DBG] Bearer token found in header
2018-08-19 16:42:59.128 +03:00 [DBG] Q8VzeCTzG1wSS26OFZLsZVyP0QsJ9M6YBwrPou/tvB8= found in database: true
2018-08-19 16:42:59.148 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:42:59.148 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "d1ad543e15f1d919a7a2c56335462c7e67e2e87bd8a1ad186822f2a865b9cab7",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534686176,
    "exp": 1534689776,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686174,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:42:59.149 +03:00 [DBG] Creating userinfo response
2018-08-19 16:42:59.149 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:42:59.149 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:42:59.149 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:42:59.149 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:42:59.154 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:42:59.155 +03:00 [DBG] End userinfo request
2018-08-19 16:43:01.721 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:43:01.722 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:43:01.723 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:43:01.729 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:43:01.729 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:43:01.730 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:43:01.730 +03:00 [DBG] Start end session request validation
2018-08-19 16:43:01.730 +03:00 [DBG] Start identity token validation
2018-08-19 16:43:01.730 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:43:01.734 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:43:01.734 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534685613,
    "exp": 1534685913,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.39784193606999621534685610028",
    "iat": 1534685613,
    "at_hash": "bFdw89eS-6hlNapVhH6Rbw",
    "sid": "a8c2018381cc0516014dc6692a85826c",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534685611,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:43:01.735 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODU2MTMsImV4cCI6MTUzNDY4NTkxMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjM5Nzg0MTkzNjA2OTk5NjIxNTM0Njg1NjEwMDI4IiwiaWF0IjoxNTM0Njg1NjEzLCJhdF9oYXNoIjoiYkZkdzg5ZVMtNmhsTmFwVmhINlJidyIsInNpZCI6ImE4YzIwMTgzODFjYzA1MTYwMTRkYzY2OTJhODU4MjZjIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg1NjExLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.JDZf_b5aoQEKpf1PO8YuWclZOtyZyjROkbble3NWpZIpFAkKBnH_9tQ29H53DbiKv0QSOHUgp_-HBT1LvPfBUrUmwTg0nfJoiPBNJYaXXYIgjAh9dcOfgKRwuIc1TgSb2-R66LeX9H48siTn9jEz8PVZfJ10VFFR_a8Pa09PmwJr05N8n0ZSkoKLD092h_X2-mbkL9K5qc8UEqJk7nM31aYkonfQA6ui-78rXihdkV6jlsKBWQHXzCNLBmG-KjbVVlSjEomjOYsi7_ML1SjPYVaras_88qlx_yU9ziaXToOtWXgXhGZrPplXnWC6Wz6Z5P4VDL1ImJjWxMvTwDKayw",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:43:01.735 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:43:01.741 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:43:01.742 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:43:01.743 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 16:43:01.744 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 16:43:01.744 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 16:43:01.746 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 16:43:02.209 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:43:02.210 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:43:02.210 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 16:43:02.210 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 16:43:02.211 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 16:43:02.211 +03:00 [DBG] Processing signout callback request
2018-08-19 16:43:02.211 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 16:43:02.211 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 16:43:02.211 +03:00 [INF] Successful signout callback.
2018-08-19 16:43:02.211 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 16:43:02.211 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 16:43:23.346 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:43:23.346 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:43:23.347 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:43:23.347 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:43:23.347 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:43:23.347 +03:00 [DBG] Rendering check session result
2018-08-19 16:43:32.210 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:43:32.210 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:43:32.210 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:43:32.211 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:43:32.212 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:43:32.213 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:43:32.213 +03:00 [DBG] Start end session request validation
2018-08-19 16:43:32.213 +03:00 [DBG] Start identity token validation
2018-08-19 16:43:32.213 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:43:32.218 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:43:32.218 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534686176,
    "exp": 1534686476,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.031816247601223591534686173083",
    "iat": 1534686176,
    "at_hash": "M2eVduLxHAibyGa5cn0s9A",
    "sid": "daab63eb95239d68d1f7f62cdea32214",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686174,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:43:32.218 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODYxNzYsImV4cCI6MTUzNDY4NjQ3NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjAzMTgxNjI0NzYwMTIyMzU5MTUzNDY4NjE3MzA4MyIsImlhdCI6MTUzNDY4NjE3NiwiYXRfaGFzaCI6Ik0yZVZkdUx4SEFpYnlHYTVjbjBzOUEiLCJzaWQiOiJkYWFiNjNlYjk1MjM5ZDY4ZDFmN2Y2MmNkZWEzMjIxNCIsInN1YiI6IjU3MzFmYzViLTllMWUtNDkyMi05MDA4LTYyMjY5OGZjZTBmYiIsImF1dGhfdGltZSI6MTUzNDY4NjE3NCwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.Jsc6skkYdSl5C9z69IOxVE5LdeoIllJh7aAOC2LqhQ8wP7WVFNHRK0YV2iqx_877sF8UjQxFvFUMoI8cNE1sQrxVUDrteWtJcBefvH7HwfUmqQZnc5d8WpaEF24PxmMNp7S0FIw35ZzO9wgHdv7CJPFZoGIAhJ0QuI9drig4cAUrFMt8FNZFIsFSOpSZfNA_3mmHympwTj1_mHlXYdsP4_GQOwxRSKQfwEBP2MyL4brehBWa-PEoK5NcqcVv4r9bZLRGAjCGiFm7H04BYOLgnGdpmW88aEJ9cm_boQwH0ZJKo_7nYElWsMREouy6VD2Efxdkryjxmk7i92qC1C0WzA",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:43:32.219 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:43:32.242 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:43:32.243 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:43:32.246 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:47:57.655 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:47:57.655 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:47:57.656 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:47:57.657 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:47:57.657 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:47:57.658 +03:00 [DBG] Start authorize request
2018-08-19 16:47:57.659 +03:00 [DBG] No user present in authorize request
2018-08-19 16:47:57.659 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:47:57.659 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:47:57.660 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346864776390.7577934663206338",
  "Nonce": "N0.13758955354889381534686477639",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.13758955354889381534686477639",
    "state": "15346864776390.7577934663206338",
    "prompt": "none"
  }
}
2018-08-19 16:47:57.660 +03:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2018-08-19 16:47:57.661 +03:00 [INF] {
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346864776390.7577934663206338",
  "Nonce": "N0.13758955354889381534686477639",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.13758955354889381534686477639",
    "state": "15346864776390.7577934663206338",
    "prompt": "none"
  }
}
2018-08-19 16:47:57.661 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Error": "login_required",
  "ActivityId": "0HLG5QGK9BID4:00000001",
  "TimeStamp": "2018-08-19T13:47:57Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:51:26.169 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:26.170 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:26.170 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:51:26.170 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:51:26.170 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:51:26.171 +03:00 [DBG] Rendering check session result
2018-08-19 16:51:33.013 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:33.013 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:33.013 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:51:33.016 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:51:33.016 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:51:33.016 +03:00 [DBG] Start authorize request
2018-08-19 16:51:33.018 +03:00 [DBG] No user present in authorize request
2018-08-19 16:51:33.019 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:51:33.053 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 16:51:33.059 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:51:33.063 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346864776390.7577934663206338",
  "Nonce": "N0.74688786296793021534686692962",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.74688786296793021534686692962",
    "state": "15346864776390.7577934663206338"
  }
}
2018-08-19 16:51:33.070 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:51:33.290 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:33.291 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:33.292 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:51:33.296 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:51:33.525 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:33.526 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:33.531 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:33.531 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:33.531 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:33.531 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:33.667 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:33.667 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:33.696 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:33.696 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:35.011 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:35.011 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:35.044 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:51:35.044 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:51:35.045 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:51:35.045 +03:00 [DBG] Adding auth_time claim with value: 1534686695
2018-08-19 16:51:35.045 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:51:35.046 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:51:35.061 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:35.061 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:35.063 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:51:35.064 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:51:35.064 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:51:35.064 +03:00 [DBG] Start authorize callback request
2018-08-19 16:51:35.064 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:51:35.065 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:51:35.065 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:51:35.066 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346864776390.7577934663206338",
  "Nonce": "N0.74688786296793021534686692962",
  "SessionId": "ed22f69197eea18d6b2745b46733d9b0",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.74688786296793021534686692962",
    "state": "15346864776390.7577934663206338"
  }
}
2018-08-19 16:51:35.072 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:51:35.073 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:51:35.073 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:51:35.074 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:51:35.084 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:35.084 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:35.086 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:51:35.087 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:51:36.778 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:36.778 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:36.780 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:51:36.781 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:51:36.795 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:36.796 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:36.797 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:51:36.797 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:51:36.797 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:51:36.797 +03:00 [DBG] Start authorize callback request
2018-08-19 16:51:36.798 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:51:36.798 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:51:36.799 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:51:36.799 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346864776390.7577934663206338",
  "Nonce": "N0.74688786296793021534686692962",
  "SessionId": "ed22f69197eea18d6b2745b46733d9b0",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.74688786296793021534686692962",
    "state": "15346864776390.7577934663206338"
  }
}
2018-08-19 16:51:36.805 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:51:36.805 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:51:36.805 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:51:36.805 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:51:36.806 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:51:36.806 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:51:36.813 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:51:36.841 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:51:36.841 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:51:36.842 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:51:36.855 +03:00 [DBG] UZv0hNrqY2jpX6Kh6DW3/S+K04LhRmDdjGZ2WmVRpjU= not found in database
2018-08-19 16:51:36.863 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:51:36.863 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:51:36.866 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****u9bQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****f9a3"
    }
  ],
  "ActivityId": "0HLG5QGK9BID5:0000000C",
  "TimeStamp": "2018-08-19T13:51:36Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:51:36.866 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346864776390.7577934663206338",
  "Scope": "openid profile email"
}
2018-08-19 16:51:36.867 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:51:36.867 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:51:39.601 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:39.602 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:39.602 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:51:39.602 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:51:39.603 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:51:39.603 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:51:39.603 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:51:39.604 +03:00 [DBG] Start key discovery request
2018-08-19 16:51:39.662 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:39.663 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:39.663 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:51:39.664 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:51:39.669 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:39.670 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:39.670 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:51:39.670 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:51:39.671 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:51:39.671 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:51:39.673 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:51:39.673 +03:00 [DBG] Start userinfo request
2018-08-19 16:51:39.673 +03:00 [DBG] Bearer token found in header
2018-08-19 16:51:39.676 +03:00 [DBG] UZv0hNrqY2jpX6Kh6DW3/S+K04LhRmDdjGZ2WmVRpjU= found in database: true
2018-08-19 16:51:39.704 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:51:39.704 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "080ddedd20e72ca82ec08a7ae5e62e0f999b6f23fd3728ca35986df74c91f9a3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534686696,
    "exp": 1534690296,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686695,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:51:39.705 +03:00 [DBG] Creating userinfo response
2018-08-19 16:51:39.705 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:51:39.705 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:51:39.705 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:51:39.706 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:51:39.711 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:51:39.711 +03:00 [DBG] End userinfo request
2018-08-19 16:51:44.599 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:44.600 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:44.605 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:51:44.605 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:51:44.605 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:51:44.605 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:51:44.606 +03:00 [DBG] Start end session request validation
2018-08-19 16:51:44.606 +03:00 [DBG] Start identity token validation
2018-08-19 16:51:44.606 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:51:44.613 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:51:44.614 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534686696,
    "exp": 1534686996,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.74688786296793021534686692962",
    "iat": 1534686696,
    "at_hash": "vF0f3RMlYXpP7hruWZqJ0w",
    "sid": "ed22f69197eea18d6b2745b46733d9b0",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686695,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:51:44.614 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODY2OTYsImV4cCI6MTUzNDY4Njk5NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjc0Njg4Nzg2Mjk2NzkzMDIxNTM0Njg2NjkyOTYyIiwiaWF0IjoxNTM0Njg2Njk2LCJhdF9oYXNoIjoidkYwZjNSTWxZWHBQN2hydVdacUowdyIsInNpZCI6ImVkMjJmNjkxOTdlZWExOGQ2YjI3NDViNDY3MzNkOWIwIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg2Njk1LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.EX_cGcxuAnWdrktDLxIJFTDxDwanMV9UNQWi9p02AdRCg9TR0kWQUoDLKIAt1t8NbsxEnNIT4B7Kniz1fovBYiGtz9wV7MOYSTxAtoGuZNU-DLHzvglG5oUs3ccyqsloZcvIL_ETKPdcNAQBI1qAUgCl9SvcO4xQOVOMi19E2FSyP9y1PXzLoc3-4YAYfU4aKI0Z1uTxsVo_vbt675c8PJoGT9KpB_t5JCN7y5WQHLFCHPIK2fqUFHccEptyBpIbb2oOlw2ZBbI0kclXBnvF3cU8ZxiOMJqMLPTcSByoQinp3MxDlQy5fj97P2DhB0vFJX4FBnVt93lJiOpBchu9bQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:51:44.615 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:51:44.691 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:44.692 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:44.694 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 16:51:44.695 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 16:51:44.696 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 16:51:44.699 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 16:51:44.837 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:44.837 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:44.837 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 16:51:44.839 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 16:51:44.840 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 16:51:44.842 +03:00 [DBG] Processing signout callback request
2018-08-19 16:51:44.842 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 16:51:44.843 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 16:51:44.843 +03:00 [INF] Successful signout callback.
2018-08-19 16:51:44.843 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 16:51:44.844 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 16:51:56.939 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:51:56.940 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:51:56.941 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:51:56.942 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:51:56.942 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:51:56.942 +03:00 [DBG] Rendering check session result
2018-08-19 16:52:01.635 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:01.635 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:01.636 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:52:01.636 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:52:01.637 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:52:01.637 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:52:01.637 +03:00 [DBG] Start end session request validation
2018-08-19 16:52:01.637 +03:00 [DBG] Start identity token validation
2018-08-19 16:52:01.639 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:52:01.643 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:52:01.643 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534686696,
    "exp": 1534686996,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.74688786296793021534686692962",
    "iat": 1534686696,
    "at_hash": "vF0f3RMlYXpP7hruWZqJ0w",
    "sid": "ed22f69197eea18d6b2745b46733d9b0",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686695,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:52:01.644 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODY2OTYsImV4cCI6MTUzNDY4Njk5NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjc0Njg4Nzg2Mjk2NzkzMDIxNTM0Njg2NjkyOTYyIiwiaWF0IjoxNTM0Njg2Njk2LCJhdF9oYXNoIjoidkYwZjNSTWxZWHBQN2hydVdacUowdyIsInNpZCI6ImVkMjJmNjkxOTdlZWExOGQ2YjI3NDViNDY3MzNkOWIwIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg2Njk1LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.EX_cGcxuAnWdrktDLxIJFTDxDwanMV9UNQWi9p02AdRCg9TR0kWQUoDLKIAt1t8NbsxEnNIT4B7Kniz1fovBYiGtz9wV7MOYSTxAtoGuZNU-DLHzvglG5oUs3ccyqsloZcvIL_ETKPdcNAQBI1qAUgCl9SvcO4xQOVOMi19E2FSyP9y1PXzLoc3-4YAYfU4aKI0Z1uTxsVo_vbt675c8PJoGT9KpB_t5JCN7y5WQHLFCHPIK2fqUFHccEptyBpIbb2oOlw2ZBbI0kclXBnvF3cU8ZxiOMJqMLPTcSByoQinp3MxDlQy5fj97P2DhB0vFJX4FBnVt93lJiOpBchu9bQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:52:01.644 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:52:01.654 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:01.654 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:01.657 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:52:20.707 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:20.708 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:20.708 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:52:20.710 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:52:20.710 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:52:20.710 +03:00 [DBG] Rendering check session result
2018-08-19 16:52:25.035 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:25.035 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:25.035 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:52:25.036 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:52:25.036 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:52:25.036 +03:00 [DBG] Start authorize request
2018-08-19 16:52:25.036 +03:00 [DBG] No user present in authorize request
2018-08-19 16:52:25.036 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:52:25.037 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:52:25.040 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346867450100.5693945271653024",
  "Nonce": "N0.0192572150368222061534686745010",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.0192572150368222061534686745010",
    "state": "15346867450100.5693945271653024"
  }
}
2018-08-19 16:52:25.041 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:52:25.071 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:25.071 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:25.072 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:52:25.073 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:52:25.125 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:25.125 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:25.129 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:25.129 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:25.134 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:25.136 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:25.225 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:25.225 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:25.240 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:25.240 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:26.173 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:26.175 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:26.201 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:52:26.201 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:52:26.201 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:52:26.201 +03:00 [DBG] Adding auth_time claim with value: 1534686746
2018-08-19 16:52:26.202 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:52:26.202 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:52:26.211 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:26.211 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:26.212 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:52:26.212 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:52:26.212 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:52:26.213 +03:00 [DBG] Start authorize callback request
2018-08-19 16:52:26.213 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:52:26.213 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:52:26.213 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:52:26.213 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346867450100.5693945271653024",
  "Nonce": "N0.0192572150368222061534686745010",
  "SessionId": "5de539179ef0c26fa3a02acb31112acd",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.0192572150368222061534686745010",
    "state": "15346867450100.5693945271653024"
  }
}
2018-08-19 16:52:26.218 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:52:26.219 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:52:26.219 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:52:26.219 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:52:26.224 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:26.225 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:26.226 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:52:26.226 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:52:28.065 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:28.065 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:28.067 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:52:28.071 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:52:28.086 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:28.086 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:28.087 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:52:28.087 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:52:28.087 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:52:28.088 +03:00 [DBG] Start authorize callback request
2018-08-19 16:52:28.088 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:52:28.089 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:52:28.089 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:52:28.089 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346867450100.5693945271653024",
  "Nonce": "N0.0192572150368222061534686745010",
  "SessionId": "5de539179ef0c26fa3a02acb31112acd",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.0192572150368222061534686745010",
    "state": "15346867450100.5693945271653024"
  }
}
2018-08-19 16:52:28.095 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:52:28.096 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:52:28.097 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:52:28.097 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:52:28.098 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:52:28.098 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:52:28.104 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:52:28.138 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:52:28.138 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:52:28.138 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:52:28.153 +03:00 [DBG] MK0RZfpw2COHmxlSmhFMxHHN4jXgTuxwR77mPiUEltY= not found in database
2018-08-19 16:52:28.160 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:52:28.160 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:52:28.164 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****g18Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****56f1"
    }
  ],
  "ActivityId": "0HLG5QGK9BID5:0000001E",
  "TimeStamp": "2018-08-19T13:52:28Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:52:28.164 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346867450100.5693945271653024",
  "Scope": "openid profile email"
}
2018-08-19 16:52:28.165 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:52:28.165 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:52:31.371 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:31.372 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:31.372 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:52:31.376 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:52:31.376 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:52:31.377 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:52:31.377 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:52:31.377 +03:00 [DBG] Start key discovery request
2018-08-19 16:52:31.436 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:31.447 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:31.447 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:52:31.448 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:52:31.455 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:31.456 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:31.457 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:52:31.457 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:52:31.457 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:52:31.458 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:52:31.458 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:52:31.458 +03:00 [DBG] Start userinfo request
2018-08-19 16:52:31.458 +03:00 [DBG] Bearer token found in header
2018-08-19 16:52:31.462 +03:00 [DBG] MK0RZfpw2COHmxlSmhFMxHHN4jXgTuxwR77mPiUEltY= found in database: true
2018-08-19 16:52:31.481 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:52:31.482 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "20fb3a2c805cc82c278b1830ebd4f32cded425b97701b4d52440a780e06e56f1",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534686748,
    "exp": 1534690348,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686746,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:52:31.482 +03:00 [DBG] Creating userinfo response
2018-08-19 16:52:31.482 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:52:31.483 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:52:31.483 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:52:31.483 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:52:31.493 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:52:31.494 +03:00 [DBG] End userinfo request
2018-08-19 16:52:35.100 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:35.100 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:35.101 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:52:35.101 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:52:35.101 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:52:35.101 +03:00 [DBG] Rendering check session result
2018-08-19 16:52:41.509 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:41.509 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:41.510 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:52:41.511 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:52:41.511 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:52:41.511 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:52:41.512 +03:00 [DBG] Start end session request validation
2018-08-19 16:52:41.512 +03:00 [DBG] Start identity token validation
2018-08-19 16:52:41.512 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:52:41.516 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:52:41.516 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534686748,
    "exp": 1534687048,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.0192572150368222061534686745010",
    "iat": 1534686748,
    "at_hash": "Bj-ViUFcGpq3SAgaKOM-1Q",
    "sid": "5de539179ef0c26fa3a02acb31112acd",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686746,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:52:41.516 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODY3NDgsImV4cCI6MTUzNDY4NzA0OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjAxOTI1NzIxNTAzNjgyMjIwNjE1MzQ2ODY3NDUwMTAiLCJpYXQiOjE1MzQ2ODY3NDgsImF0X2hhc2giOiJCai1WaVVGY0dwcTNTQWdhS09NLTFRIiwic2lkIjoiNWRlNTM5MTc5ZWYwYzI2ZmEzYTAyYWNiMzExMTJhY2QiLCJzdWIiOiI1NzMxZmM1Yi05ZTFlLTQ5MjItOTAwOC02MjI2OThmY2UwZmIiLCJhdXRoX3RpbWUiOjE1MzQ2ODY3NDYsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.HBEmqSoJqKRpBL1ZFXS5iDUxMKsTNfTkjsdTR7rQG2A9j9iK2Cn_B8gcb14TE-C4KsP0kVDR_zpdtCq7Qz_4Ef8MVV9KxT0McRg9UjEn6eVdtHFfffsxen3daqeaskWJf08I8IdQ3FzrGHK0PlX3F11FGig0hKS9OAR_xKtUFPDcRi7BIDk1upbVI6g5VTkWYV15umnNQkKS8ugh3-GsPOcyLJSGMh-sN8xlJl9W9EfDNA4P27rTkpcpMmMVcBudeHkiHEMawlqUDvk5-pZ-IMq861dUscSbmGJxgDyQGX1q5uoVoP8_MmTQhh6aJptYQBj4TST0aum9NeoRBug18Q",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:52:41.516 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:52:41.557 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:41.558 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:41.560 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 16:52:41.560 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 16:52:41.560 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 16:52:41.564 +03:00 [DBG] removing 2 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 16:52:41.654 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:52:41.654 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:52:41.655 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 16:52:41.655 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 16:52:41.656 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 16:52:41.656 +03:00 [DBG] Processing signout callback request
2018-08-19 16:52:41.656 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 16:52:41.656 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 16:52:41.657 +03:00 [INF] Successful signout callback.
2018-08-19 16:52:41.657 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 16:52:41.657 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 16:54:26.542 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:54:26.542 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:54:26.542 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:54:26.542 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:54:26.543 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:54:26.543 +03:00 [DBG] Rendering check session result
2018-08-19 16:54:36.611 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:54:36.611 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:54:36.611 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 16:54:36.612 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 16:54:36.612 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 16:54:36.613 +03:00 [DBG] Processing signout request for anonymous
2018-08-19 16:54:36.613 +03:00 [DBG] Start end session request validation
2018-08-19 16:54:36.613 +03:00 [DBG] Start identity token validation
2018-08-19 16:54:36.613 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 16:54:36.617 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:54:36.617 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534686748,
    "exp": 1534687048,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.0192572150368222061534686745010",
    "iat": 1534686748,
    "at_hash": "Bj-ViUFcGpq3SAgaKOM-1Q",
    "sid": "5de539179ef0c26fa3a02acb31112acd",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686746,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:54:36.617 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODY3NDgsImV4cCI6MTUzNDY4NzA0OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjAxOTI1NzIxNTAzNjgyMjIwNjE1MzQ2ODY3NDUwMTAiLCJpYXQiOjE1MzQ2ODY3NDgsImF0X2hhc2giOiJCai1WaVVGY0dwcTNTQWdhS09NLTFRIiwic2lkIjoiNWRlNTM5MTc5ZWYwYzI2ZmEzYTAyYWNiMzExMTJhY2QiLCJzdWIiOiI1NzMxZmM1Yi05ZTFlLTQ5MjItOTAwOC02MjI2OThmY2UwZmIiLCJhdXRoX3RpbWUiOjE1MzQ2ODY3NDYsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.HBEmqSoJqKRpBL1ZFXS5iDUxMKsTNfTkjsdTR7rQG2A9j9iK2Cn_B8gcb14TE-C4KsP0kVDR_zpdtCq7Qz_4Ef8MVV9KxT0McRg9UjEn6eVdtHFfffsxen3daqeaskWJf08I8IdQ3FzrGHK0PlX3F11FGig0hKS9OAR_xKtUFPDcRi7BIDk1upbVI6g5VTkWYV15umnNQkKS8ugh3-GsPOcyLJSGMh-sN8xlJl9W9EfDNA4P27rTkpcpMmMVcBudeHkiHEMawlqUDvk5-pZ-IMq861dUscSbmGJxgDyQGX1q5uoVoP8_MmTQhh6aJptYQBj4TST0aum9NeoRBug18Q",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 16:54:36.618 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 16:54:36.669 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:54:36.671 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:54:36.675 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-19 16:54:47.494 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:54:47.494 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:54:47.495 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:54:47.495 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:54:47.495 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:54:47.495 +03:00 [DBG] Rendering check session result
2018-08-19 16:55:04.266 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:04.266 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:04.266 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 16:55:04.267 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 16:55:04.267 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 16:55:04.267 +03:00 [DBG] Rendering check session result
2018-08-19 16:55:10.247 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:10.247 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:10.248 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 16:55:10.249 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 16:55:10.252 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 16:55:10.252 +03:00 [DBG] Start authorize request
2018-08-19 16:55:10.252 +03:00 [DBG] No user present in authorize request
2018-08-19 16:55:10.252 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:55:10.261 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-19 16:55:10.268 +03:00 [DBG] Found [] API scopes in database
2018-08-19 16:55:10.269 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:55:10.270 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346869102240.2863887674915805",
  "Nonce": "N0.4945764655347411534686910224",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.4945764655347411534686910224",
    "state": "15346869102240.2863887674915805"
  }
}
2018-08-19 16:55:10.271 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 16:55:10.446 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:10.449 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:10.450 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:55:10.451 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:55:10.491 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:10.491 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:10.499 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:10.499 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:10.499 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:10.499 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:10.507 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:10.507 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:10.508 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:10.508 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:10.766 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:10.766 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:10.791 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:10.791 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:18.236 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:18.236 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:18.257 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:55:18.258 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 16:55:18.258 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 16:55:18.258 +03:00 [DBG] Adding auth_time claim with value: 1534686918
2018-08-19 16:55:18.259 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:55:18.259 +03:00 [INF] User with username = okn.aslnk@gmail.com logged in. 
2018-08-19 16:55:18.275 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:18.275 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:18.276 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:55:18.276 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:55:18.276 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:55:18.277 +03:00 [DBG] Start authorize callback request
2018-08-19 16:55:18.277 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:55:18.277 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:55:18.277 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:55:18.278 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346869102240.2863887674915805",
  "Nonce": "N0.4945764655347411534686910224",
  "SessionId": "b24e5bca3402a97330017af95bfd6aec",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.4945764655347411534686910224",
    "state": "15346869102240.2863887674915805"
  }
}
2018-08-19 16:55:18.283 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:55:18.283 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:55:18.283 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:55:18.283 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 16:55:18.300 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:18.301 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:18.302 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:55:18.302 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:55:21.081 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:21.081 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:21.083 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:55:21.084 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:55:21.105 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:21.106 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:21.106 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 16:55:21.107 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 16:55:21.107 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 16:55:21.107 +03:00 [DBG] Start authorize callback request
2018-08-19 16:55:21.108 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:55:21.108 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 16:55:21.109 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 16:55:21.109 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346869102240.2863887674915805",
  "Nonce": "N0.4945764655347411534686910224",
  "SessionId": "b24e5bca3402a97330017af95bfd6aec",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.4945764655347411534686910224",
    "state": "15346869102240.2863887674915805"
  }
}
2018-08-19 16:55:21.115 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: false
2018-08-19 16:55:21.115 +03:00 [DBG] user_consent grant with value: IoClient_Id|5731fc5b-9e1e-4922-9008-622698fce0fb not found in store.
2018-08-19 16:55:21.115 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 16:55:21.116 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 16:55:21.116 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 16:55:21.116 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:55:21.124 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= not found in database
2018-08-19 16:55:21.153 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 16:55:21.153 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 16:55:21.153 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 16:55:21.166 +03:00 [DBG] lUeT4rrEzx8tY1sI/d3uGKJhwqUnaE9oAiGKNTlhz8k= not found in database
2018-08-19 16:55:21.186 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 16:55:21.187 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 16:55:21.190 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****l_CQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****5489"
    }
  ],
  "ActivityId": "0HLG5QGK9BID5:00000033",
  "TimeStamp": "2018-08-19T13:55:21Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 16:55:21.191 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346869102240.2863887674915805",
  "Scope": "openid profile email"
}
2018-08-19 16:55:21.191 +03:00 [DBG] Augmenting SignInContext
2018-08-19 16:55:21.192 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 16:55:24.211 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:24.212 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:24.212 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 16:55:24.213 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:55:24.215 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 16:55:24.221 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 16:55:24.221 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 16:55:24.221 +03:00 [DBG] Start key discovery request
2018-08-19 16:55:24.344 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:24.345 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:24.346 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:55:24.346 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:55:24.351 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 16:55:24.351 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 16:55:24.351 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 16:55:24.351 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 16:55:24.352 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 16:55:24.352 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 16:55:24.352 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 16:55:24.352 +03:00 [DBG] Start userinfo request
2018-08-19 16:55:24.352 +03:00 [DBG] Bearer token found in header
2018-08-19 16:55:24.354 +03:00 [DBG] lUeT4rrEzx8tY1sI/d3uGKJhwqUnaE9oAiGKNTlhz8k= found in database: true
2018-08-19 16:55:24.369 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 16:55:24.369 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "3d9ec523e9f02d317193b6ca31e14eb612b983b60d36aa9d7460719a5c205489",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534686921,
    "exp": 1534690521,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686918,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 16:55:24.370 +03:00 [DBG] Creating userinfo response
2018-08-19 16:55:24.370 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:55:24.370 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:55:24.370 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 16:55:24.370 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 16:55:24.376 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 16:55:24.377 +03:00 [DBG] End userinfo request
2018-08-19 17:00:23.246 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:00:23.247 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:00:23.248 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 17:00:23.248 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 17:00:23.248 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 17:00:23.249 +03:00 [DBG] Start authorize request
2018-08-19 17:00:23.249 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 17:00:23.249 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:00:23.251 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:00:23.251 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346872232330.09911178834374601",
  "Nonce": "N0.32554979962276331534687223233",
  "PromptMode": "none",
  "SessionId": "b24e5bca3402a97330017af95bfd6aec",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.32554979962276331534687223233",
    "state": "15346872232330.09911178834374601",
    "prompt": "none"
  }
}
2018-08-19 17:00:23.257 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: true
2018-08-19 17:00:23.266 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-19 17:00:23.266 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 17:00:23.267 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 17:00:23.267 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 17:00:23.282 +03:00 [DBG] aYa9b29l59sgS6AybFXcaFoBXzJbPHrLS2z6Br5ZOWo= not found in database
2018-08-19 17:00:23.319 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 17:00:23.321 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 17:00:23.325 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****R1eA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7ee2"
    }
  ],
  "ActivityId": "0HLG5QGK9BIDD:00000001",
  "TimeStamp": "2018-08-19T14:00:23Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 17:00:23.325 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "State": "15346872232330.09911178834374601",
  "Scope": "openid profile email"
}
2018-08-19 17:03:17.263 +03:00 [INF] Clearing 0 tokens
2018-08-19 17:30:10.490 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:30:10.490 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:30:10.533 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 17:30:10.533 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 17:30:10.533 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 17:30:10.533 +03:00 [DBG] Rendering check session result
2018-08-19 17:30:38.023 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:30:38.023 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:30:38.024 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 17:30:38.025 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 17:30:38.025 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 17:30:38.025 +03:00 [DBG] Start authorize request
2018-08-19 17:30:38.025 +03:00 [DBG] User in authorize request: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 17:30:38.025 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:30:38.049 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 17:30:38.055 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-19 17:30:38.058 +03:00 [DBG] Found [] API scopes in database
2018-08-19 17:30:38.059 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:30:38.059 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346872232330.09911178834374601",
  "Nonce": "N0.99966321019691451534689038005",
  "SessionId": "b24e5bca3402a97330017af95bfd6aec",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.99966321019691451534689038005",
    "state": "15346872232330.09911178834374601"
  }
}
2018-08-19 17:30:38.068 +03:00 [DBG] M1tSrCiySqqkc5dtZ/5DM8j4qdXjOQg6iT/hbmmwdvw= found in database: true
2018-08-19 17:30:38.074 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-19 17:30:38.074 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 17:30:38.074 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 17:30:38.075 +03:00 [DBG] Getting claims for access token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 17:30:38.090 +03:00 [DBG] 2Z69zizE37AIb7ihm/sbRMxbHOrrLpQLQGrJxdUe7mI= not found in database
2018-08-19 17:30:38.812 +03:00 [DBG] Getting claims for identity token for subject: 5731fc5b-9e1e-4922-9008-622698fce0fb and client: IoClient_Id
2018-08-19 17:30:38.812 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 17:30:38.818 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****vdNQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7262"
    }
  ],
  "ActivityId": "0HLG5QGK9BIDE:00000002",
  "TimeStamp": "2018-08-19T14:30:38Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 17:30:38.819 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346872232330.09911178834374601",
  "Scope": "openid profile email"
}
2018-08-19 17:30:41.288 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:30:41.288 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:30:41.289 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 17:30:41.291 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-19 17:30:41.291 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 17:30:41.292 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 17:30:41.292 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 17:30:41.292 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 17:30:41.292 +03:00 [DBG] Start key discovery request
2018-08-19 17:30:41.349 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:30:41.349 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:30:41.349 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 17:30:41.350 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 17:30:41.351 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:30:41.351 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:30:41.351 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 17:30:41.351 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 17:30:41.351 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 17:30:41.352 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 17:30:41.352 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 17:30:41.352 +03:00 [DBG] Start userinfo request
2018-08-19 17:30:41.352 +03:00 [DBG] Bearer token found in header
2018-08-19 17:30:41.353 +03:00 [DBG] 2Z69zizE37AIb7ihm/sbRMxbHOrrLpQLQGrJxdUe7mI= found in database: true
2018-08-19 17:30:41.371 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 17:30:41.371 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "3e3824ec5876e8f382873cec3723981c713ef1d7b8c9a06ef68ea1d700987262",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534689038,
    "exp": 1534692638,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686918,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 17:30:41.372 +03:00 [DBG] Creating userinfo response
2018-08-19 17:30:41.372 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 17:30:41.372 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 17:30:41.373 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 17:30:41.373 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 17:30:41.379 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 17:30:41.379 +03:00 [DBG] End userinfo request
2018-08-19 17:30:45.833 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:30:45.834 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:30:45.835 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 17:30:45.836 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 17:30:45.836 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 17:30:45.836 +03:00 [DBG] Processing signout request for 5731fc5b-9e1e-4922-9008-622698fce0fb
2018-08-19 17:30:45.837 +03:00 [DBG] Start end session request validation
2018-08-19 17:30:45.837 +03:00 [DBG] Start identity token validation
2018-08-19 17:30:45.837 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 17:30:45.844 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 17:30:45.844 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534689038,
    "exp": 1534689338,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.99966321019691451534689038005",
    "iat": 1534689038,
    "at_hash": "jB30JwaXYaOUqi3K3JTKiw",
    "sid": "b24e5bca3402a97330017af95bfd6aec",
    "sub": "5731fc5b-9e1e-4922-9008-622698fce0fb",
    "auth_time": 1534686918,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 17:30:45.845 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "5731fc5b-9e1e-4922-9008-622698fce0fb",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2ODkwMzgsImV4cCI6MTUzNDY4OTMzOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjk5OTY2MzIxMDE5NjkxNDUxNTM0Njg5MDM4MDA1IiwiaWF0IjoxNTM0Njg5MDM4LCJhdF9oYXNoIjoiakIzMEp3YVhZYU9VcWkzSzNKVEtpdyIsInNpZCI6ImIyNGU1YmNhMzQwMmE5NzMzMDAxN2FmOTViZmQ2YWVjIiwic3ViIjoiNTczMWZjNWItOWUxZS00OTIyLTkwMDgtNjIyNjk4ZmNlMGZiIiwiYXV0aF90aW1lIjoxNTM0Njg2OTE4LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.VeY_mje_U8ZxYsh78_pQ8vZnk6XVjxIP-qYWtT6vQ2QnpTwXGUyxgHF38PvBRX8LYjbMnZsO204zIYuTS9Vo0FPCFunOq5RWhiF8oh-7z54Odg2eehR2Woe9HjQmZSgPNyiP-curU1HxVjaM23FY-4zuWOG7oOOLuMnOrCWRykG4WkBksYBKeMWFnn3CxH9IbUIOXr27LEzCfL53yfOsT3rHO2dB9aMsSdxnJxvdnnkLtx4wVD95yaBIQIZzpQ7gF7zuRd0g4Q0VpcAOVeKD-IhCDs0OdNO1DYVTfRmbiWF9hkHhme3U89z2Sv3fRWtFkH3VJhPNgugqmF2zbDvdNQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 17:30:45.845 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 17:30:45.851 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:30:45.851 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:30:45.853 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 17:30:45.853 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 17:30:45.854 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 17:30:45.856 +03:00 [DBG] removing 4 persisted grants from database for subject 5731fc5b-9e1e-4922-9008-622698fce0fb, clientId IoClient_Id
2018-08-19 17:30:46.269 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:30:46.269 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:30:46.269 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 17:30:46.270 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 17:30:46.270 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 17:30:46.270 +03:00 [DBG] Processing signout callback request
2018-08-19 17:30:46.271 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 17:30:46.271 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 17:30:46.271 +03:00 [INF] Successful signout callback.
2018-08-19 17:30:46.271 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 17:30:46.271 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 17:35:40.974 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported cultures '["en-GB","en"]'.
2018-08-19 17:35:40.975 +03:00 [WRN] AcceptLanguageHeaderRequestCultureProvider returned the following unsupported UI Cultures '["en-GB","en"]'.
2018-08-19 17:35:40.975 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 17:35:40.976 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 17:35:40.976 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 17:35:40.976 +03:00 [DBG] Start authorize request
2018-08-19 17:35:40.979 +03:00 [DBG] No user present in authorize request
2018-08-19 17:35:40.980 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:35:40.980 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:35:40.982 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346893409590.5194076014730531",
  "Nonce": "N0.82346350813879421534689340959",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.82346350813879421534689340959",
    "state": "15346893409590.5194076014730531",
    "prompt": "none"
  }
}
2018-08-19 17:35:40.982 +03:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2018-08-19 17:35:40.983 +03:00 [INF] {
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346893409590.5194076014730531",
  "Nonce": "N0.82346350813879421534689340959",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.82346350813879421534689340959",
    "state": "15346893409590.5194076014730531",
    "prompt": "none"
  }
}
2018-08-19 17:35:40.983 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Error": "login_required",
  "ActivityId": "0HLG5QGK9BIDG:00000001",
  "TimeStamp": "2018-08-19T14:35:40Z",
  "ProcessId": 18044,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-19 17:48:18.577 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 17:48:18.577 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 17:48:18.578 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 17:48:18.579 +03:00 [DBG] Rendering check session result
2018-08-19 17:48:24.717 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 17:48:24.719 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 17:48:24.719 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 17:48:24.720 +03:00 [DBG] Start authorize request
2018-08-19 17:48:24.720 +03:00 [DBG] No user present in authorize request
2018-08-19 17:48:24.720 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:48:24.739 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 17:48:24.748 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-19 17:48:24.751 +03:00 [DBG] Found [] API scopes in database
2018-08-19 17:48:24.752 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:48:24.752 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346901046880.9794976465064422",
  "Nonce": "N0.211588778185912931534690104688",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.211588778185912931534690104688",
    "state": "15346901046880.9794976465064422"
  }
}
2018-08-19 17:48:24.756 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 17:48:24.761 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:48:24.761 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:50:00.326 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 17:50:00.327 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 17:50:00.327 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 17:50:00.327 +03:00 [DBG] Rendering check session result
2018-08-19 17:50:03.455 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 17:50:03.456 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 17:50:03.456 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 17:50:03.456 +03:00 [DBG] Start authorize request
2018-08-19 17:50:03.456 +03:00 [DBG] No user present in authorize request
2018-08-19 17:50:03.456 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:50:03.457 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:50:03.457 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346901046880.9794976465064422",
  "Nonce": "N0.299268886765662771534690203429",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.299268886765662771534690203429",
    "state": "15346901046880.9794976465064422"
  }
}
2018-08-19 17:50:03.457 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 17:50:03.465 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:50:03.465 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:50:33.132 +03:00 [DBG] Augmenting SignInContext
2018-08-19 17:50:33.132 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 17:50:33.132 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 17:50:33.132 +03:00 [DBG] Adding auth_time claim with value: 1534690233
2018-08-19 17:50:33.133 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 17:50:33.133 +03:00 [INF] User created a new account with password.
2018-08-19 17:50:33.137 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 17:50:33.138 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 17:50:33.138 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 17:50:33.138 +03:00 [DBG] Start authorize callback request
2018-08-19 17:50:33.139 +03:00 [DBG] User in authorize request: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:50:33.139 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:50:33.140 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:50:33.140 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346901046880.9794976465064422",
  "Nonce": "N0.299268886765662771534690203429",
  "SessionId": "66f9e559bce38b0bffdaac460dcc24ea",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.299268886765662771534690203429",
    "state": "15346901046880.9794976465064422"
  }
}
2018-08-19 17:50:33.145 +03:00 [DBG] 4QbPMm7JcPcKVMjPOfRdcyn9iXQ34zfSJ/DZfpD9K8U= found in database: false
2018-08-19 17:50:33.145 +03:00 [DBG] user_consent grant with value: IoClient_Id|f9fc890f-472a-41cb-ab8d-ad7b5dffdc89 not found in store.
2018-08-19 17:50:33.145 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 17:50:33.145 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 17:50:33.149 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:50:33.150 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:50:35.337 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:50:35.337 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:50:35.349 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 17:50:35.349 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 17:50:35.350 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 17:50:35.350 +03:00 [DBG] Start authorize callback request
2018-08-19 17:50:35.351 +03:00 [DBG] User in authorize request: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:50:35.351 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:50:35.351 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:50:35.352 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346901046880.9794976465064422",
  "Nonce": "N0.299268886765662771534690203429",
  "SessionId": "66f9e559bce38b0bffdaac460dcc24ea",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.299268886765662771534690203429",
    "state": "15346901046880.9794976465064422"
  }
}
2018-08-19 17:50:35.356 +03:00 [DBG] 4QbPMm7JcPcKVMjPOfRdcyn9iXQ34zfSJ/DZfpD9K8U= found in database: false
2018-08-19 17:50:35.356 +03:00 [DBG] user_consent grant with value: IoClient_Id|f9fc890f-472a-41cb-ab8d-ad7b5dffdc89 not found in store.
2018-08-19 17:50:35.357 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 17:50:35.357 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 17:50:35.357 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 17:50:35.357 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:50:35.362 +03:00 [DBG] 4QbPMm7JcPcKVMjPOfRdcyn9iXQ34zfSJ/DZfpD9K8U= not found in database
2018-08-19 17:50:35.409 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 17:50:35.409 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 17:50:35.409 +03:00 [DBG] Getting claims for access token for subject: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:50:35.425 +03:00 [DBG] Vv9EcDFBeyTOjfPQEeRBxGAO9Fq9fPkdhLTuwCcoNa0= not found in database
2018-08-19 17:50:35.431 +03:00 [DBG] Getting claims for identity token for subject: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89 and client: IoClient_Id
2018-08-19 17:50:35.431 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 17:50:35.437 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hYjg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****db2d"
    }
  ],
  "ActivityId": "0HLG5QGK9BIDL:0000000F",
  "TimeStamp": "2018-08-19T14:50:35Z",
  "ProcessId": 18044,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-19 17:50:35.437 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346901046880.9794976465064422",
  "Scope": "openid profile email"
}
2018-08-19 17:50:35.438 +03:00 [DBG] Augmenting SignInContext
2018-08-19 17:50:35.438 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 17:50:36.711 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 17:50:36.713 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-19 17:50:36.714 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 17:50:36.714 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 17:50:36.714 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 17:50:36.715 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 17:50:36.715 +03:00 [DBG] Start key discovery request
2018-08-19 17:50:36.788 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 17:50:36.788 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 17:50:36.799 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 17:50:36.800 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 17:50:36.800 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 17:50:36.801 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 17:50:36.801 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 17:50:36.801 +03:00 [DBG] Start userinfo request
2018-08-19 17:50:36.801 +03:00 [DBG] Bearer token found in header
2018-08-19 17:50:36.804 +03:00 [DBG] Vv9EcDFBeyTOjfPQEeRBxGAO9Fq9fPkdhLTuwCcoNa0= found in database: true
2018-08-19 17:50:36.836 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 17:50:36.837 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "04ec5a39280d57a06c5e25ce48cbf0dd611a7dd8d7a0d183d8e229d10fb0db2d",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534690235,
    "exp": 1534693835,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
    "auth_time": 1534690233,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 17:50:36.837 +03:00 [DBG] Creating userinfo response
2018-08-19 17:50:36.838 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 17:50:36.838 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 17:50:36.838 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 17:50:36.838 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 17:50:36.847 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 17:50:36.847 +03:00 [DBG] End userinfo request
2018-08-19 17:52:40.290 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-19 17:52:40.305 +03:00 [DBG] Stopping token cleanup
2018-08-19 17:53:10.876 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-19 17:53:10.909 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-19 17:53:10.910 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-19 17:53:10.910 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-19 17:53:10.910 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-19 17:53:11.054 +03:00 [DBG] Starting token cleanup
2018-08-19 17:53:25.501 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 17:53:25.509 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 17:53:25.509 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 17:53:25.513 +03:00 [DBG] Rendering check session result
2018-08-19 17:53:27.573 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 17:53:27.596 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 17:53:27.596 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 17:53:27.628 +03:00 [DBG] Processing signout request for f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:53:27.646 +03:00 [DBG] Start end session request validation
2018-08-19 17:53:27.665 +03:00 [DBG] Start identity token validation
2018-08-19 17:53:30.234 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 17:53:30.241 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 17:53:30.600 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 17:53:30.612 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534690235,
    "exp": 1534690535,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.299268886765662771534690203429",
    "iat": 1534690235,
    "at_hash": "Je_7_C4rkP32arpY8v80wg",
    "sid": "66f9e559bce38b0bffdaac460dcc24ea",
    "sub": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
    "auth_time": 1534690233,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 17:53:30.639 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2OTAyMzUsImV4cCI6MTUzNDY5MDUzNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjI5OTI2ODg4Njc2NTY2Mjc3MTUzNDY5MDIwMzQyOSIsImlhdCI6MTUzNDY5MDIzNSwiYXRfaGFzaCI6IkplXzdfQzRya1AzMmFycFk4djgwd2ciLCJzaWQiOiI2NmY5ZTU1OWJjZTM4YjBiZmZkYWFjNDYwZGNjMjRlYSIsInN1YiI6ImY5ZmM4OTBmLTQ3MmEtNDFjYi1hYjhkLWFkN2I1ZGZmZGM4OSIsImF1dGhfdGltZSI6MTUzNDY5MDIzMywiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.QbeNV3L0G5YjtPYp7K-gEFY6fsH6mUkIkgfnAqlIZ_mcWa5v8Nn4Ixl1nHW2aJGLsmIBgyLlQiUbn1HfcRNowlHfZwP0e2KLPh1c5vPXwhF7n2R4bSVdb_C-0q1BUthqqckEn5OEjaXYHG1JJBcUwyXGJcgjbGu7QfAfVjRv5OcPq3j-6hwQb14mXw221-HbqRO6BxbiMXy4eVoR3TN-ek2naWpV5dI_zjKDu1DwLh36pArk32StaD017vxGDfWC9s-9C-8b7ncxt5Z1gfb4MfKKCd6rLcGtHLKz9QApan4wHsxFcYR4lFyC_HBJo1uAdlCS7c470TSe4eIt6BhYjg",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 17:53:30.641 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 17:53:30.955 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 17:53:30.957 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 17:53:30.962 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 17:53:31.014 +03:00 [DBG] removing 2 persisted grants from database for subject f9fc890f-472a-41cb-ab8d-ad7b5dffdc89, clientId IoClient_Id
2018-08-19 17:53:31.287 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 17:53:31.291 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 17:53:31.300 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 17:53:31.309 +03:00 [DBG] Processing signout callback request
2018-08-19 17:53:31.326 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 17:53:31.326 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 17:53:31.327 +03:00 [INF] Successful signout callback.
2018-08-19 17:53:31.327 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 17:53:31.327 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 17:55:08.899 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-19 17:55:08.933 +03:00 [DBG] Stopping token cleanup
2018-08-19 17:55:23.330 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-19 17:55:23.365 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-19 17:55:23.365 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-19 17:55:23.366 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-19 17:55:23.366 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-19 17:55:23.490 +03:00 [DBG] Starting token cleanup
2018-08-19 17:55:38.054 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 17:55:38.080 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 17:55:38.081 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 17:55:38.087 +03:00 [DBG] Start authorize request
2018-08-19 17:55:38.102 +03:00 [DBG] No user present in authorize request
2018-08-19 17:55:38.109 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:55:40.064 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 17:55:40.169 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-19 17:55:40.297 +03:00 [DBG] Found [] API scopes in database
2018-08-19 17:55:40.317 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:55:40.339 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346905378670.11837912212378576",
  "Nonce": "N0.79268833800224251534690537867",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.79268833800224251534690537867",
    "state": "15346905378670.11837912212378576",
    "prompt": "none"
  }
}
2018-08-19 17:55:40.351 +03:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2018-08-19 17:55:40.355 +03:00 [INF] {
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346905378670.11837912212378576",
  "Nonce": "N0.79268833800224251534690537867",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.79268833800224251534690537867",
    "state": "15346905378670.11837912212378576",
    "prompt": "none"
  }
}
2018-08-19 17:55:40.377 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Error": "login_required",
  "ActivityId": "0HLG5SF9JHNF4:00000001",
  "TimeStamp": "2018-08-19T14:55:40Z",
  "ProcessId": 27324,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-19 17:55:53.093 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 17:55:53.096 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 17:55:53.098 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 17:55:53.101 +03:00 [DBG] Rendering check session result
2018-08-19 17:55:56.713 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 17:55:56.715 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 17:55:56.715 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 17:55:56.715 +03:00 [DBG] Start authorize request
2018-08-19 17:55:56.715 +03:00 [DBG] No user present in authorize request
2018-08-19 17:55:56.715 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:55:56.716 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:55:56.716 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346905566880.020553077336838532",
  "Nonce": "N0.298484005640468731534690556688",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.298484005640468731534690556688",
    "state": "15346905566880.020553077336838532"
  }
}
2018-08-19 17:55:56.720 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 17:55:56.967 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:55:56.968 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:56:48.136 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-19 17:56:48.166 +03:00 [DBG] Stopping token cleanup
2018-08-19 17:57:20.605 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-19 17:57:20.635 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-19 17:57:20.636 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-19 17:57:20.636 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-19 17:57:20.636 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-19 17:57:20.750 +03:00 [DBG] Starting token cleanup
2018-08-19 17:57:29.604 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-19 17:57:29.612 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-19 17:57:29.613 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-19 17:57:29.616 +03:00 [DBG] Rendering check session result
2018-08-19 17:57:34.282 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 17:57:34.335 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 17:57:34.335 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 17:57:34.343 +03:00 [DBG] Start authorize request
2018-08-19 17:57:34.362 +03:00 [DBG] No user present in authorize request
2018-08-19 17:57:34.374 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:57:36.427 +03:00 [DBG] IoClient_Id found in database: true
2018-08-19 17:57:36.538 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-19 17:57:36.656 +03:00 [DBG] Found [] API scopes in database
2018-08-19 17:57:36.676 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:57:36.701 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346905566880.020553077336838532",
  "Nonce": "N0.213782913863313161534690654253",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.213782913863313161534690654253",
    "state": "15346905566880.020553077336838532"
  }
}
2018-08-19 17:57:36.712 +03:00 [INF] Showing login: User is not authenticated
2018-08-19 17:57:36.913 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:57:36.914 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:57:45.318 +03:00 [DBG] Augmenting SignInContext
2018-08-19 17:57:45.321 +03:00 [DBG] Adding idp claim with value: local
2018-08-19 17:57:45.322 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-19 17:57:45.322 +03:00 [DBG] Adding auth_time claim with value: 1534690665
2018-08-19 17:57:45.338 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 17:57:45.341 +03:00 [INF] User with username = okan@okan.com logged in. 
2018-08-19 17:57:45.373 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 17:57:45.374 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 17:57:45.374 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 17:57:45.385 +03:00 [DBG] Start authorize callback request
2018-08-19 17:57:45.392 +03:00 [DBG] User in authorize request: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:57:45.392 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:57:45.393 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:57:45.393 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346905566880.020553077336838532",
  "Nonce": "N0.213782913863313161534690654253",
  "SessionId": "9e1db822da4f1b980c5a3aab65d0cb24",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.213782913863313161534690654253",
    "state": "15346905566880.020553077336838532"
  }
}
2018-08-19 17:57:45.478 +03:00 [DBG] 4QbPMm7JcPcKVMjPOfRdcyn9iXQ34zfSJ/DZfpD9K8U= found in database: false
2018-08-19 17:57:45.479 +03:00 [DBG] user_consent grant with value: IoClient_Id|f9fc890f-472a-41cb-ab8d-ad7b5dffdc89 not found in store.
2018-08-19 17:57:45.480 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 17:57:45.480 +03:00 [INF] Showing consent: User has not yet consented
2018-08-19 17:57:45.500 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:57:45.503 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:57:48.560 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:57:48.564 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:57:48.602 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-19 17:57:48.602 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-19 17:57:48.603 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-19 17:57:48.603 +03:00 [DBG] Start authorize callback request
2018-08-19 17:57:48.609 +03:00 [DBG] User in authorize request: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:57:48.610 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 17:57:48.610 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 17:57:48.610 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346905566880.020553077336838532",
  "Nonce": "N0.213782913863313161534690654253",
  "SessionId": "9e1db822da4f1b980c5a3aab65d0cb24",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.213782913863313161534690654253",
    "state": "15346905566880.020553077336838532"
  }
}
2018-08-19 17:57:48.619 +03:00 [DBG] 4QbPMm7JcPcKVMjPOfRdcyn9iXQ34zfSJ/DZfpD9K8U= found in database: false
2018-08-19 17:57:48.621 +03:00 [DBG] user_consent grant with value: IoClient_Id|f9fc890f-472a-41cb-ab8d-ad7b5dffdc89 not found in store.
2018-08-19 17:57:48.624 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-19 17:57:48.642 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-19 17:57:48.645 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-19 17:57:48.652 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:57:48.685 +03:00 [DBG] 4QbPMm7JcPcKVMjPOfRdcyn9iXQ34zfSJ/DZfpD9K8U= not found in database
2018-08-19 17:57:48.863 +03:00 [DBG] Creating Implicit Flow response.
2018-08-19 17:57:48.879 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-19 17:57:48.880 +03:00 [DBG] Getting claims for access token for subject: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:57:48.937 +03:00 [DBG] V4Im20fIe7gwUHzuR5zYUBs6M4i/HbkMS9MJa2iFtT0= not found in database
2018-08-19 17:57:48.985 +03:00 [DBG] Getting claims for identity token for subject: f9fc890f-472a-41cb-ab8d-ad7b5dffdc89 and client: IoClient_Id
2018-08-19 17:57:48.985 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-19 17:57:49.075 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****IQdw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****a26c"
    }
  ],
  "ActivityId": "0HLG5SGAQNIAM:0000000B",
  "TimeStamp": "2018-08-19T14:57:49Z",
  "ProcessId": 27594,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-19 17:57:49.081 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346905566880.020553077336838532",
  "Scope": "openid profile email"
}
2018-08-19 17:57:49.113 +03:00 [DBG] Augmenting SignInContext
2018-08-19 17:57:49.115 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-19 17:57:50.397 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-19 17:57:50.449 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-19 17:57:50.450 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 17:57:50.452 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-19 17:57:50.456 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-19 17:57:50.456 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-19 17:57:50.467 +03:00 [DBG] Start key discovery request
2018-08-19 17:57:50.528 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 17:57:50.529 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 17:57:50.539 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-19 17:57:50.539 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-19 17:57:50.540 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-19 17:57:50.545 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-19 17:57:50.547 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-19 17:57:50.561 +03:00 [DBG] Start userinfo request
2018-08-19 17:57:50.568 +03:00 [DBG] Bearer token found in header
2018-08-19 17:57:50.609 +03:00 [DBG] V4Im20fIe7gwUHzuR5zYUBs6M4i/HbkMS9MJa2iFtT0= found in database: true
2018-08-19 17:57:50.640 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 17:57:50.648 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "10e1cf5e15af84ee5499b62f4c0861664007caf5bf9aba34fb0b6768fbeaa26c",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534690668,
    "exp": 1534694268,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
    "auth_time": 1534690665,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 17:57:50.659 +03:00 [DBG] Creating userinfo response
2018-08-19 17:57:50.664 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 17:57:50.668 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 17:57:50.675 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-19 17:57:50.676 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-19 17:57:50.684 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-19 17:57:50.685 +03:00 [DBG] End userinfo request
2018-08-19 17:58:05.701 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-19 17:58:05.703 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-19 17:58:05.703 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-19 17:58:05.710 +03:00 [DBG] Processing signout request for f9fc890f-472a-41cb-ab8d-ad7b5dffdc89
2018-08-19 17:58:05.724 +03:00 [DBG] Start end session request validation
2018-08-19 17:58:05.736 +03:00 [DBG] Start identity token validation
2018-08-19 17:58:05.743 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-19 17:58:05.762 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-19 17:58:05.762 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534690669,
    "exp": 1534690969,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.213782913863313161534690654253",
    "iat": 1534690668,
    "at_hash": "dCNPK3GUSLU8b_j5vbJqtg",
    "sid": "9e1db822da4f1b980c5a3aab65d0cb24",
    "sub": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
    "auth_time": 1534690665,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-19 17:58:05.773 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "f9fc890f-472a-41cb-ab8d-ad7b5dffdc89",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ2OTA2NjksImV4cCI6MTUzNDY5MDk2OSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjIxMzc4MjkxMzg2MzMxMzE2MTUzNDY5MDY1NDI1MyIsImlhdCI6MTUzNDY5MDY2OCwiYXRfaGFzaCI6ImRDTlBLM0dVU0xVOGJfajV2YkpxdGciLCJzaWQiOiI5ZTFkYjgyMmRhNGYxYjk4MGM1YTNhYWI2NWQwY2IyNCIsInN1YiI6ImY5ZmM4OTBmLTQ3MmEtNDFjYi1hYjhkLWFkN2I1ZGZmZGM4OSIsImF1dGhfdGltZSI6MTUzNDY5MDY2NSwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.bVEAtvPHqCPjECqmanY70k-Z9ztaZLpMLqCL4oAn2PEeVQAi9rny4FmjA5U_Da8iPxf5PmbUkQf9S0mro2LgSi86D3G2nMy-qZafP_I0KOtVqDKKxYyICDJ4jD-RFWF2exuP6W0MTaNf3RQf9kt6C5-vuqzxkry7Zb57K7AKSzfpn-b9Y-GNuD-7PD5dihRNlyUS3AClEkvB3co0wFa3dQGvV8wgbkNOjlADUZTNkspD62OAlGi-NLMTvvncEgroT1t8Ui6wMlo8TX-9futylPSLBo9IwOZrv5gpUOlTSJKYZtkSLuCvfzLvqBzGjN-Y5ENFQvL-1jBXljBYKuIQdw",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-19 17:58:05.773 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-19 17:58:05.853 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-19 17:58:05.854 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-19 17:58:05.854 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-19 17:58:05.867 +03:00 [DBG] removing 2 persisted grants from database for subject f9fc890f-472a-41cb-ab8d-ad7b5dffdc89, clientId IoClient_Id
2018-08-19 17:58:05.935 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-19 17:58:05.940 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-19 17:58:05.940 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-19 17:58:05.951 +03:00 [DBG] Processing signout callback request
2018-08-19 17:58:05.969 +03:00 [DBG] No client front-channel logout URLs
2018-08-19 17:58:05.970 +03:00 [DBG] No client back-channel logout URLs
2018-08-19 17:58:05.970 +03:00 [INF] Successful signout callback.
2018-08-19 17:58:05.970 +03:00 [DBG] No client front-channel iframe urls
2018-08-19 17:58:05.970 +03:00 [DBG] No client back-channel iframe urls
2018-08-19 18:02:52.843 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-19 18:02:52.845 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-19 18:02:52.845 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-19 18:02:52.845 +03:00 [DBG] Start authorize request
2018-08-19 18:02:52.845 +03:00 [DBG] No user present in authorize request
2018-08-19 18:02:52.845 +03:00 [DBG] Start authorize request protocol validation
2018-08-19 18:02:52.846 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-19 18:02:52.846 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346909728300.8076984308360136",
  "Nonce": "N0.87431583202976191534690972830",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.87431583202976191534690972830",
    "state": "15346909728300.8076984308360136",
    "prompt": "none"
  }
}
2018-08-19 18:02:52.846 +03:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2018-08-19 18:02:52.851 +03:00 [INF] {
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346909728300.8076984308360136",
  "Nonce": "N0.87431583202976191534690972830",
  "PromptMode": "none",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.87431583202976191534690972830",
    "state": "15346909728300.8076984308360136",
    "prompt": "none"
  }
}
2018-08-19 18:02:52.863 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Error": "login_required",
  "ActivityId": "0HLG5SGAQNIAQ:00000001",
  "TimeStamp": "2018-08-19T15:02:52Z",
  "ProcessId": 27594,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-19 18:57:20.796 +03:00 [INF] Clearing 0 tokens
2018-08-20 19:24:16.761 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-20 19:24:16.791 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-20 19:24:16.791 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-20 19:24:16.791 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-20 19:24:16.792 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-20 19:24:16.900 +03:00 [DBG] Starting token cleanup
2018-08-20 19:24:28.238 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:24:28.277 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:24:28.278 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:24:28.287 +03:00 [DBG] Start authorize request
2018-08-20 19:24:28.309 +03:00 [DBG] No user present in authorize request
2018-08-20 19:24:28.320 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:24:29.274 +03:00 [ERR] An error occurred using the connection to database 'microstarter.identity_config' on server 'tcp://postgre_name:5432'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-08-20 19:24:29.323 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-08-20 19:24:29.327 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2018-08-20 19:24:29.402 +03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address\n   at System.Net.Dns.InternalGetHostByName(String hostName)\n   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)\n   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnector.cs:line 663\n   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnector.cs:line 555\n   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnector.cs:line 414\n   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\\projects\\npgsql\\src\\Npgsql\\ConnectorPool.cs:line 246\n   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnection.cs:line 298\n--- End of stack trace from previous location where exception was thrown ---\n   at Npgsql.NpgsqlConnection.Open() in C:\\projects\\npgsql\\src\\Npgsql\\NpgsqlConnection.cs:line 153\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\\projects\\EFCore.PG\\src\\EFCore.PG\\Storage\\Internal\\NpgsqlExecutionStrategy.cs:line 51\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\n   at lambda_method(Closure )\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Stores/ClientStore.cs:line 47\n   at IdentityServer4.Extensions.ICacheExtensions.GetAsync[T](ICache`1 cache, String key, TimeSpan duration, Func`1 get, ILogger logger) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\ICacheExtensions.cs:line 45\n   at IdentityServer4.Stores.CachingClientStore`1.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Stores\\Caching\\CachingClientStore.cs:line 51\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\IClientStoreExtensions.cs:line 23\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 147\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 65\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpointBase.cs:line 67\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpoint.cs:line 55\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54",
  "Message": "No such device or address",
  "ActivityId": "0HLG6N5JAIV4E:00000001",
  "TimeStamp": "2018-08-20T16:24:29Z",
  "ProcessId": 1833,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:24:29.406 +03:00 [FTL] Unhandled exception: System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Stores/ClientStore.cs:line 47
   at IdentityServer4.Extensions.ICacheExtensions.GetAsync[T](ICache`1 cache, String key, TimeSpan duration, Func`1 get, ILogger logger) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\ICacheExtensions.cs:line 45
   at IdentityServer4.Stores.CachingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Stores\Caching\CachingClientStore.cs:line 51
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
2018-08-20 19:24:29.408 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 6): No such device or address
   at System.Net.Dns.InternalGetHostByName(String hostName)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Npgsql.NpgsqlConnector.Connect(NpgsqlTimeout timeout) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 663
   at Npgsql.NpgsqlConnector.RawOpen(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 555
   at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\NpgsqlConnector.cs:line 414
   at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken) in C:\projects\npgsql\src\Npgsql\ConnectorPool.cs:line 246
   at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 298
--- End of stack trace from previous location where exception was thrown ---
   at Npgsql.NpgsqlConnection.Open() in C:\projects\npgsql\src\Npgsql\NpgsqlConnection.cs:line 153
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded) in C:\projects\EFCore.PG\src\EFCore.PG\Storage\Internal\NpgsqlExecutionStrategy.cs:line 51
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in /home/doom/ionic_is4/MicroStarter.Identity/src/IdentityServer4.EntityFramework/Stores/ClientStore.cs:line 47
   at IdentityServer4.Extensions.ICacheExtensions.GetAsync[T](ICache`1 cache, String key, TimeSpan duration, Func`1 get, ILogger logger) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\ICacheExtensions.cs:line 45
   at IdentityServer4.Stores.CachingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Stores\Caching\CachingClientStore.cs:line 51
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.Invoke(HttpContext context)
2018-08-20 19:24:41.329 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-20 19:24:41.365 +03:00 [DBG] Stopping token cleanup
2018-08-20 19:25:02.120 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-20 19:25:02.150 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-20 19:25:02.150 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-20 19:25:02.150 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-20 19:25:02.150 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-20 19:25:02.269 +03:00 [DBG] Starting token cleanup
2018-08-20 19:25:20.742 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:25:20.782 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:25:20.782 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:25:20.790 +03:00 [DBG] Start authorize request
2018-08-20 19:25:20.812 +03:00 [DBG] No user present in authorize request
2018-08-20 19:25:20.822 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:25:22.847 +03:00 [DBG] IoClient_Id found in database: true
2018-08-20 19:25:22.966 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-20 19:25:23.082 +03:00 [DBG] Found [] API scopes in database
2018-08-20 19:25:23.113 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:25:23.143 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346909728300.8076984308360136",
  "Nonce": "N0.0160835713602351941534782320533",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.0160835713602351941534782320533",
    "state": "15346909728300.8076984308360136"
  }
}
2018-08-20 19:25:23.157 +03:00 [INF] Showing login: User is not authenticated
2018-08-20 19:25:23.384 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:25:23.385 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:25:43.835 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:25:43.839 +03:00 [DBG] Adding idp claim with value: local
2018-08-20 19:25:43.839 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-20 19:25:43.840 +03:00 [DBG] Adding auth_time claim with value: 1534782343
2018-08-20 19:25:43.853 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:25:43.853 +03:00 [INF] User created a new account with password.
2018-08-20 19:25:43.883 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:25:43.884 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:25:43.885 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:25:43.898 +03:00 [DBG] Start authorize callback request
2018-08-20 19:25:43.905 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:25:43.906 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:25:43.906 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:25:43.907 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346909728300.8076984308360136",
  "Nonce": "N0.0160835713602351941534782320533",
  "SessionId": "628cc43211d5a933d6d2d842fc6ac0d7",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.0160835713602351941534782320533",
    "state": "15346909728300.8076984308360136"
  }
}
2018-08-20 19:25:44.005 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:25:44.006 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:25:44.006 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:25:44.007 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:25:44.029 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:25:44.033 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:25:45.516 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:25:45.516 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:25:45.537 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:25:45.538 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:25:45.538 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:25:45.538 +03:00 [DBG] Start authorize callback request
2018-08-20 19:25:45.544 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:25:45.544 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:25:45.545 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:25:45.545 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15346909728300.8076984308360136",
  "Nonce": "N0.0160835713602351941534782320533",
  "SessionId": "628cc43211d5a933d6d2d842fc6ac0d7",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.0160835713602351941534782320533",
    "state": "15346909728300.8076984308360136"
  }
}
2018-08-20 19:25:45.552 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:25:45.556 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:25:45.558 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:25:45.575 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:25:45.581 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:25:45.598 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:25:45.636 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:25:45.740 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:25:45.762 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:25:45.763 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:25:45.819 +03:00 [DBG] kNYtbiuzR+yIsYYfVG4GTO127XrW9N5It8X867IOKc8= not found in database
2018-08-20 19:25:45.843 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:25:45.844 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:25:45.936 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****NyQg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3714"
    }
  ],
  "ActivityId": "0HLG6N62VBV4D:00000010",
  "TimeStamp": "2018-08-20T16:25:45Z",
  "ProcessId": 2033,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:25:45.943 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15346909728300.8076984308360136",
  "Scope": "openid profile email"
}
2018-08-20 19:25:45.973 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:25:45.974 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:25:47.346 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:25:47.392 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-20 19:25:47.392 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:25:47.395 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:25:47.400 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:25:47.400 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:25:47.407 +03:00 [DBG] Start key discovery request
2018-08-20 19:25:47.498 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:25:47.498 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:25:47.509 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:25:47.509 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:25:47.509 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:25:47.514 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:25:47.515 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:25:47.530 +03:00 [DBG] Start userinfo request
2018-08-20 19:25:47.536 +03:00 [DBG] Bearer token found in header
2018-08-20 19:25:47.577 +03:00 [DBG] kNYtbiuzR+yIsYYfVG4GTO127XrW9N5It8X867IOKc8= found in database: true
2018-08-20 19:25:47.606 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:25:47.615 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "a04028af8e426f72e68569ad44463f8dc88f2b1a8275dd4bb8356ca185873714",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534782345,
    "exp": 1534785945,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782343,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:25:47.631 +03:00 [DBG] Creating userinfo response
2018-08-20 19:25:47.638 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:25:47.642 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:25:47.647 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:25:47.647 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:25:47.656 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:25:47.660 +03:00 [DBG] End userinfo request
2018-08-20 19:30:45.157 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:30:45.160 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:30:45.160 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:30:45.160 +03:00 [DBG] Start authorize request
2018-08-20 19:30:45.160 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:30:45.160 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:30:45.182 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:30:45.183 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347826451240.6651067147879788",
  "Nonce": "N0.94211915965064171534782645124",
  "PromptMode": "none",
  "SessionId": "628cc43211d5a933d6d2d842fc6ac0d7",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000/silent-renew.html",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.94211915965064171534782645124",
    "state": "15347826451240.6651067147879788",
    "prompt": "none"
  }
}
2018-08-20 19:30:45.192 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: true
2018-08-20 19:30:45.205 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-20 19:30:45.205 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:30:45.205 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:30:45.206 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:30:45.226 +03:00 [DBG] jFk0uju6b/qercDpaLoXf3tYoibjbR6S/et+XOxrn2k= not found in database
2018-08-20 19:30:45.269 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:30:45.270 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:30:45.276 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1p2A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d2a2"
    }
  ],
  "ActivityId": "0HLG6N62VBV4H:00000001",
  "TimeStamp": "2018-08-20T16:30:45Z",
  "ProcessId": 2033,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:30:45.277 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000/silent-renew.html",
  "State": "15347826451240.6651067147879788",
  "Scope": "openid profile email"
}
2018-08-20 19:31:24.822 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:31:24.823 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:31:24.823 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:31:24.825 +03:00 [DBG] Rendering check session result
2018-08-20 19:31:28.125 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:31:28.126 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:31:28.126 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:31:28.126 +03:00 [DBG] Start authorize request
2018-08-20 19:31:28.127 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:31:28.127 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:31:28.128 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:31:28.128 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347826451240.6651067147879788",
  "Nonce": "N0.37016968631220551534782688098",
  "SessionId": "628cc43211d5a933d6d2d842fc6ac0d7",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.37016968631220551534782688098",
    "state": "15347826451240.6651067147879788"
  }
}
2018-08-20 19:31:28.133 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: true
2018-08-20 19:31:28.142 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-20 19:31:28.143 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:31:28.143 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:31:28.143 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:31:28.163 +03:00 [DBG] rt831aCS7IZok2DesokvIzFe4WV4Xhzdjx1venvBCts= not found in database
2018-08-20 19:31:28.202 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:31:28.203 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:31:28.207 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****yoEQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****02ca"
    }
  ],
  "ActivityId": "0HLG6N62VBV4H:00000003",
  "TimeStamp": "2018-08-20T16:31:28Z",
  "ProcessId": 2033,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:31:28.208 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347826451240.6651067147879788",
  "Scope": "openid profile email"
}
2018-08-20 19:31:29.369 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:31:29.370 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:31:29.370 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:31:29.371 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:31:29.371 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:31:29.371 +03:00 [DBG] Start key discovery request
2018-08-20 19:31:29.435 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:31:29.435 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:31:29.449 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:31:29.449 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:31:29.449 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:31:29.450 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:31:29.451 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:31:29.451 +03:00 [DBG] Start userinfo request
2018-08-20 19:31:29.452 +03:00 [DBG] Bearer token found in header
2018-08-20 19:31:29.453 +03:00 [DBG] rt831aCS7IZok2DesokvIzFe4WV4Xhzdjx1venvBCts= found in database: true
2018-08-20 19:31:29.493 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:31:29.493 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "12cc296fa7f26083ff2dc96672f7ab10b227537d8797db83795aa8c0b2f602ca",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534782688,
    "exp": 1534786288,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782343,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:31:29.493 +03:00 [DBG] Creating userinfo response
2018-08-20 19:31:29.494 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:31:29.494 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:31:29.494 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:31:29.494 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:31:29.502 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:31:29.505 +03:00 [DBG] End userinfo request
2018-08-20 19:31:31.483 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:31:31.485 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:31:31.485 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:31:31.493 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:31:31.505 +03:00 [DBG] Start end session request validation
2018-08-20 19:31:31.514 +03:00 [DBG] Start identity token validation
2018-08-20 19:31:31.523 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:31:31.538 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:31:31.539 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782688,
    "exp": 1534782988,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.37016968631220551534782688098",
    "iat": 1534782688,
    "at_hash": "OCuu63tCxRcr-pYk3jlY8Q",
    "sid": "628cc43211d5a933d6d2d842fc6ac0d7",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782343,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:31:31.548 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI2ODgsImV4cCI6MTUzNDc4Mjk4OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjM3MDE2OTY4NjMxMjIwNTUxNTM0NzgyNjg4MDk4IiwiaWF0IjoxNTM0NzgyNjg4LCJhdF9oYXNoIjoiT0N1dTYzdEN4UmNyLXBZazNqbFk4USIsInNpZCI6IjYyOGNjNDMyMTFkNWE5MzNkNmQyZDg0MmZjNmFjMGQ3Iiwic3ViIjoiOGYyYTQ3N2UtMGQzMS00NTIzLWJiMzctZWU4NDJiN2Y2ZTgzIiwiYXV0aF90aW1lIjoxNTM0NzgyMzQzLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.EwUVXVYvE-1bCwXcsMHLu34AlK0vB95NCiqu__aoG3V622i-l_coMhRco6l7rX9YGlthfp4tXVIOCMD3ZvHSq_JW2DUINLBuNBXXLji6vNktbrvxtmwXn-OXI1BH0mmd99Ey32J1_bYBbRAkDhEJY88XB9h9xjLXp8VUHnBo5zRAm-glbYXZlZ9cv-qeKiYK5PyYM2uTkMWjtDDh2m2UiuF1frc3oC1rD4OPBvh5CeXySE-HC3FrjBIHLX3MFPKtwK6XbO8T_E3t_nuw9raUvrKoRy8P6edDssm7BprmDI5uti7TcnE1QrQuPdUAB_uJNZsp-j_PUl8TtOmb1AyoEQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-20 19:31:31.551 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:31:31.623 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:31:31.624 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:31:31.624 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:31:31.638 +03:00 [DBG] removing 4 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:31:31.704 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-20 19:31:31.709 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-20 19:31:31.709 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-20 19:31:31.721 +03:00 [DBG] Processing signout callback request
2018-08-20 19:31:31.740 +03:00 [DBG] No client front-channel logout URLs
2018-08-20 19:31:31.741 +03:00 [DBG] No client back-channel logout URLs
2018-08-20 19:31:31.741 +03:00 [INF] Successful signout callback.
2018-08-20 19:31:31.741 +03:00 [DBG] No client front-channel iframe urls
2018-08-20 19:31:31.741 +03:00 [DBG] No client back-channel iframe urls
2018-08-20 19:31:38.822 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:31:38.824 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:31:38.828 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:31:38.828 +03:00 [DBG] Processing signout request for anonymous
2018-08-20 19:31:38.828 +03:00 [DBG] Start end session request validation
2018-08-20 19:31:38.829 +03:00 [DBG] Start identity token validation
2018-08-20 19:31:38.829 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:31:38.833 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:31:38.834 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782688,
    "exp": 1534782988,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.37016968631220551534782688098",
    "iat": 1534782688,
    "at_hash": "OCuu63tCxRcr-pYk3jlY8Q",
    "sid": "628cc43211d5a933d6d2d842fc6ac0d7",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782343,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:31:38.834 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI2ODgsImV4cCI6MTUzNDc4Mjk4OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjM3MDE2OTY4NjMxMjIwNTUxNTM0NzgyNjg4MDk4IiwiaWF0IjoxNTM0NzgyNjg4LCJhdF9oYXNoIjoiT0N1dTYzdEN4UmNyLXBZazNqbFk4USIsInNpZCI6IjYyOGNjNDMyMTFkNWE5MzNkNmQyZDg0MmZjNmFjMGQ3Iiwic3ViIjoiOGYyYTQ3N2UtMGQzMS00NTIzLWJiMzctZWU4NDJiN2Y2ZTgzIiwiYXV0aF90aW1lIjoxNTM0NzgyMzQzLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.EwUVXVYvE-1bCwXcsMHLu34AlK0vB95NCiqu__aoG3V622i-l_coMhRco6l7rX9YGlthfp4tXVIOCMD3ZvHSq_JW2DUINLBuNBXXLji6vNktbrvxtmwXn-OXI1BH0mmd99Ey32J1_bYBbRAkDhEJY88XB9h9xjLXp8VUHnBo5zRAm-glbYXZlZ9cv-qeKiYK5PyYM2uTkMWjtDDh2m2UiuF1frc3oC1rD4OPBvh5CeXySE-HC3FrjBIHLX3MFPKtwK6XbO8T_E3t_nuw9raUvrKoRy8P6edDssm7BprmDI5uti7TcnE1QrQuPdUAB_uJNZsp-j_PUl8TtOmb1AyoEQ",
    "post_logout_redirect_uri": "http://localhost:8000"
  }
}
2018-08-20 19:31:38.834 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:31:38.865 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:32:37.180 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:32:37.180 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:32:37.180 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:32:37.180 +03:00 [DBG] Rendering check session result
2018-08-20 19:32:44.133 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:32:44.134 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:32:44.134 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:32:44.134 +03:00 [DBG] Processing signout request for anonymous
2018-08-20 19:32:44.135 +03:00 [DBG] Start end session request validation
2018-08-20 19:32:44.135 +03:00 [DBG] Start identity token validation
2018-08-20 19:32:44.135 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:32:44.139 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:32:44.139 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782688,
    "exp": 1534782988,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.37016968631220551534782688098",
    "iat": 1534782688,
    "at_hash": "OCuu63tCxRcr-pYk3jlY8Q",
    "sid": "628cc43211d5a933d6d2d842fc6ac0d7",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782343,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:32:44.139 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI2ODgsImV4cCI6MTUzNDc4Mjk4OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjM3MDE2OTY4NjMxMjIwNTUxNTM0NzgyNjg4MDk4IiwiaWF0IjoxNTM0NzgyNjg4LCJhdF9oYXNoIjoiT0N1dTYzdEN4UmNyLXBZazNqbFk4USIsInNpZCI6IjYyOGNjNDMyMTFkNWE5MzNkNmQyZDg0MmZjNmFjMGQ3Iiwic3ViIjoiOGYyYTQ3N2UtMGQzMS00NTIzLWJiMzctZWU4NDJiN2Y2ZTgzIiwiYXV0aF90aW1lIjoxNTM0NzgyMzQzLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.EwUVXVYvE-1bCwXcsMHLu34AlK0vB95NCiqu__aoG3V622i-l_coMhRco6l7rX9YGlthfp4tXVIOCMD3ZvHSq_JW2DUINLBuNBXXLji6vNktbrvxtmwXn-OXI1BH0mmd99Ey32J1_bYBbRAkDhEJY88XB9h9xjLXp8VUHnBo5zRAm-glbYXZlZ9cv-qeKiYK5PyYM2uTkMWjtDDh2m2UiuF1frc3oC1rD4OPBvh5CeXySE-HC3FrjBIHLX3MFPKtwK6XbO8T_E3t_nuw9raUvrKoRy8P6edDssm7BprmDI5uti7TcnE1QrQuPdUAB_uJNZsp-j_PUl8TtOmb1AyoEQ",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:32:44.140 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:32:44.152 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:32:47.845 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:32:47.845 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:32:47.845 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:32:47.845 +03:00 [DBG] Rendering check session result
2018-08-20 19:32:56.573 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:32:56.573 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:32:56.573 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:32:56.573 +03:00 [DBG] Rendering check session result
2018-08-20 19:33:00.314 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:33:00.314 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:33:00.318 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:33:00.318 +03:00 [DBG] Start authorize request
2018-08-20 19:33:00.318 +03:00 [DBG] No user present in authorize request
2018-08-20 19:33:00.318 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:33:00.319 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:33:00.319 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347827802860.34805341606009255",
  "Nonce": "N0.101617564798136551534782780287",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.101617564798136551534782780287",
    "state": "15347827802860.34805341606009255"
  }
}
2018-08-20 19:33:00.320 +03:00 [INF] Showing login: User is not authenticated
2018-08-20 19:33:00.326 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:33:00.328 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:33:06.393 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:33:06.393 +03:00 [DBG] Adding idp claim with value: local
2018-08-20 19:33:06.394 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-20 19:33:06.394 +03:00 [DBG] Adding auth_time claim with value: 1534782786
2018-08-20 19:33:06.396 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:33:06.400 +03:00 [INF] User with username = okanaslankan@hotmail.com logged in. 
2018-08-20 19:33:06.404 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:33:06.405 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:33:06.405 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:33:06.405 +03:00 [DBG] Start authorize callback request
2018-08-20 19:33:06.405 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:33:06.405 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:33:06.405 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:33:06.406 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347827802860.34805341606009255",
  "Nonce": "N0.101617564798136551534782780287",
  "SessionId": "f83ad885ad9ea27dada673ffaaa2b439",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.101617564798136551534782780287",
    "state": "15347827802860.34805341606009255"
  }
}
2018-08-20 19:33:06.410 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:33:06.410 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:33:06.410 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:33:06.410 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:33:06.414 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:33:06.414 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:33:07.600 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:33:07.600 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:33:07.605 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:33:07.605 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:33:07.605 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:33:07.605 +03:00 [DBG] Start authorize callback request
2018-08-20 19:33:07.606 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:33:07.606 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:33:07.606 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:33:07.607 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347827802860.34805341606009255",
  "Nonce": "N0.101617564798136551534782780287",
  "SessionId": "f83ad885ad9ea27dada673ffaaa2b439",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.101617564798136551534782780287",
    "state": "15347827802860.34805341606009255"
  }
}
2018-08-20 19:33:07.611 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:33:07.611 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:33:07.611 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:33:07.612 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:33:07.612 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:33:07.612 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:33:07.617 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:33:07.646 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:33:07.646 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:33:07.647 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:33:07.668 +03:00 [DBG] xvZNN2VU1L0sfSlX4tFAL3p/mxDDEjZQJ6OFqB/3qUo= not found in database
2018-08-20 19:33:07.924 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:33:07.924 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:33:07.933 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****azNA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7af8"
    }
  ],
  "ActivityId": "0HLG6N62VBV4H:0000001A",
  "TimeStamp": "2018-08-20T16:33:07Z",
  "ProcessId": 2033,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:33:07.934 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347827802860.34805341606009255",
  "Scope": "openid profile email"
}
2018-08-20 19:33:07.935 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:33:07.935 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:33:09.046 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:33:09.046 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:33:09.048 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:33:09.049 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:33:09.051 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:33:09.051 +03:00 [DBG] Start key discovery request
2018-08-20 19:33:09.102 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:33:09.102 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:33:09.109 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:33:09.110 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:33:09.111 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:33:09.111 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:33:09.112 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:33:09.112 +03:00 [DBG] Start userinfo request
2018-08-20 19:33:09.113 +03:00 [DBG] Bearer token found in header
2018-08-20 19:33:09.115 +03:00 [DBG] xvZNN2VU1L0sfSlX4tFAL3p/mxDDEjZQJ6OFqB/3qUo= found in database: true
2018-08-20 19:33:09.155 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:33:09.155 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "2ea84e21585a2cb18086ffe2044a1d299e9a4249d9f459dfaf72a2ebf0e07af8",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534782787,
    "exp": 1534786387,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782786,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:33:09.155 +03:00 [DBG] Creating userinfo response
2018-08-20 19:33:09.156 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:33:09.156 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:33:09.156 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:33:09.156 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:33:09.161 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:33:09.162 +03:00 [DBG] End userinfo request
2018-08-20 19:33:15.021 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:33:15.024 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:33:15.025 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:33:15.025 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:33:15.025 +03:00 [DBG] Start end session request validation
2018-08-20 19:33:15.025 +03:00 [DBG] Start identity token validation
2018-08-20 19:33:15.025 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:33:15.029 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:33:15.030 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782787,
    "exp": 1534783087,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.101617564798136551534782780287",
    "iat": 1534782787,
    "at_hash": "GqlmBz7jXY2uZBGbwFgLSg",
    "sid": "f83ad885ad9ea27dada673ffaaa2b439",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782786,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:33:15.030 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI3ODcsImV4cCI6MTUzNDc4MzA4NywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjEwMTYxNzU2NDc5ODEzNjU1MTUzNDc4Mjc4MDI4NyIsImlhdCI6MTUzNDc4Mjc4NywiYXRfaGFzaCI6IkdxbG1CejdqWFkydVpCR2J3RmdMU2ciLCJzaWQiOiJmODNhZDg4NWFkOWVhMjdkYWRhNjczZmZhYWEyYjQzOSIsInN1YiI6IjhmMmE0NzdlLTBkMzEtNDUyMy1iYjM3LWVlODQyYjdmNmU4MyIsImF1dGhfdGltZSI6MTUzNDc4Mjc4NiwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.BnL1f4WTzna3SOSVAFY930PsHjvnIZ948VpgfcJ1eeTopCHVrigp0MpNKi31cqkW30WCyLKD6REq2WcaIkVRVXJD9Bx1kmdfz7QIMvK5MvTtdu3j3YN5NcHFZNEY2VLVjPQ4QARXLfu5w58S0u6796Ii3hfeLTfTiovPhRVK90-4ljGz7kFopn4rWXFcBdnyQTvkDl-zDuytatCxmOOvL0ROqX_7tgaMjG8qlQt9J-5mtPCbP51hKifohItHMbLCNG6nn5AeaLMQul8UKU30pllcSG4Fz7he7MovZnfi0Jdmi-ApLgeqYmFMSc6Z718NqsUy0rR2BZ6fR2km1eazNA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:33:15.030 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:33:15.037 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:33:15.038 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:33:15.038 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:33:15.040 +03:00 [DBG] removing 2 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:33:15.101 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-20 19:33:15.102 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-20 19:33:15.102 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-20 19:33:15.102 +03:00 [DBG] Processing signout callback request
2018-08-20 19:33:15.103 +03:00 [DBG] No client front-channel logout URLs
2018-08-20 19:33:15.103 +03:00 [DBG] No client back-channel logout URLs
2018-08-20 19:33:15.103 +03:00 [INF] Successful signout callback.
2018-08-20 19:33:15.103 +03:00 [DBG] No client front-channel iframe urls
2018-08-20 19:33:15.103 +03:00 [DBG] No client back-channel iframe urls
2018-08-20 19:36:04.257 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:36:04.258 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:36:04.258 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:36:04.258 +03:00 [DBG] Processing signout request for anonymous
2018-08-20 19:36:04.258 +03:00 [DBG] Start end session request validation
2018-08-20 19:36:04.258 +03:00 [DBG] Start identity token validation
2018-08-20 19:36:04.259 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:36:04.264 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:36:04.265 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782787,
    "exp": 1534783087,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.101617564798136551534782780287",
    "iat": 1534782787,
    "at_hash": "GqlmBz7jXY2uZBGbwFgLSg",
    "sid": "f83ad885ad9ea27dada673ffaaa2b439",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782786,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:36:04.265 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI3ODcsImV4cCI6MTUzNDc4MzA4NywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjEwMTYxNzU2NDc5ODEzNjU1MTUzNDc4Mjc4MDI4NyIsImlhdCI6MTUzNDc4Mjc4NywiYXRfaGFzaCI6IkdxbG1CejdqWFkydVpCR2J3RmdMU2ciLCJzaWQiOiJmODNhZDg4NWFkOWVhMjdkYWRhNjczZmZhYWEyYjQzOSIsInN1YiI6IjhmMmE0NzdlLTBkMzEtNDUyMy1iYjM3LWVlODQyYjdmNmU4MyIsImF1dGhfdGltZSI6MTUzNDc4Mjc4NiwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.BnL1f4WTzna3SOSVAFY930PsHjvnIZ948VpgfcJ1eeTopCHVrigp0MpNKi31cqkW30WCyLKD6REq2WcaIkVRVXJD9Bx1kmdfz7QIMvK5MvTtdu3j3YN5NcHFZNEY2VLVjPQ4QARXLfu5w58S0u6796Ii3hfeLTfTiovPhRVK90-4ljGz7kFopn4rWXFcBdnyQTvkDl-zDuytatCxmOOvL0ROqX_7tgaMjG8qlQt9J-5mtPCbP51hKifohItHMbLCNG6nn5AeaLMQul8UKU30pllcSG4Fz7he7MovZnfi0Jdmi-ApLgeqYmFMSc6Z718NqsUy0rR2BZ6fR2km1eazNA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:36:04.266 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:36:04.272 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:36:11.706 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:36:11.707 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:36:11.707 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:36:11.707 +03:00 [DBG] Rendering check session result
2018-08-20 19:36:14.995 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:36:14.996 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:36:14.996 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:36:14.996 +03:00 [DBG] Start authorize request
2018-08-20 19:36:14.996 +03:00 [DBG] No user present in authorize request
2018-08-20 19:36:14.996 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:36:14.997 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:36:14.997 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347829749650.10363629802323926",
  "Nonce": "N0.468654710022137431534782974965",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.468654710022137431534782974965",
    "state": "15347829749650.10363629802323926"
  }
}
2018-08-20 19:36:14.997 +03:00 [INF] Showing login: User is not authenticated
2018-08-20 19:36:15.004 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:36:15.005 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:36:22.568 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:36:22.568 +03:00 [DBG] Adding idp claim with value: local
2018-08-20 19:36:22.568 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-20 19:36:22.568 +03:00 [DBG] Adding auth_time claim with value: 1534782982
2018-08-20 19:36:22.570 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:36:22.570 +03:00 [INF] User with username = okanaslankan@hotmail.com logged in. 
2018-08-20 19:36:22.574 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:36:22.574 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:36:22.574 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:36:22.574 +03:00 [DBG] Start authorize callback request
2018-08-20 19:36:22.575 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:36:22.575 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:36:22.575 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:36:22.575 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347829749650.10363629802323926",
  "Nonce": "N0.468654710022137431534782974965",
  "SessionId": "f5724c2b0fcbd5ffeb016948afdfe9d6",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.468654710022137431534782974965",
    "state": "15347829749650.10363629802323926"
  }
}
2018-08-20 19:36:22.579 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:36:22.580 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:36:22.580 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:36:22.580 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:36:22.584 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:36:22.585 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:36:24.876 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:36:24.877 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:36:24.882 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:36:24.882 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:36:24.882 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:36:24.882 +03:00 [DBG] Start authorize callback request
2018-08-20 19:36:24.883 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:36:24.883 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:36:24.884 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:36:24.884 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347829749650.10363629802323926",
  "Nonce": "N0.468654710022137431534782974965",
  "SessionId": "f5724c2b0fcbd5ffeb016948afdfe9d6",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.468654710022137431534782974965",
    "state": "15347829749650.10363629802323926"
  }
}
2018-08-20 19:36:24.889 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:36:24.889 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:36:24.889 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:36:24.889 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:36:24.890 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:36:24.890 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:36:24.895 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:36:25.169 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:36:25.169 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:36:25.169 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:36:25.183 +03:00 [DBG] /lcl5vq7YIjr2HDqEIQoP1BaNgx0FrD4rgMUtMBJkCI= not found in database
2018-08-20 19:36:25.274 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:36:25.274 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:36:25.280 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****FrSA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6cf3"
    }
  ],
  "ActivityId": "0HLG6N62VBV4L:00000008",
  "TimeStamp": "2018-08-20T16:36:25Z",
  "ProcessId": 2033,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:36:25.281 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347829749650.10363629802323926",
  "Scope": "openid profile email"
}
2018-08-20 19:36:25.281 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:36:25.282 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:36:26.478 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:36:26.479 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:36:26.480 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:36:26.481 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:36:26.489 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:36:26.489 +03:00 [DBG] Start key discovery request
2018-08-20 19:36:26.546 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:36:26.546 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:36:26.553 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:36:26.553 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:36:26.554 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:36:26.554 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:36:26.554 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:36:26.554 +03:00 [DBG] Start userinfo request
2018-08-20 19:36:26.555 +03:00 [DBG] Bearer token found in header
2018-08-20 19:36:26.557 +03:00 [DBG] /lcl5vq7YIjr2HDqEIQoP1BaNgx0FrD4rgMUtMBJkCI= found in database: true
2018-08-20 19:36:26.587 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:36:26.587 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "e51084fbec9b73a3b9b0efb390864a842c535a684f766787eda2660d06786cf3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534782985,
    "exp": 1534786585,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782982,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:36:26.588 +03:00 [DBG] Creating userinfo response
2018-08-20 19:36:26.588 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:36:26.588 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:36:26.588 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:36:26.588 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:36:26.593 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:36:26.593 +03:00 [DBG] End userinfo request
2018-08-20 19:36:28.644 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:36:28.644 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:36:28.644 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:36:28.644 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:36:28.645 +03:00 [DBG] Start end session request validation
2018-08-20 19:36:28.645 +03:00 [DBG] Start identity token validation
2018-08-20 19:36:28.645 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:36:28.648 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:36:28.649 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782985,
    "exp": 1534783285,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.468654710022137431534782974965",
    "iat": 1534782985,
    "at_hash": "25Mq54gRarlpQIvh-x4X7w",
    "sid": "f5724c2b0fcbd5ffeb016948afdfe9d6",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782982,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:36:28.650 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI5ODUsImV4cCI6MTUzNDc4MzI4NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjQ2ODY1NDcxMDAyMjEzNzQzMTUzNDc4Mjk3NDk2NSIsImlhdCI6MTUzNDc4Mjk4NSwiYXRfaGFzaCI6IjI1TXE1NGdSYXJscFFJdmgteDRYN3ciLCJzaWQiOiJmNTcyNGMyYjBmY2JkNWZmZWIwMTY5NDhhZmRmZTlkNiIsInN1YiI6IjhmMmE0NzdlLTBkMzEtNDUyMy1iYjM3LWVlODQyYjdmNmU4MyIsImF1dGhfdGltZSI6MTUzNDc4Mjk4MiwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.rNsy_FS2PICd2X_To09Qn9iv64xPu1gg1LSq8iNYc94pWEM0W26P6H3-u40m71qbE0rmXhm-xl1sUuH-7PXiI2tidFM2aKOA1mxuWAuug_vtKy-AtDswrzE97s51qBrIV_r8bCNUXHGUGPg52gPcBMcbXavlPx1BKH7KWoNyWeMHqmP2oO6hvqRmVXZPRVgZe-WJYPjw_QW6_8bBbzHfdD4aqaDEZmljCbpicvowdS2THKRNVw8qZ94zdZtK6G6PBtuMEdTcvancTP3LwpyiMZB2TJ7pAMtPH_uXI8FGSiQvI5kuFQVLpftdOxmWlrV55K5aJKo7TFQmSVeLOtFrSA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:36:28.651 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:36:28.657 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:36:28.657 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:36:28.658 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:36:28.660 +03:00 [DBG] removing 2 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:36:30.118 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
gjomt2qh.er3(5,62): error CS0433: The type 'RazorViewAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
gjomt2qh.er3(38,83): error CS0433: The type 'RazorPage<TModel>' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
gjomt2qh.er3(41,67): error CS0115: 'Views_Account_LoggedOut.ExecuteAsync()': no suitable method found to override
gjomt2qh.er3(122,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
gjomt2qh.er3(124,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
gjomt2qh.er3(126,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
gjomt2qh.er3(128,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
gjomt2qh.er3(130,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
gjomt2qh.er3(43,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(44,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
gjomt2qh.er3(45,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(46,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(52,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(53,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(54,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
gjomt2qh.er3(55,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(62,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(63,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
gjomt2qh.er3(64,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(65,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
gjomt2qh.er3(71,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
gjomt2qh.er3(72,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(73,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
gjomt2qh.er3(74,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(75,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(81,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(82,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(83,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
gjomt2qh.er3(84,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(90,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(91,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
gjomt2qh.er3(92,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(99,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(100,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
gjomt2qh.er3(101,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(102,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
gjomt2qh.er3(108,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
gjomt2qh.er3(109,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(110,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
gjomt2qh.er3(111,13): error CS0103: The name 'EndContext' does not exist in the current context
gjomt2qh.er3(117,13): error CS0103: The name 'BeginContext' does not exist in the current context
gjomt2qh.er3(118,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
gjomt2qh.er3(119,13): error CS0103: The name 'EndContext' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(4,23): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(4,29): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(12,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(15,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(15,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,14): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,20): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(20,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(22,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(22,30): error CS0103: The name 'Model' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:36:54.019 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:36:54.019 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:36:54.019 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:36:54.019 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:36:54.020 +03:00 [DBG] Start end session request validation
2018-08-20 19:36:54.020 +03:00 [DBG] Start identity token validation
2018-08-20 19:36:54.020 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:36:54.023 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:36:54.023 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782985,
    "exp": 1534783285,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.468654710022137431534782974965",
    "iat": 1534782985,
    "at_hash": "25Mq54gRarlpQIvh-x4X7w",
    "sid": "f5724c2b0fcbd5ffeb016948afdfe9d6",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782982,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:36:54.023 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI5ODUsImV4cCI6MTUzNDc4MzI4NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjQ2ODY1NDcxMDAyMjEzNzQzMTUzNDc4Mjk3NDk2NSIsImlhdCI6MTUzNDc4Mjk4NSwiYXRfaGFzaCI6IjI1TXE1NGdSYXJscFFJdmgteDRYN3ciLCJzaWQiOiJmNTcyNGMyYjBmY2JkNWZmZWIwMTY5NDhhZmRmZTlkNiIsInN1YiI6IjhmMmE0NzdlLTBkMzEtNDUyMy1iYjM3LWVlODQyYjdmNmU4MyIsImF1dGhfdGltZSI6MTUzNDc4Mjk4MiwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.rNsy_FS2PICd2X_To09Qn9iv64xPu1gg1LSq8iNYc94pWEM0W26P6H3-u40m71qbE0rmXhm-xl1sUuH-7PXiI2tidFM2aKOA1mxuWAuug_vtKy-AtDswrzE97s51qBrIV_r8bCNUXHGUGPg52gPcBMcbXavlPx1BKH7KWoNyWeMHqmP2oO6hvqRmVXZPRVgZe-WJYPjw_QW6_8bBbzHfdD4aqaDEZmljCbpicvowdS2THKRNVw8qZ94zdZtK6G6PBtuMEdTcvancTP3LwpyiMZB2TJ7pAMtPH_uXI8FGSiQvI5kuFQVLpftdOxmWlrV55K5aJKo7TFQmSVeLOtFrSA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:36:54.024 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:36:54.028 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:36:54.028 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:36:54.029 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:36:54.032 +03:00 [DBG] removing 0 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:36:54.278 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
001fmng4.3bc(5,62): error CS0433: The type 'RazorViewAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(38,83): error CS0433: The type 'RazorPage<TModel>' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(41,67): error CS0115: 'Views_Account_LoggedOut.ExecuteAsync()': no suitable method found to override
001fmng4.3bc(122,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(124,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(126,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(128,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(130,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(43,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(44,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(45,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(46,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(52,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(53,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(54,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(55,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(62,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(63,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(64,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(65,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
001fmng4.3bc(71,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
001fmng4.3bc(72,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(73,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(74,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(75,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(81,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(82,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(83,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(84,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(90,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(91,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(92,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(99,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(100,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(101,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(102,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
001fmng4.3bc(108,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
001fmng4.3bc(109,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(110,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(111,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(117,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(118,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(119,13): error CS0103: The name 'EndContext' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(4,24): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(4,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(12,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(15,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(15,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,14): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,20): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(20,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(22,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(22,30): error CS0103: The name 'Model' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:36:59.504 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:36:59.504 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:36:59.504 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:36:59.504 +03:00 [DBG] Rendering check session result
2018-08-20 19:37:01.580 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:37:01.581 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:37:01.581 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:37:01.581 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:37:01.581 +03:00 [DBG] Start end session request validation
2018-08-20 19:37:01.581 +03:00 [DBG] Start identity token validation
2018-08-20 19:37:01.582 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:37:01.586 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:37:01.586 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782985,
    "exp": 1534783285,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.468654710022137431534782974965",
    "iat": 1534782985,
    "at_hash": "25Mq54gRarlpQIvh-x4X7w",
    "sid": "f5724c2b0fcbd5ffeb016948afdfe9d6",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782982,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:37:01.586 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI5ODUsImV4cCI6MTUzNDc4MzI4NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjQ2ODY1NDcxMDAyMjEzNzQzMTUzNDc4Mjk3NDk2NSIsImlhdCI6MTUzNDc4Mjk4NSwiYXRfaGFzaCI6IjI1TXE1NGdSYXJscFFJdmgteDRYN3ciLCJzaWQiOiJmNTcyNGMyYjBmY2JkNWZmZWIwMTY5NDhhZmRmZTlkNiIsInN1YiI6IjhmMmE0NzdlLTBkMzEtNDUyMy1iYjM3LWVlODQyYjdmNmU4MyIsImF1dGhfdGltZSI6MTUzNDc4Mjk4MiwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.rNsy_FS2PICd2X_To09Qn9iv64xPu1gg1LSq8iNYc94pWEM0W26P6H3-u40m71qbE0rmXhm-xl1sUuH-7PXiI2tidFM2aKOA1mxuWAuug_vtKy-AtDswrzE97s51qBrIV_r8bCNUXHGUGPg52gPcBMcbXavlPx1BKH7KWoNyWeMHqmP2oO6hvqRmVXZPRVgZe-WJYPjw_QW6_8bBbzHfdD4aqaDEZmljCbpicvowdS2THKRNVw8qZ94zdZtK6G6PBtuMEdTcvancTP3LwpyiMZB2TJ7pAMtPH_uXI8FGSiQvI5kuFQVLpftdOxmWlrV55K5aJKo7TFQmSVeLOtFrSA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:37:01.587 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:37:01.593 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:37:01.593 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:37:01.593 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:37:01.595 +03:00 [DBG] removing 0 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:37:01.597 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
001fmng4.3bc(5,62): error CS0433: The type 'RazorViewAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(38,83): error CS0433: The type 'RazorPage<TModel>' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(41,67): error CS0115: 'Views_Account_LoggedOut.ExecuteAsync()': no suitable method found to override
001fmng4.3bc(122,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(124,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(126,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(128,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(130,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
001fmng4.3bc(43,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(44,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(45,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(46,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(52,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(53,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(54,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(55,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(62,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(63,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(64,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(65,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
001fmng4.3bc(71,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
001fmng4.3bc(72,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(73,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(74,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(75,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(81,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(82,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(83,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(84,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(90,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(91,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(92,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(99,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(100,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(101,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(102,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
001fmng4.3bc(108,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
001fmng4.3bc(109,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(110,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(111,13): error CS0103: The name 'EndContext' does not exist in the current context
001fmng4.3bc(117,13): error CS0103: The name 'BeginContext' does not exist in the current context
001fmng4.3bc(118,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
001fmng4.3bc(119,13): error CS0103: The name 'EndContext' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(4,24): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(4,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(12,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(15,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(15,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,14): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,20): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(20,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(22,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(22,30): error CS0103: The name 'Model' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:37:35.668 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:37:35.670 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:37:35.670 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:37:35.671 +03:00 [DBG] Rendering check session result
2018-08-20 19:37:38.418 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:37:38.418 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:37:38.419 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:37:38.419 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:37:38.419 +03:00 [DBG] Start end session request validation
2018-08-20 19:37:38.419 +03:00 [DBG] Start identity token validation
2018-08-20 19:37:38.419 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:37:38.423 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:37:38.423 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782985,
    "exp": 1534783285,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.468654710022137431534782974965",
    "iat": 1534782985,
    "at_hash": "25Mq54gRarlpQIvh-x4X7w",
    "sid": "f5724c2b0fcbd5ffeb016948afdfe9d6",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782982,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:37:38.423 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI5ODUsImV4cCI6MTUzNDc4MzI4NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjQ2ODY1NDcxMDAyMjEzNzQzMTUzNDc4Mjk3NDk2NSIsImlhdCI6MTUzNDc4Mjk4NSwiYXRfaGFzaCI6IjI1TXE1NGdSYXJscFFJdmgteDRYN3ciLCJzaWQiOiJmNTcyNGMyYjBmY2JkNWZmZWIwMTY5NDhhZmRmZTlkNiIsInN1YiI6IjhmMmE0NzdlLTBkMzEtNDUyMy1iYjM3LWVlODQyYjdmNmU4MyIsImF1dGhfdGltZSI6MTUzNDc4Mjk4MiwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.rNsy_FS2PICd2X_To09Qn9iv64xPu1gg1LSq8iNYc94pWEM0W26P6H3-u40m71qbE0rmXhm-xl1sUuH-7PXiI2tidFM2aKOA1mxuWAuug_vtKy-AtDswrzE97s51qBrIV_r8bCNUXHGUGPg52gPcBMcbXavlPx1BKH7KWoNyWeMHqmP2oO6hvqRmVXZPRVgZe-WJYPjw_QW6_8bBbzHfdD4aqaDEZmljCbpicvowdS2THKRNVw8qZ94zdZtK6G6PBtuMEdTcvancTP3LwpyiMZB2TJ7pAMtPH_uXI8FGSiQvI5kuFQVLpftdOxmWlrV55K5aJKo7TFQmSVeLOtFrSA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:37:38.423 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:37:38.428 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:37:38.428 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:37:38.429 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:37:38.431 +03:00 [DBG] removing 0 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:37:38.643 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
dpc3ll03.sin(5,62): error CS0433: The type 'RazorViewAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
dpc3ll03.sin(38,83): error CS0433: The type 'RazorPage<TModel>' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
dpc3ll03.sin(41,67): error CS0115: 'Views_Account_LoggedOut.ExecuteAsync()': no suitable method found to override
dpc3ll03.sin(122,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
dpc3ll03.sin(124,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
dpc3ll03.sin(126,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
dpc3ll03.sin(128,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
dpc3ll03.sin(130,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
dpc3ll03.sin(43,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(44,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
dpc3ll03.sin(45,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(52,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(53,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
dpc3ll03.sin(54,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(55,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(61,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(62,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(63,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
dpc3ll03.sin(64,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(65,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
dpc3ll03.sin(71,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
dpc3ll03.sin(72,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(73,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
dpc3ll03.sin(74,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(75,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(81,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(82,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(83,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
dpc3ll03.sin(84,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(90,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(91,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
dpc3ll03.sin(92,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(99,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(100,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
dpc3ll03.sin(101,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(102,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
dpc3ll03.sin(108,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
dpc3ll03.sin(109,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(110,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
dpc3ll03.sin(111,13): error CS0103: The name 'EndContext' does not exist in the current context
dpc3ll03.sin(117,13): error CS0103: The name 'BeginContext' does not exist in the current context
dpc3ll03.sin(118,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
dpc3ll03.sin(119,13): error CS0103: The name 'EndContext' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(10,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(13,32): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(13,38): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(17,14): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(17,20): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(21,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(23,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(23,30): error CS0103: The name 'Model' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:39:18.439 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:39:18.439 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:39:18.439 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:39:18.439 +03:00 [DBG] Rendering check session result
2018-08-20 19:39:20.695 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:39:20.695 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:39:20.697 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:39:20.697 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:39:20.698 +03:00 [DBG] Start end session request validation
2018-08-20 19:39:20.698 +03:00 [DBG] Start identity token validation
2018-08-20 19:39:20.698 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:39:20.703 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:39:20.703 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534782985,
    "exp": 1534783285,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.468654710022137431534782974965",
    "iat": 1534782985,
    "at_hash": "25Mq54gRarlpQIvh-x4X7w",
    "sid": "f5724c2b0fcbd5ffeb016948afdfe9d6",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782982,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:39:20.703 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODI5ODUsImV4cCI6MTUzNDc4MzI4NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjQ2ODY1NDcxMDAyMjEzNzQzMTUzNDc4Mjk3NDk2NSIsImlhdCI6MTUzNDc4Mjk4NSwiYXRfaGFzaCI6IjI1TXE1NGdSYXJscFFJdmgteDRYN3ciLCJzaWQiOiJmNTcyNGMyYjBmY2JkNWZmZWIwMTY5NDhhZmRmZTlkNiIsInN1YiI6IjhmMmE0NzdlLTBkMzEtNDUyMy1iYjM3LWVlODQyYjdmNmU4MyIsImF1dGhfdGltZSI6MTUzNDc4Mjk4MiwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.rNsy_FS2PICd2X_To09Qn9iv64xPu1gg1LSq8iNYc94pWEM0W26P6H3-u40m71qbE0rmXhm-xl1sUuH-7PXiI2tidFM2aKOA1mxuWAuug_vtKy-AtDswrzE97s51qBrIV_r8bCNUXHGUGPg52gPcBMcbXavlPx1BKH7KWoNyWeMHqmP2oO6hvqRmVXZPRVgZe-WJYPjw_QW6_8bBbzHfdD4aqaDEZmljCbpicvowdS2THKRNVw8qZ94zdZtK6G6PBtuMEdTcvancTP3LwpyiMZB2TJ7pAMtPH_uXI8FGSiQvI5kuFQVLpftdOxmWlrV55K5aJKo7TFQmSVeLOtFrSA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:39:20.704 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:39:20.711 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:39:20.711 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:39:20.711 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:39:20.713 +03:00 [DBG] removing 0 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:39:20.961 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
wvaox1n2.aio(5,62): error CS0433: The type 'RazorViewAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
wvaox1n2.aio(38,83): error CS0433: The type 'RazorPage<TModel>' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
wvaox1n2.aio(41,67): error CS0115: 'Views_Account_LoggedOut.ExecuteAsync()': no suitable method found to override
wvaox1n2.aio(112,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
wvaox1n2.aio(114,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
wvaox1n2.aio(116,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
wvaox1n2.aio(118,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
wvaox1n2.aio(120,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
wvaox1n2.aio(43,13): error CS0103: The name 'BeginContext' does not exist in the current context
wvaox1n2.aio(44,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
wvaox1n2.aio(45,13): error CS0103: The name 'EndContext' does not exist in the current context
wvaox1n2.aio(52,13): error CS0103: The name 'BeginContext' does not exist in the current context
wvaox1n2.aio(53,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
wvaox1n2.aio(54,13): error CS0103: The name 'EndContext' does not exist in the current context
wvaox1n2.aio(55,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
wvaox1n2.aio(61,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
wvaox1n2.aio(62,13): error CS0103: The name 'BeginContext' does not exist in the current context
wvaox1n2.aio(63,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
wvaox1n2.aio(64,13): error CS0103: The name 'EndContext' does not exist in the current context
wvaox1n2.aio(65,13): error CS0103: The name 'BeginContext' does not exist in the current context
wvaox1n2.aio(71,13): error CS0103: The name 'EndContext' does not exist in the current context
wvaox1n2.aio(72,13): error CS0103: The name 'BeginContext' does not exist in the current context
wvaox1n2.aio(73,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
wvaox1n2.aio(74,13): error CS0103: The name 'EndContext' does not exist in the current context
wvaox1n2.aio(80,13): error CS0103: The name 'BeginContext' does not exist in the current context
wvaox1n2.aio(81,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
wvaox1n2.aio(82,13): error CS0103: The name 'EndContext' does not exist in the current context
wvaox1n2.aio(89,13): error CS0103: The name 'BeginContext' does not exist in the current context
wvaox1n2.aio(90,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
wvaox1n2.aio(91,13): error CS0103: The name 'EndContext' does not exist in the current context
wvaox1n2.aio(92,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
wvaox1n2.aio(98,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
wvaox1n2.aio(99,13): error CS0103: The name 'BeginContext' does not exist in the current context
wvaox1n2.aio(100,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
wvaox1n2.aio(101,13): error CS0103: The name 'EndContext' does not exist in the current context
wvaox1n2.aio(107,13): error CS0103: The name 'BeginContext' does not exist in the current context
wvaox1n2.aio(108,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
wvaox1n2.aio(109,13): error CS0103: The name 'EndContext' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(10,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(16,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(17,14): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(17,20): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(21,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(23,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(23,30): error CS0103: The name 'Model' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:39:30.588 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-20 19:39:30.608 +03:00 [DBG] Stopping token cleanup
2018-08-20 19:39:41.660 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-20 19:39:41.690 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-20 19:39:41.690 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-20 19:39:41.690 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-20 19:39:41.691 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-20 19:39:41.803 +03:00 [DBG] Starting token cleanup
2018-08-20 19:39:51.568 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:39:51.576 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:39:51.577 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:39:51.581 +03:00 [DBG] Rendering check session result
2018-08-20 19:39:53.956 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:39:53.980 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:39:53.980 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:39:53.991 +03:00 [DBG] Start authorize request
2018-08-20 19:39:54.015 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:39:54.025 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:39:56.067 +03:00 [DBG] IoClient_Id found in database: true
2018-08-20 19:39:56.167 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-20 19:39:56.284 +03:00 [DBG] Found [] API scopes in database
2018-08-20 19:39:56.305 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:39:56.327 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347831939020.5890097078631955",
  "Nonce": "N0.54773744747413191534783193902",
  "SessionId": "f5724c2b0fcbd5ffeb016948afdfe9d6",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.54773744747413191534783193902",
    "state": "15347831939020.5890097078631955"
  }
}
2018-08-20 19:39:56.672 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:39:56.673 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:39:56.674 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:39:56.674 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:39:56.858 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:39:56.859 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:39:58.201 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:39:58.202 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:39:58.233 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:39:58.234 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:39:58.234 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:39:58.242 +03:00 [DBG] Start authorize callback request
2018-08-20 19:39:58.248 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:39:58.248 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:39:58.249 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:39:58.249 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347831939020.5890097078631955",
  "Nonce": "N0.54773744747413191534783193902",
  "SessionId": "f5724c2b0fcbd5ffeb016948afdfe9d6",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.54773744747413191534783193902",
    "state": "15347831939020.5890097078631955"
  }
}
2018-08-20 19:39:58.255 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:39:58.255 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:39:58.255 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:39:58.264 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:39:58.267 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:39:58.275 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:39:58.302 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:39:58.475 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:39:58.490 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:39:58.491 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:39:58.708 +03:00 [DBG] 2YlZ4zFYHphGsLFq1YByyoDWZOOBPzaTZi+jVe/D9q4= not found in database
2018-08-20 19:39:58.732 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:39:58.732 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:39:58.813 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****rwhA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****f000"
    }
  ],
  "ActivityId": "0HLG6NE6F2LNF:00000005",
  "TimeStamp": "2018-08-20T16:39:58Z",
  "ProcessId": 3771,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:39:58.818 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347831939020.5890097078631955",
  "Scope": "openid profile email"
}
2018-08-20 19:39:59.995 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:40:00.042 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-20 19:40:00.043 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:40:00.046 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:40:00.050 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:40:00.050 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:40:00.055 +03:00 [DBG] Start key discovery request
2018-08-20 19:40:00.118 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:40:00.118 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:40:00.130 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:40:00.130 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:40:00.131 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:40:00.135 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:40:00.135 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:40:00.150 +03:00 [DBG] Start userinfo request
2018-08-20 19:40:00.156 +03:00 [DBG] Bearer token found in header
2018-08-20 19:40:00.192 +03:00 [DBG] 2YlZ4zFYHphGsLFq1YByyoDWZOOBPzaTZi+jVe/D9q4= found in database: true
2018-08-20 19:40:00.224 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:40:00.232 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "a650e9c96483dee960acb2117f8b7b05a2a9621649196a04f8e04757a777f000",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534783198,
    "exp": 1534786798,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782982,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:40:00.246 +03:00 [DBG] Creating userinfo response
2018-08-20 19:40:00.252 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:40:00.258 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:40:00.262 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:40:00.263 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:40:00.269 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:40:00.270 +03:00 [DBG] End userinfo request
2018-08-20 19:40:03.730 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:40:03.732 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:40:03.732 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:40:03.742 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:40:03.752 +03:00 [DBG] Start end session request validation
2018-08-20 19:40:03.764 +03:00 [DBG] Start identity token validation
2018-08-20 19:40:03.772 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:40:03.787 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:40:03.788 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534783198,
    "exp": 1534783498,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.54773744747413191534783193902",
    "iat": 1534783198,
    "at_hash": "AV136EUBvBpWvEI_h0gRiA",
    "sid": "f5724c2b0fcbd5ffeb016948afdfe9d6",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534782982,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:40:03.801 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODMxOTgsImV4cCI6MTUzNDc4MzQ5OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjU0NzczNzQ0NzQ3NDEzMTkxNTM0NzgzMTkzOTAyIiwiaWF0IjoxNTM0NzgzMTk4LCJhdF9oYXNoIjoiQVYxMzZFVUJ2QnBXdkVJX2gwZ1JpQSIsInNpZCI6ImY1NzI0YzJiMGZjYmQ1ZmZlYjAxNjk0OGFmZGZlOWQ2Iiwic3ViIjoiOGYyYTQ3N2UtMGQzMS00NTIzLWJiMzctZWU4NDJiN2Y2ZTgzIiwiYXV0aF90aW1lIjoxNTM0NzgyOTgyLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.AIQ_rVWxXpktgimUbEax5f1klpfvqoxkU20dKI4f4k5I7PsZEQjW_0fOb2tbJn47MF1wA8vX7XDYVVmtZugHXM1jq4I5oCQ0I0Q6mi-BGQPn2SZf1f4UtPOXpvWq2xzyUY2qPnod0ckmK2vIZPxzdHHYMKQQNFxz2aA8HfiEEGqAv_9FexdSpp_Ue5RP_551PPMFdR24wjVZGWi_TAK5rQWWoDU-1ssQwyFpS9II0xPGDKkjyjQqYZOATI2gJO175ONJILsgO0TjiVz_8dNhroPaM8lvBWF62qTUamTwr5as8SHqTHB8gB23MtmDNTvYXY7dlzfv4A3bbnpjKyrwhA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:40:03.803 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:40:03.898 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:40:03.899 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:40:03.899 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:40:03.911 +03:00 [DBG] removing 2 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:40:03.993 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-20 19:40:03.997 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-20 19:40:03.998 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-20 19:40:04.021 +03:00 [DBG] Processing signout callback request
2018-08-20 19:40:04.043 +03:00 [DBG] No client front-channel logout URLs
2018-08-20 19:40:04.044 +03:00 [DBG] No client back-channel logout URLs
2018-08-20 19:40:04.044 +03:00 [INF] Successful signout callback.
2018-08-20 19:40:04.044 +03:00 [DBG] No client front-channel iframe urls
2018-08-20 19:40:04.044 +03:00 [DBG] No client back-channel iframe urls
2018-08-20 19:41:26.937 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:41:26.937 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:41:26.937 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:41:26.938 +03:00 [DBG] Rendering check session result
2018-08-20 19:41:28.864 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:41:28.865 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:41:28.865 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:41:28.866 +03:00 [DBG] Start authorize request
2018-08-20 19:41:28.866 +03:00 [DBG] No user present in authorize request
2018-08-20 19:41:28.866 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:41:28.867 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:41:28.867 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347832888320.9666669484020505",
  "Nonce": "N0.44111016146562121534783288832",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.44111016146562121534783288832",
    "state": "15347832888320.9666669484020505"
  }
}
2018-08-20 19:41:28.868 +03:00 [INF] Showing login: User is not authenticated
2018-08-20 19:41:28.908 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:41:28.927 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:41:34.934 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:41:34.938 +03:00 [DBG] Adding idp claim with value: local
2018-08-20 19:41:34.938 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-20 19:41:34.939 +03:00 [DBG] Adding auth_time claim with value: 1534783294
2018-08-20 19:41:34.948 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:41:34.953 +03:00 [INF] User with username = okanaslankan@hotmail.com logged in. 
2018-08-20 19:41:34.972 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:41:34.972 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:41:34.973 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:41:34.973 +03:00 [DBG] Start authorize callback request
2018-08-20 19:41:34.973 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:41:34.973 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:41:34.974 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:41:34.974 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347832888320.9666669484020505",
  "Nonce": "N0.44111016146562121534783288832",
  "SessionId": "e1a7e78817dfad29196db1a088b20483",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.44111016146562121534783288832",
    "state": "15347832888320.9666669484020505"
  }
}
2018-08-20 19:41:34.982 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:41:34.983 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:41:34.983 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:41:34.983 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:41:34.987 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:41:34.988 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:41:36.139 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:41:36.140 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:41:36.146 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:41:36.147 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:41:36.147 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:41:36.147 +03:00 [DBG] Start authorize callback request
2018-08-20 19:41:36.148 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:41:36.148 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:41:36.149 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:41:36.149 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347832888320.9666669484020505",
  "Nonce": "N0.44111016146562121534783288832",
  "SessionId": "e1a7e78817dfad29196db1a088b20483",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.44111016146562121534783288832",
    "state": "15347832888320.9666669484020505"
  }
}
2018-08-20 19:41:36.153 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:41:36.153 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:41:36.153 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:41:36.153 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:41:36.154 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:41:36.154 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:41:36.158 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:41:36.188 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:41:36.189 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:41:36.189 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:41:36.206 +03:00 [DBG] ZRlZwLZbHfWBr0j4qjSqxcZowJDOmb35ew1F1ADafBY= not found in database
2018-08-20 19:41:36.210 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:41:36.210 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:41:36.214 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ZNWQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d770"
    }
  ],
  "ActivityId": "0HLG6NE6F2LNF:00000013",
  "TimeStamp": "2018-08-20T16:41:36Z",
  "ProcessId": 3771,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:41:36.214 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347832888320.9666669484020505",
  "Scope": "openid profile email"
}
2018-08-20 19:41:36.221 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:41:36.222 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:41:37.380 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:41:37.380 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:41:37.380 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:41:37.381 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:41:37.385 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:41:37.385 +03:00 [DBG] Start key discovery request
2018-08-20 19:41:37.456 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:41:37.457 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:41:37.464 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:41:37.464 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:41:37.465 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:41:37.465 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:41:37.469 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:41:37.469 +03:00 [DBG] Start userinfo request
2018-08-20 19:41:37.469 +03:00 [DBG] Bearer token found in header
2018-08-20 19:41:37.472 +03:00 [DBG] ZRlZwLZbHfWBr0j4qjSqxcZowJDOmb35ew1F1ADafBY= found in database: true
2018-08-20 19:41:37.512 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:41:37.513 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ba84817370b27e44826e0085274e9a3c66126d9c299984c3598006dc3c51d770",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534783296,
    "exp": 1534786896,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783294,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:41:37.513 +03:00 [DBG] Creating userinfo response
2018-08-20 19:41:37.514 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:41:37.515 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:41:37.515 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:41:37.516 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:41:37.524 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:41:37.526 +03:00 [DBG] End userinfo request
2018-08-20 19:41:39.858 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:41:39.859 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:41:39.859 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:41:39.859 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:41:39.859 +03:00 [DBG] Start end session request validation
2018-08-20 19:41:39.859 +03:00 [DBG] Start identity token validation
2018-08-20 19:41:39.859 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:41:39.869 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:41:39.869 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534783296,
    "exp": 1534783596,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.44111016146562121534783288832",
    "iat": 1534783296,
    "at_hash": "Zr33EgX9dWence6KAQpRVA",
    "sid": "e1a7e78817dfad29196db1a088b20483",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783294,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:41:39.870 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODMyOTYsImV4cCI6MTUzNDc4MzU5NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjQ0MTExMDE2MTQ2NTYyMTIxNTM0NzgzMjg4ODMyIiwiaWF0IjoxNTM0NzgzMjk2LCJhdF9oYXNoIjoiWnIzM0VnWDlkV2VuY2U2S0FRcFJWQSIsInNpZCI6ImUxYTdlNzg4MTdkZmFkMjkxOTZkYjFhMDg4YjIwNDgzIiwic3ViIjoiOGYyYTQ3N2UtMGQzMS00NTIzLWJiMzctZWU4NDJiN2Y2ZTgzIiwiYXV0aF90aW1lIjoxNTM0NzgzMjk0LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.C4Vkg7BBN_SlcCSfcpTuwoyy2Epd0POuSnfBinuQ-y_-af6td5p6fgVqIi6utnoulEDjOsEz9yWj4_YiyBShRa-7d4pmY6yD1fYNoUdprqoarRDsjZtyNeXxOKkxBVq8SA2VpnACk3tWE7qJUoknBrZZPN1y_wcw0cZy-r4flpvOXshuQ_H8eBxKY4xW6plTjhgxUisi1kxeIrIHFvk0cqF-bb-yy2_fW8SZUdKC1QENLs_8-SD3ozT1EDll1J7ZzuG2UjE-AGVUO-KE334XAp3rgded28HepFEG9Xb0etaflZ3f9zR59iEJd5o16K-mXisMT26_uLg8VRRXYtZNWQ",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:41:39.870 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:41:39.882 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:41:39.883 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:41:39.883 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:41:39.886 +03:00 [DBG] removing 2 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:41:41.288 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
tnq3l05j.1r1(5,62): error CS0433: The type 'RazorViewAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
tnq3l05j.1r1(38,83): error CS0433: The type 'RazorPage<TModel>' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
tnq3l05j.1r1(41,67): error CS0115: 'Views_Account_LoggedOut.ExecuteAsync()': no suitable method found to override
tnq3l05j.1r1(112,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
tnq3l05j.1r1(114,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
tnq3l05j.1r1(116,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
tnq3l05j.1r1(118,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
tnq3l05j.1r1(120,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
tnq3l05j.1r1(43,13): error CS0103: The name 'BeginContext' does not exist in the current context
tnq3l05j.1r1(44,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
tnq3l05j.1r1(45,13): error CS0103: The name 'EndContext' does not exist in the current context
tnq3l05j.1r1(52,13): error CS0103: The name 'BeginContext' does not exist in the current context
tnq3l05j.1r1(53,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
tnq3l05j.1r1(54,13): error CS0103: The name 'EndContext' does not exist in the current context
tnq3l05j.1r1(55,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
tnq3l05j.1r1(61,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
tnq3l05j.1r1(62,13): error CS0103: The name 'BeginContext' does not exist in the current context
tnq3l05j.1r1(63,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
tnq3l05j.1r1(64,13): error CS0103: The name 'EndContext' does not exist in the current context
tnq3l05j.1r1(65,13): error CS0103: The name 'BeginContext' does not exist in the current context
tnq3l05j.1r1(71,13): error CS0103: The name 'EndContext' does not exist in the current context
tnq3l05j.1r1(72,13): error CS0103: The name 'BeginContext' does not exist in the current context
tnq3l05j.1r1(73,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
tnq3l05j.1r1(74,13): error CS0103: The name 'EndContext' does not exist in the current context
tnq3l05j.1r1(80,13): error CS0103: The name 'BeginContext' does not exist in the current context
tnq3l05j.1r1(81,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
tnq3l05j.1r1(82,13): error CS0103: The name 'EndContext' does not exist in the current context
tnq3l05j.1r1(89,13): error CS0103: The name 'BeginContext' does not exist in the current context
tnq3l05j.1r1(90,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
tnq3l05j.1r1(91,13): error CS0103: The name 'EndContext' does not exist in the current context
tnq3l05j.1r1(92,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
tnq3l05j.1r1(98,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
tnq3l05j.1r1(99,13): error CS0103: The name 'BeginContext' does not exist in the current context
tnq3l05j.1r1(100,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
tnq3l05j.1r1(101,13): error CS0103: The name 'EndContext' does not exist in the current context
tnq3l05j.1r1(107,13): error CS0103: The name 'BeginContext' does not exist in the current context
tnq3l05j.1r1(108,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
tnq3l05j.1r1(109,13): error CS0103: The name 'EndContext' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(10,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(18,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(18,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(19,14): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(19,20): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(23,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(25,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(25,30): error CS0103: The name 'Model' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:42:29.059 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:42:29.060 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:42:29.060 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:42:29.060 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:42:29.060 +03:00 [DBG] Start end session request validation
2018-08-20 19:42:29.060 +03:00 [DBG] Start identity token validation
2018-08-20 19:42:29.061 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:42:29.065 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:42:29.065 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534783296,
    "exp": 1534783596,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.44111016146562121534783288832",
    "iat": 1534783296,
    "at_hash": "Zr33EgX9dWence6KAQpRVA",
    "sid": "e1a7e78817dfad29196db1a088b20483",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783294,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:42:29.065 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODMyOTYsImV4cCI6MTUzNDc4MzU5NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjQ0MTExMDE2MTQ2NTYyMTIxNTM0NzgzMjg4ODMyIiwiaWF0IjoxNTM0NzgzMjk2LCJhdF9oYXNoIjoiWnIzM0VnWDlkV2VuY2U2S0FRcFJWQSIsInNpZCI6ImUxYTdlNzg4MTdkZmFkMjkxOTZkYjFhMDg4YjIwNDgzIiwic3ViIjoiOGYyYTQ3N2UtMGQzMS00NTIzLWJiMzctZWU4NDJiN2Y2ZTgzIiwiYXV0aF90aW1lIjoxNTM0NzgzMjk0LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.C4Vkg7BBN_SlcCSfcpTuwoyy2Epd0POuSnfBinuQ-y_-af6td5p6fgVqIi6utnoulEDjOsEz9yWj4_YiyBShRa-7d4pmY6yD1fYNoUdprqoarRDsjZtyNeXxOKkxBVq8SA2VpnACk3tWE7qJUoknBrZZPN1y_wcw0cZy-r4flpvOXshuQ_H8eBxKY4xW6plTjhgxUisi1kxeIrIHFvk0cqF-bb-yy2_fW8SZUdKC1QENLs_8-SD3ozT1EDll1J7ZzuG2UjE-AGVUO-KE334XAp3rgded28HepFEG9Xb0etaflZ3f9zR59iEJd5o16K-mXisMT26_uLg8VRRXYtZNWQ",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:42:29.066 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:42:29.078 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:42:29.078 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:42:29.078 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:42:29.087 +03:00 [DBG] removing 0 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:42:29.316 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
sw335h1e.mwj(5,62): error CS0433: The type 'RazorViewAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(38,83): error CS0433: The type 'RazorPage<TModel>' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(41,67): error CS0115: 'Views_Account_LoggedOut.ExecuteAsync()': no suitable method found to override
sw335h1e.mwj(112,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(114,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(116,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(118,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(120,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(43,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(44,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(45,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(52,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(53,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(54,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(55,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
sw335h1e.mwj(61,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
sw335h1e.mwj(62,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(63,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(64,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(65,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(71,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(72,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(73,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(74,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(80,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(81,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(82,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(89,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(90,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(91,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(92,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
sw335h1e.mwj(98,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
sw335h1e.mwj(99,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(100,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(101,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(107,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(108,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(109,13): error CS0103: The name 'EndContext' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(9,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(12,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(12,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(13,14): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(13,20): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(17,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(19,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(19,30): error CS0103: The name 'Model' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:42:49.763 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:42:49.763 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:42:49.763 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:42:49.763 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:42:49.764 +03:00 [DBG] Start end session request validation
2018-08-20 19:42:49.764 +03:00 [DBG] Start identity token validation
2018-08-20 19:42:49.764 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:42:49.768 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:42:49.768 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534783296,
    "exp": 1534783596,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.44111016146562121534783288832",
    "iat": 1534783296,
    "at_hash": "Zr33EgX9dWence6KAQpRVA",
    "sid": "e1a7e78817dfad29196db1a088b20483",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783294,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:42:49.769 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODMyOTYsImV4cCI6MTUzNDc4MzU5NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjQ0MTExMDE2MTQ2NTYyMTIxNTM0NzgzMjg4ODMyIiwiaWF0IjoxNTM0NzgzMjk2LCJhdF9oYXNoIjoiWnIzM0VnWDlkV2VuY2U2S0FRcFJWQSIsInNpZCI6ImUxYTdlNzg4MTdkZmFkMjkxOTZkYjFhMDg4YjIwNDgzIiwic3ViIjoiOGYyYTQ3N2UtMGQzMS00NTIzLWJiMzctZWU4NDJiN2Y2ZTgzIiwiYXV0aF90aW1lIjoxNTM0NzgzMjk0LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.C4Vkg7BBN_SlcCSfcpTuwoyy2Epd0POuSnfBinuQ-y_-af6td5p6fgVqIi6utnoulEDjOsEz9yWj4_YiyBShRa-7d4pmY6yD1fYNoUdprqoarRDsjZtyNeXxOKkxBVq8SA2VpnACk3tWE7qJUoknBrZZPN1y_wcw0cZy-r4flpvOXshuQ_H8eBxKY4xW6plTjhgxUisi1kxeIrIHFvk0cqF-bb-yy2_fW8SZUdKC1QENLs_8-SD3ozT1EDll1J7ZzuG2UjE-AGVUO-KE334XAp3rgded28HepFEG9Xb0etaflZ3f9zR59iEJd5o16K-mXisMT26_uLg8VRRXYtZNWQ",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:42:49.769 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:42:49.774 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:42:49.775 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:42:49.775 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:42:49.778 +03:00 [DBG] removing 0 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:42:49.780 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
sw335h1e.mwj(5,62): error CS0433: The type 'RazorViewAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(38,83): error CS0433: The type 'RazorPage<TModel>' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(41,67): error CS0115: 'Views_Account_LoggedOut.ExecuteAsync()': no suitable method found to override
sw335h1e.mwj(112,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(114,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(116,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(118,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(120,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
sw335h1e.mwj(43,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(44,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(45,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(52,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(53,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(54,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(55,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
sw335h1e.mwj(61,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
sw335h1e.mwj(62,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(63,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(64,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(65,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(71,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(72,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(73,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(74,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(80,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(81,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(82,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(89,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(90,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(91,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(92,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
sw335h1e.mwj(98,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
sw335h1e.mwj(99,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(100,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(101,13): error CS0103: The name 'EndContext' does not exist in the current context
sw335h1e.mwj(107,13): error CS0103: The name 'BeginContext' does not exist in the current context
sw335h1e.mwj(108,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
sw335h1e.mwj(109,13): error CS0103: The name 'EndContext' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(9,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(12,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(12,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(13,14): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(13,20): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(17,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(19,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(19,30): error CS0103: The name 'Model' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:42:57.333 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-20 19:42:57.366 +03:00 [DBG] Stopping token cleanup
2018-08-20 19:43:08.914 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-20 19:43:08.944 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-20 19:43:08.945 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-20 19:43:08.945 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-20 19:43:08.945 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-20 19:43:09.061 +03:00 [DBG] Starting token cleanup
2018-08-20 19:43:13.631 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:43:13.638 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:43:13.639 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:43:13.642 +03:00 [DBG] Rendering check session result
2018-08-20 19:43:15.752 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:43:15.778 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:43:15.778 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:43:15.786 +03:00 [DBG] Start authorize request
2018-08-20 19:43:15.806 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:43:15.818 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:43:17.782 +03:00 [DBG] IoClient_Id found in database: true
2018-08-20 19:43:17.899 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-20 19:43:18.016 +03:00 [DBG] Found [] API scopes in database
2018-08-20 19:43:18.045 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:43:18.073 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347833956940.7311627616731917",
  "Nonce": "N0.53435100706483141534783395694",
  "SessionId": "e1a7e78817dfad29196db1a088b20483",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.53435100706483141534783395694",
    "state": "15347833956940.7311627616731917"
  }
}
2018-08-20 19:43:18.432 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:43:18.433 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:43:18.434 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:43:18.434 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:43:18.630 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:43:18.630 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:43:20.072 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:43:20.073 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:43:20.097 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:43:20.098 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:43:20.098 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:43:20.106 +03:00 [DBG] Start authorize callback request
2018-08-20 19:43:20.112 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:43:20.113 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:43:20.113 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:43:20.114 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347833956940.7311627616731917",
  "Nonce": "N0.53435100706483141534783395694",
  "SessionId": "e1a7e78817dfad29196db1a088b20483",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.53435100706483141534783395694",
    "state": "15347833956940.7311627616731917"
  }
}
2018-08-20 19:43:20.120 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:43:20.121 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:43:20.121 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:43:20.130 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:43:20.131 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:43:20.136 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:43:20.158 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:43:20.273 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:43:20.288 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:43:20.289 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:43:20.482 +03:00 [DBG] xIP3FetRi8FxrtyxzUXXm86uTsa9aVp6stIHMhNI9/o= not found in database
2018-08-20 19:43:20.510 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:43:20.510 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:43:20.596 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ceIA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****98ba"
    }
  ],
  "ActivityId": "0HLG6NG2LLBJE:00000005",
  "TimeStamp": "2018-08-20T16:43:20Z",
  "ProcessId": 4192,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:43:20.603 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347833956940.7311627616731917",
  "Scope": "openid profile email"
}
2018-08-20 19:43:21.794 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:43:21.832 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-20 19:43:21.833 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:43:21.836 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:43:21.840 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:43:21.840 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:43:21.846 +03:00 [DBG] Start key discovery request
2018-08-20 19:43:21.917 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:43:21.918 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:43:21.925 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:43:21.925 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:43:21.925 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:43:21.929 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:43:21.930 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:43:21.946 +03:00 [DBG] Start userinfo request
2018-08-20 19:43:21.954 +03:00 [DBG] Bearer token found in header
2018-08-20 19:43:21.995 +03:00 [DBG] xIP3FetRi8FxrtyxzUXXm86uTsa9aVp6stIHMhNI9/o= found in database: true
2018-08-20 19:43:22.030 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:43:22.037 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9c927a76530c96ce1ecc8c422f1b292d3d61975843ed390244a82bd7d52598ba",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534783400,
    "exp": 1534787000,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783294,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:43:22.048 +03:00 [DBG] Creating userinfo response
2018-08-20 19:43:22.053 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:43:22.056 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:43:22.060 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:43:22.060 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:43:22.071 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:43:22.071 +03:00 [DBG] End userinfo request
2018-08-20 19:43:24.321 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:43:24.323 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:43:24.323 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:43:24.330 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:43:24.340 +03:00 [DBG] Start end session request validation
2018-08-20 19:43:24.350 +03:00 [DBG] Start identity token validation
2018-08-20 19:43:24.359 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:43:24.374 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:43:24.376 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534783400,
    "exp": 1534783700,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.53435100706483141534783395694",
    "iat": 1534783400,
    "at_hash": "lT3uOoMnwjIzYP3InzFA_Q",
    "sid": "e1a7e78817dfad29196db1a088b20483",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783294,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:43:24.389 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODM0MDAsImV4cCI6MTUzNDc4MzcwMCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjUzNDM1MTAwNzA2NDgzMTQxNTM0NzgzMzk1Njk0IiwiaWF0IjoxNTM0NzgzNDAwLCJhdF9oYXNoIjoibFQzdU9vTW53akl6WVAzSW56RkFfUSIsInNpZCI6ImUxYTdlNzg4MTdkZmFkMjkxOTZkYjFhMDg4YjIwNDgzIiwic3ViIjoiOGYyYTQ3N2UtMGQzMS00NTIzLWJiMzctZWU4NDJiN2Y2ZTgzIiwiYXV0aF90aW1lIjoxNTM0NzgzMjk0LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.B58U7OtzF1vUdPK6JE1MWKjsbUHpBLhASjmvuNOJ0tWCIR2D32YtxD6t6HB8e7RCH5qwha3qVnbEkFqJaboCUvkJtcTGop2OE7foUkYHWvmDCwApTWaXL03kpAwEQI9BAsd9j6XqoHsXh4U1bMz6TmOwOsb4vtAGLHHRjd8oEtnc-KwLxlbEh63I2WOT93qfBDOLCx7w_ChMkNz9qPJGiJTDfvX22ZaR8diMBJ6kYJnoDGrcb4w-tsuPRmVKb1aSYwqy0cIg_lI8UFPn3lSVH5ymUU25eRaP2LYLJxxTRR3Huy1Twcqx-7KtD02Kd2LLVq5bNVC0E_1qbekdd-ceIA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:43:24.394 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:43:24.475 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:43:24.477 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:43:24.477 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:43:24.493 +03:00 [DBG] removing 2 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:43:24.595 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-20 19:43:24.599 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-20 19:43:24.600 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-20 19:43:24.610 +03:00 [DBG] Processing signout callback request
2018-08-20 19:43:24.631 +03:00 [DBG] No client front-channel logout URLs
2018-08-20 19:43:24.631 +03:00 [DBG] No client back-channel logout URLs
2018-08-20 19:43:24.632 +03:00 [INF] Successful signout callback.
2018-08-20 19:43:24.632 +03:00 [DBG] No client front-channel iframe urls
2018-08-20 19:43:24.632 +03:00 [DBG] No client back-channel iframe urls
2018-08-20 19:44:22.804 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:44:22.804 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:44:22.804 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:44:22.805 +03:00 [DBG] Rendering check session result
2018-08-20 19:44:24.830 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:44:24.831 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:44:24.837 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:44:24.837 +03:00 [DBG] Start authorize request
2018-08-20 19:44:24.838 +03:00 [DBG] No user present in authorize request
2018-08-20 19:44:24.838 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:44:24.839 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:44:24.840 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347834648030.759543576770723",
  "Nonce": "N0.9582876738070311534783464803",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.9582876738070311534783464803",
    "state": "15347834648030.759543576770723"
  }
}
2018-08-20 19:44:24.841 +03:00 [INF] Showing login: User is not authenticated
2018-08-20 19:44:24.887 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:44:24.887 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:44:29.063 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:44:29.067 +03:00 [DBG] Adding idp claim with value: local
2018-08-20 19:44:29.068 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-20 19:44:29.068 +03:00 [DBG] Adding auth_time claim with value: 1534783469
2018-08-20 19:44:29.077 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:44:29.082 +03:00 [INF] User with username = okanaslankan@hotmail.com logged in. 
2018-08-20 19:44:29.100 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:44:29.101 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:44:29.101 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:44:29.101 +03:00 [DBG] Start authorize callback request
2018-08-20 19:44:29.102 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:44:29.102 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:44:29.102 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:44:29.103 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347834648030.759543576770723",
  "Nonce": "N0.9582876738070311534783464803",
  "SessionId": "a1d1e764c6c72e427fbe0ea720c76ea3",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.9582876738070311534783464803",
    "state": "15347834648030.759543576770723"
  }
}
2018-08-20 19:44:29.107 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:44:29.107 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:44:29.107 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:44:29.107 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:44:29.111 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:44:29.112 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:44:30.329 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:44:30.330 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:44:30.335 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:44:30.335 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:44:30.335 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:44:30.335 +03:00 [DBG] Start authorize callback request
2018-08-20 19:44:30.336 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:44:30.336 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:44:30.337 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:44:30.337 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347834648030.759543576770723",
  "Nonce": "N0.9582876738070311534783464803",
  "SessionId": "a1d1e764c6c72e427fbe0ea720c76ea3",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.9582876738070311534783464803",
    "state": "15347834648030.759543576770723"
  }
}
2018-08-20 19:44:30.342 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:44:30.342 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:44:30.342 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:44:30.342 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:44:30.342 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:44:30.343 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:44:30.348 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:44:30.401 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:44:30.401 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:44:30.401 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:44:30.415 +03:00 [DBG] rUtI9igrjsBMAVhVBuEg8NMsKNItFV6isDD7lgoYtrQ= not found in database
2018-08-20 19:44:30.424 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:44:30.424 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:44:30.426 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6hBQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****ad43"
    }
  ],
  "ActivityId": "0HLG6NG2LLBJE:00000013",
  "TimeStamp": "2018-08-20T16:44:30Z",
  "ProcessId": 4192,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:44:30.427 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347834648030.759543576770723",
  "Scope": "openid profile email"
}
2018-08-20 19:44:30.434 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:44:30.435 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:44:31.604 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:44:31.604 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:44:31.605 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:44:31.605 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:44:31.605 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:44:31.605 +03:00 [DBG] Start key discovery request
2018-08-20 19:44:31.666 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:44:31.666 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:44:31.673 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:44:31.673 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:44:31.673 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:44:31.674 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:44:31.674 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:44:31.674 +03:00 [DBG] Start userinfo request
2018-08-20 19:44:31.675 +03:00 [DBG] Bearer token found in header
2018-08-20 19:44:31.677 +03:00 [DBG] rUtI9igrjsBMAVhVBuEg8NMsKNItFV6isDD7lgoYtrQ= found in database: true
2018-08-20 19:44:31.719 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:44:31.720 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "5eaf3838584d0b32726993b8735eaba80c2f54c76c0a0317cae2f4bb9c69ad43",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534783470,
    "exp": 1534787070,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783469,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:44:31.720 +03:00 [DBG] Creating userinfo response
2018-08-20 19:44:31.720 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:44:31.720 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:44:31.721 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:44:31.721 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:44:31.726 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:44:31.726 +03:00 [DBG] End userinfo request
2018-08-20 19:44:32.580 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:44:32.581 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:44:32.588 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:44:32.588 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:44:32.590 +03:00 [DBG] Start end session request validation
2018-08-20 19:44:32.590 +03:00 [DBG] Start identity token validation
2018-08-20 19:44:32.590 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:44:32.594 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:44:32.595 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534783470,
    "exp": 1534783770,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.9582876738070311534783464803",
    "iat": 1534783470,
    "at_hash": "CpAQtnKWZIR2-8MX4-AdEw",
    "sid": "a1d1e764c6c72e427fbe0ea720c76ea3",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783469,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:44:32.595 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODM0NzAsImV4cCI6MTUzNDc4Mzc3MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjk1ODI4NzY3MzgwNzAzMTE1MzQ3ODM0NjQ4MDMiLCJpYXQiOjE1MzQ3ODM0NzAsImF0X2hhc2giOiJDcEFRdG5LV1pJUjItOE1YNC1BZEV3Iiwic2lkIjoiYTFkMWU3NjRjNmM3MmU0MjdmYmUwZWE3MjBjNzZlYTMiLCJzdWIiOiI4ZjJhNDc3ZS0wZDMxLTQ1MjMtYmIzNy1lZTg0MmI3ZjZlODMiLCJhdXRoX3RpbWUiOjE1MzQ3ODM0NjksImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.rMnckLowVHr10IrtMIIKVBHvUWQhPwQ4u5Sl_w6ZF8sqVn_2SlIf_FtljU2NU0KDTiW_P1aK86DjW_ejgC0rg39Js22ird1xh13DzPRJwVI_tNo-iDwoXZdim23zPjHNxuDnat_enBPxmIOcixVJuGxjJy55lVefXfNcgDV1ai6X0HG-l2sBk4wm5uHJ1idMqQQ9qc9ZbqdasD0TLcqgT_HqQHya1ByX4Haa3eFzskOEsmokZgnckfmBXVA4DYsg6gJIJOX-swy7TkeY9JiMnuHxQWTU6FpjoRnwni66aQIcGYS1PR-hWIqqCNEy8g95Lwuz550cXV8BLuF9BQ6hBQ",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:44:32.596 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:44:32.604 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:44:32.604 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:44:32.605 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:44:32.607 +03:00 [DBG] removing 2 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:44:34.056 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
asa1dfmc.q0s(5,62): error CS0433: The type 'RazorViewAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
asa1dfmc.q0s(38,83): error CS0433: The type 'RazorPage<TModel>' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
asa1dfmc.q0s(41,67): error CS0115: 'Views_Account_LoggedOut.ExecuteAsync()': no suitable method found to override
asa1dfmc.q0s(118,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
asa1dfmc.q0s(120,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
asa1dfmc.q0s(122,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
asa1dfmc.q0s(124,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
asa1dfmc.q0s(126,58): error CS0433: The type 'RazorInjectAttribute' exists in both 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60' and 'Microsoft.AspNetCore.Mvc.Razor, Version=2.1.1.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'
asa1dfmc.q0s(43,13): error CS0103: The name 'BeginContext' does not exist in the current context
asa1dfmc.q0s(44,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
asa1dfmc.q0s(45,13): error CS0103: The name 'EndContext' does not exist in the current context
asa1dfmc.q0s(52,13): error CS0103: The name 'BeginContext' does not exist in the current context
asa1dfmc.q0s(53,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
asa1dfmc.q0s(54,13): error CS0103: The name 'EndContext' does not exist in the current context
asa1dfmc.q0s(55,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
asa1dfmc.q0s(61,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
asa1dfmc.q0s(62,13): error CS0103: The name 'BeginContext' does not exist in the current context
asa1dfmc.q0s(63,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
asa1dfmc.q0s(64,13): error CS0103: The name 'EndContext' does not exist in the current context
asa1dfmc.q0s(65,13): error CS0103: The name 'BeginContext' does not exist in the current context
asa1dfmc.q0s(71,13): error CS0103: The name 'EndContext' does not exist in the current context
asa1dfmc.q0s(72,13): error CS0103: The name 'BeginContext' does not exist in the current context
asa1dfmc.q0s(73,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
asa1dfmc.q0s(74,13): error CS0103: The name 'EndContext' does not exist in the current context
asa1dfmc.q0s(80,13): error CS0103: The name 'BeginContext' does not exist in the current context
asa1dfmc.q0s(81,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
asa1dfmc.q0s(82,13): error CS0103: The name 'EndContext' does not exist in the current context
asa1dfmc.q0s(89,13): error CS0103: The name 'BeginContext' does not exist in the current context
asa1dfmc.q0s(90,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
asa1dfmc.q0s(91,13): error CS0103: The name 'EndContext' does not exist in the current context
asa1dfmc.q0s(92,13): error CS0103: The name 'BeginWriteAttribute' does not exist in the current context
asa1dfmc.q0s(98,13): error CS0103: The name 'EndWriteAttribute' does not exist in the current context
asa1dfmc.q0s(99,13): error CS0103: The name 'BeginContext' does not exist in the current context
asa1dfmc.q0s(100,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
asa1dfmc.q0s(101,13): error CS0103: The name 'EndContext' does not exist in the current context
asa1dfmc.q0s(107,13): error CS0103: The name 'BeginContext' does not exist in the current context
asa1dfmc.q0s(108,13): error CS0103: The name 'WriteLiteral' does not exist in the current context
asa1dfmc.q0s(109,13): error CS0103: The name 'EndContext' does not exist in the current context
asa1dfmc.q0s(110,13): error CS0103: The name 'DefineSection' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(9,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(12,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(12,30): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(13,14): error CS0103: The name 'Write' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(13,20): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(17,10): error CS0103: The name 'Model' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(19,1): error CS0103: The name 'WriteAttributeValue' does not exist in the current context
/home/doom/ionic_is4/MicroStarter.Identity/src/Host/Views/Account/LoggedOut.cshtml(19,30): error CS0103: The name 'Model' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:44:43.247 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-20 19:44:43.278 +03:00 [DBG] Stopping token cleanup
2018-08-20 19:44:43.282 +03:00 [ERR] Unexpected exception in SocketConnection.StartAsync.
System.ObjectDisposedException: Cannot access a disposed object.
Object name: 'MemoryPoolBlock'.
   at System.Buffers.ThrowHelper.ThrowObjectDisposedException(ExceptionArgument argument)
   at System.Buffers.MemoryPoolBlock.Dispose()
   at System.IO.Pipelines.BufferSegment.ResetMemory()
   at System.IO.Pipelines.Pipe.CompletePipe()
   at System.IO.Pipelines.Pipe.CompleteWriter(Exception exception)
   at System.IO.Pipelines.Pipe.DefaultPipeWriter.Complete(Exception exception)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.StartAsync(IConnectionDispatcher connectionDispatcher)
2018-08-20 19:44:43.285 +03:00 [ERR] Unexpected exception in SocketConnection.StartAsync.
System.ObjectDisposedException: Cannot access a disposed object.
Object name: 'MemoryPoolBlock'.
   at System.Buffers.ThrowHelper.ThrowObjectDisposedException(ExceptionArgument argument)
   at System.Buffers.MemoryPoolBlock.Dispose()
   at System.IO.Pipelines.BufferSegment.ResetMemory()
   at System.IO.Pipelines.Pipe.CompletePipe()
   at System.IO.Pipelines.Pipe.CompleteWriter(Exception exception)
   at System.IO.Pipelines.Pipe.DefaultPipeWriter.Complete(Exception exception)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.StartAsync(IConnectionDispatcher connectionDispatcher)
2018-08-20 19:44:52.642 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-20 19:44:52.674 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-20 19:44:52.674 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-20 19:44:52.674 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-20 19:44:52.674 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-20 19:44:52.785 +03:00 [DBG] Starting token cleanup
2018-08-20 19:44:59.064 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:44:59.071 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:44:59.071 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:44:59.074 +03:00 [DBG] Rendering check session result
2018-08-20 19:45:00.955 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:45:00.977 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:45:00.977 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:45:00.988 +03:00 [DBG] Start authorize request
2018-08-20 19:45:01.008 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:45:01.015 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:45:02.989 +03:00 [DBG] IoClient_Id found in database: true
2018-08-20 19:45:03.112 +03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-20 19:45:03.234 +03:00 [DBG] Found [] API scopes in database
2018-08-20 19:45:03.255 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:45:03.277 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347835008950.22919129455210396",
  "Nonce": "N0.024427381033860441534783500896",
  "SessionId": "a1d1e764c6c72e427fbe0ea720c76ea3",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.024427381033860441534783500896",
    "state": "15347835008950.22919129455210396"
  }
}
2018-08-20 19:45:03.594 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:45:03.594 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:45:03.595 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:45:03.595 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:45:03.794 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:45:03.795 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:45:05.247 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:45:05.248 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:45:05.271 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:45:05.273 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:45:05.273 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:45:05.283 +03:00 [DBG] Start authorize callback request
2018-08-20 19:45:05.291 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:45:05.291 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:45:05.291 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:45:05.292 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347835008950.22919129455210396",
  "Nonce": "N0.024427381033860441534783500896",
  "SessionId": "a1d1e764c6c72e427fbe0ea720c76ea3",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.024427381033860441534783500896",
    "state": "15347835008950.22919129455210396"
  }
}
2018-08-20 19:45:05.298 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:45:05.298 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:45:05.299 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:45:05.309 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:45:05.311 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:45:05.317 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:45:05.344 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:45:05.531 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:45:05.545 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:45:05.545 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:45:05.732 +03:00 [DBG] grnNUcIgHKzPRXBdEJvtIZcuROq0LaBfUPy3SqOn9cs= not found in database
2018-08-20 19:45:05.757 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:45:05.757 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:45:05.834 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****RwCA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****913c"
    }
  ],
  "ActivityId": "0HLG6NH23KM3L:00000005",
  "TimeStamp": "2018-08-20T16:45:05Z",
  "ProcessId": 4483,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:45:05.840 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347835008950.22919129455210396",
  "Scope": "openid profile email"
}
2018-08-20 19:45:07.007 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:45:07.046 +03:00 [DBG] Origin http://localhost:8000 is allowed: true
2018-08-20 19:45:07.047 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:45:07.050 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:45:07.054 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:45:07.054 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:45:07.060 +03:00 [DBG] Start key discovery request
2018-08-20 19:45:07.130 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:45:07.130 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:45:07.140 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:45:07.140 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:45:07.141 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:45:07.145 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:45:07.145 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:45:07.159 +03:00 [DBG] Start userinfo request
2018-08-20 19:45:07.165 +03:00 [DBG] Bearer token found in header
2018-08-20 19:45:07.194 +03:00 [DBG] grnNUcIgHKzPRXBdEJvtIZcuROq0LaBfUPy3SqOn9cs= found in database: true
2018-08-20 19:45:07.224 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:45:07.232 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "8e0d260ecfc2204f81b25d30a1e0dd8ded76c9ad3cf37b4b6447679f8eeb913c",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534783505,
    "exp": 1534787105,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783469,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:45:07.243 +03:00 [DBG] Creating userinfo response
2018-08-20 19:45:07.250 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:45:07.254 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:45:07.258 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:45:07.259 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:45:07.266 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:45:07.267 +03:00 [DBG] End userinfo request
2018-08-20 19:45:53.811 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:45:53.813 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:45:53.824 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:45:53.832 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:45:53.852 +03:00 [DBG] Start end session request validation
2018-08-20 19:45:53.865 +03:00 [DBG] Start identity token validation
2018-08-20 19:45:53.878 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:45:53.909 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:45:53.912 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534783505,
    "exp": 1534783805,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.024427381033860441534783500896",
    "iat": 1534783505,
    "at_hash": "FA8gaKydIE8bdg1a5OeMKw",
    "sid": "a1d1e764c6c72e427fbe0ea720c76ea3",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783469,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:45:53.928 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODM1MDUsImV4cCI6MTUzNDc4MzgwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjAyNDQyNzM4MTAzMzg2MDQ0MTUzNDc4MzUwMDg5NiIsImlhdCI6MTUzNDc4MzUwNSwiYXRfaGFzaCI6IkZBOGdhS3lkSUU4YmRnMWE1T2VNS3ciLCJzaWQiOiJhMWQxZTc2NGM2YzcyZTQyN2ZiZTBlYTcyMGM3NmVhMyIsInN1YiI6IjhmMmE0NzdlLTBkMzEtNDUyMy1iYjM3LWVlODQyYjdmNmU4MyIsImF1dGhfdGltZSI6MTUzNDc4MzQ2OSwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.fU3WeX9FZ1wbDAhJP_5KDNg4By7-0eb_Sj6dU4yKUYfKMPetUv59qXjYA9TlGW12QZX8wxfvnjkfB9hLtx9LQEZI6QFRcBkm--BXcrPT1pqDvWRMLZUizzYGeBDmNiqKBXGWGzCD4BJhL8vVv-gu4gH-0m-CBLFesjqutcPAUS-EqrGphQoZpK3hNEhAg0QLp6Q0w83D-C9rFnFuUOv2bv9PYsWho08jLuv6F6mNiwBt_2LGP958s5kc44XSb5fOpL1FdUBEIaqUab-h9n-SZaOc_1yzipaiKzTwbsn38ECmYldn8MSaLacNG01iLO2DF1nwhuObGVpd4UhziHRwCA",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:45:53.931 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:45:54.053 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:45:54.059 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:45:54.063 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:45:54.090 +03:00 [DBG] removing 2 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:45:54.248 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-20 19:45:54.253 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-20 19:45:54.254 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-20 19:45:54.263 +03:00 [DBG] Processing signout callback request
2018-08-20 19:45:54.289 +03:00 [DBG] No client front-channel logout URLs
2018-08-20 19:45:54.289 +03:00 [DBG] No client back-channel logout URLs
2018-08-20 19:45:54.289 +03:00 [INF] Successful signout callback.
2018-08-20 19:45:54.293 +03:00 [DBG] No client front-channel iframe urls
2018-08-20 19:45:54.293 +03:00 [DBG] No client back-channel iframe urls
2018-08-20 19:49:11.589 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:49:11.589 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:49:11.589 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:49:11.589 +03:00 [DBG] Rendering check session result
2018-08-20 19:49:21.067 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:49:21.068 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:49:21.069 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:49:21.069 +03:00 [DBG] Processing signout request for anonymous
2018-08-20 19:49:21.069 +03:00 [DBG] Start end session request validation
2018-08-20 19:49:21.070 +03:00 [INF] End session request validation success
{
  "SubjectId": "unknown",
  "Raw": {
    "id_token_hint": "",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:49:21.070 +03:00 [DBG] Success validating end session request from null
2018-08-20 19:49:21.085 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Extensions.PrincipalExtensions.GetSubjectId(IIdentity identity) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\PrincipalExtensions.cs:line 80
   at Host.Controllers.AccountController.Logout(LogoutViewModel model) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 253
   at Host.Controllers.AccountController.Logout(String logoutId) in /home/doom/ionic_is4/MicroStarter.Identity/src/Host/Quickstart/Account/AccountController.cs:line 224
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-20 19:49:24.079 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2018-08-20 19:49:24.080 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2018-08-20 19:49:24.080 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2018-08-20 19:49:24.080 +03:00 [DBG] Rendering check session result
2018-08-20 19:49:27.038 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:49:27.039 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:49:27.039 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:49:27.039 +03:00 [DBG] Start authorize request
2018-08-20 19:49:27.039 +03:00 [DBG] No user present in authorize request
2018-08-20 19:49:27.039 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:27.041 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:27.041 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347837670010.23709724605049365",
  "Nonce": "N0.39279850433644261534783767001",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.39279850433644261534783767001",
    "state": "15347837670010.23709724605049365"
  }
}
2018-08-20 19:49:27.041 +03:00 [INF] Showing login: User is not authenticated
2018-08-20 19:49:27.067 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:27.069 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:32.081 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:49:32.085 +03:00 [DBG] Adding idp claim with value: local
2018-08-20 19:49:32.085 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-20 19:49:32.085 +03:00 [DBG] Adding auth_time claim with value: 1534783772
2018-08-20 19:49:32.094 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:49:32.099 +03:00 [INF] User with username = okanaslankan@hotmail.com logged in. 
2018-08-20 19:49:32.115 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:49:32.115 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:49:32.116 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:49:32.116 +03:00 [DBG] Start authorize callback request
2018-08-20 19:49:32.116 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:49:32.116 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:32.117 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:32.117 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347837670010.23709724605049365",
  "Nonce": "N0.39279850433644261534783767001",
  "SessionId": "dc86a838ecca8c7c97cd79e2830fa327",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.39279850433644261534783767001",
    "state": "15347837670010.23709724605049365"
  }
}
2018-08-20 19:49:32.121 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:49:32.121 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:49:32.122 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:49:32.122 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:49:32.126 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:32.126 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:33.693 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:33.694 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:33.698 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:49:33.699 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:49:33.699 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:49:33.699 +03:00 [DBG] Start authorize callback request
2018-08-20 19:49:33.699 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:49:33.699 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:33.700 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:33.700 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347837670010.23709724605049365",
  "Nonce": "N0.39279850433644261534783767001",
  "SessionId": "dc86a838ecca8c7c97cd79e2830fa327",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.39279850433644261534783767001",
    "state": "15347837670010.23709724605049365"
  }
}
2018-08-20 19:49:33.704 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:49:33.704 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:49:33.704 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:49:33.704 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:49:33.705 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:49:33.705 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:49:33.711 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:49:33.766 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:49:33.766 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:49:33.766 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:49:33.781 +03:00 [DBG] hKwJ2hH7eRP6+cDXnn/kaVjluFbQlOv6EdgFVc7gW+E= not found in database
2018-08-20 19:49:33.800 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:49:33.800 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:49:33.805 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Sm0g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****e506"
    }
  ],
  "ActivityId": "0HLG6NH23KM3O:00000009",
  "TimeStamp": "2018-08-20T16:49:33Z",
  "ProcessId": 4483,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:49:33.805 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347837670010.23709724605049365",
  "Scope": "openid profile email"
}
2018-08-20 19:49:33.814 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:49:33.815 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:49:35.020 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:49:35.021 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:49:35.021 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:49:35.021 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:49:35.022 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:49:35.022 +03:00 [DBG] Start key discovery request
2018-08-20 19:49:35.094 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:49:35.095 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:49:35.107 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:49:35.107 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:49:35.107 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:49:35.113 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:49:35.113 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:49:35.114 +03:00 [DBG] Start userinfo request
2018-08-20 19:49:35.114 +03:00 [DBG] Bearer token found in header
2018-08-20 19:49:35.121 +03:00 [DBG] hKwJ2hH7eRP6+cDXnn/kaVjluFbQlOv6EdgFVc7gW+E= found in database: true
2018-08-20 19:49:35.150 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:49:35.151 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "fd13b5ecca0dedeea37e362c862bdd91ccf97f88f128ade0430add8bbf89e506",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534783773,
    "exp": 1534787373,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783772,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:49:35.151 +03:00 [DBG] Creating userinfo response
2018-08-20 19:49:35.151 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:49:35.151 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:49:35.152 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:49:35.152 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:49:35.156 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:49:35.161 +03:00 [DBG] End userinfo request
2018-08-20 19:49:40.268 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-20 19:49:40.268 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-20 19:49:40.269 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-20 19:49:40.269 +03:00 [DBG] Processing signout request for 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:49:40.269 +03:00 [DBG] Start end session request validation
2018-08-20 19:49:40.269 +03:00 [DBG] Start identity token validation
2018-08-20 19:49:40.270 +03:00 [DBG] Client found: IoClient_Id / IoClient
2018-08-20 19:49:40.273 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:49:40.274 +03:00 [DBG] Token validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1534783773,
    "exp": 1534784073,
    "iss": "http://localhost:5000",
    "aud": "IoClient_Id",
    "nonce": "N0.39279850433644261534783767001",
    "iat": 1534783773,
    "at_hash": "MjOdJ7UVKInDocnzCoONvw",
    "sid": "dc86a838ecca8c7c97cd79e2830fa327",
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783772,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:49:40.275 +03:00 [INF] End session request validation success
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "PostLogOutUri": "http://localhost:8000/loggedout",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhmMmM4M2MzNDg5MGJhMWEwM2I0YzA2NjA2NDYxOWJmIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzQ3ODM3NzMsImV4cCI6MTUzNDc4NDA3MywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiSW9DbGllbnRfSWQiLCJub25jZSI6Ik4wLjM5Mjc5ODUwNDMzNjQ0MjYxNTM0NzgzNzY3MDAxIiwiaWF0IjoxNTM0NzgzNzczLCJhdF9oYXNoIjoiTWpPZEo3VVZLSW5Eb2NuekNvT052dyIsInNpZCI6ImRjODZhODM4ZWNjYThjN2M5N2NkNzllMjgzMGZhMzI3Iiwic3ViIjoiOGYyYTQ3N2UtMGQzMS00NTIzLWJiMzctZWU4NDJiN2Y2ZTgzIiwiYXV0aF90aW1lIjoxNTM0NzgzNzcyLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.KKxRt5qwW4ASaaWM6zWa5DbctaV58fipiLCtMhaPSgFrv0-y9FszVAvM5Ys28yYO4SuQefpB1esnZwiejduiwfwPqQDGsnTciJhAVWWUmimQeH0g2ACw9dQOagAlLVxSHVnMMdLbHq1610eGTTPuXbMHocTkbtxNk9KAU6u2iIlEu8-IqkKj8otuNygkbAS38VrL_TBwXkd9JJVwZioRz7iP4qNyKnaA--JVAcFlrLYHMNKqAx5XSlia45OLtYBqp6AN6lcxtSaSAzYhbqiMuOPgivS-Bf6ZU2Z5ny1dedAfMOLvQuSC1CXie8alPGtiY4aqv5bw8GP_rFoZfrSm0g",
    "post_logout_redirect_uri": "http://localhost:8000/loggedout"
  }
}
2018-08-20 19:49:40.275 +03:00 [DBG] Success validating end session request from IoClient_Id
2018-08-20 19:49:40.282 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-20 19:49:40.282 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-20 19:49:40.282 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-20 19:49:40.285 +03:00 [DBG] removing 2 persisted grants from database for subject 8f2a477e-0d31-4523-bb37-ee842b7f6e83, clientId IoClient_Id
2018-08-20 19:49:40.676 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-20 19:49:40.677 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-20 19:49:40.677 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-20 19:49:40.677 +03:00 [DBG] Processing signout callback request
2018-08-20 19:49:40.678 +03:00 [DBG] No client front-channel logout URLs
2018-08-20 19:49:40.678 +03:00 [DBG] No client back-channel logout URLs
2018-08-20 19:49:40.678 +03:00 [INF] Successful signout callback.
2018-08-20 19:49:40.678 +03:00 [DBG] No client front-channel iframe urls
2018-08-20 19:49:40.678 +03:00 [DBG] No client back-channel iframe urls
2018-08-20 19:49:48.982 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-20 19:49:48.982 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-20 19:49:48.982 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-20 19:49:48.982 +03:00 [DBG] Start authorize request
2018-08-20 19:49:48.983 +03:00 [DBG] No user present in authorize request
2018-08-20 19:49:48.983 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:48.983 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:48.983 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347837889530.6660971212376914",
  "Nonce": "N0.72326262991435451534783788953",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.72326262991435451534783788953",
    "state": "15347837889530.6660971212376914"
  }
}
2018-08-20 19:49:48.983 +03:00 [INF] Showing login: User is not authenticated
2018-08-20 19:49:48.989 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:48.990 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:57.167 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:49:57.167 +03:00 [DBG] Adding idp claim with value: local
2018-08-20 19:49:57.167 +03:00 [DBG] Adding amr claim with value: pwd
2018-08-20 19:49:57.167 +03:00 [DBG] Adding auth_time claim with value: 1534783797
2018-08-20 19:49:57.169 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:49:57.169 +03:00 [INF] User with username = okanaslankan@hotmail.com logged in. 
2018-08-20 19:49:57.181 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:49:57.182 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:49:57.182 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:49:57.182 +03:00 [DBG] Start authorize callback request
2018-08-20 19:49:57.182 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:49:57.182 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:57.183 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:57.183 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347837889530.6660971212376914",
  "Nonce": "N0.72326262991435451534783788953",
  "SessionId": "fb0b20c91f8fe9bcc927ca4e680a7c6c",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.72326262991435451534783788953",
    "state": "15347837889530.6660971212376914"
  }
}
2018-08-20 19:49:57.194 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:49:57.195 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:49:57.195 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:49:57.196 +03:00 [INF] Showing consent: User has not yet consented
2018-08-20 19:49:57.200 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:57.200 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:58.845 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:58.845 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:58.850 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-20 19:49:58.851 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-20 19:49:58.851 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-20 19:49:58.851 +03:00 [DBG] Start authorize callback request
2018-08-20 19:49:58.851 +03:00 [DBG] User in authorize request: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:49:58.851 +03:00 [DBG] Start authorize request protocol validation
2018-08-20 19:49:58.852 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-20 19:49:58.852 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "AllowedRedirectUris": [
    "http://localhost:8000/silent-renew.html",
    "http://localhost:8000"
  ],
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "15347837889530.6660971212376914",
  "Nonce": "N0.72326262991435451534783788953",
  "SessionId": "fb0b20c91f8fe9bcc927ca4e680a7c6c",
  "Raw": {
    "client_id": "IoClient_Id",
    "redirect_uri": "http://localhost:8000",
    "response_type": "id_token token",
    "scope": "openid profile email",
    "nonce": "N0.72326262991435451534783788953",
    "state": "15347837889530.6660971212376914"
  }
}
2018-08-20 19:49:58.856 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= found in database: false
2018-08-20 19:49:58.856 +03:00 [DBG] user_consent grant with value: IoClient_Id|8f2a477e-0d31-4523-bb37-ee842b7f6e83 not found in store.
2018-08-20 19:49:58.856 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-20 19:49:58.856 +03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-20 19:49:58.857 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-20 19:49:58.857 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:49:58.863 +03:00 [DBG] tGpKfJczWNfI0eokEgkzR78QVbK/nDrCcoaV+tugzBU= not found in database
2018-08-20 19:49:58.972 +03:00 [DBG] Creating Implicit Flow response.
2018-08-20 19:49:58.972 +03:00 [DBG] Getting claims for access token for client: IoClient_Id
2018-08-20 19:49:58.972 +03:00 [DBG] Getting claims for access token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83
2018-08-20 19:49:58.986 +03:00 [DBG] RPrqCJDxH75HVhOubJnOjMQI7xavoXXDH9+uOmgt9Rc= not found in database
2018-08-20 19:49:59.039 +03:00 [DBG] Getting claims for identity token for subject: 8f2a477e-0d31-4523-bb37-ee842b7f6e83 and client: IoClient_Id
2018-08-20 19:49:59.039 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-20 19:49:59.047 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IoClient_Id",
  "ClientName": "IoClient",
  "RedirectUri": "http://localhost:8000",
  "Endpoint": "Authorize",
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****mOBg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****eef4"
    }
  ],
  "ActivityId": "0HLG6NH23KM3Q:00000008",
  "TimeStamp": "2018-08-20T16:49:59Z",
  "ProcessId": 4483,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-20 19:49:59.047 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
  "ClientId": "IoClient_Id",
  "RedirectUri": "http://localhost:8000",
  "State": "15347837889530.6660971212376914",
  "Scope": "openid profile email"
}
2018-08-20 19:49:59.048 +03:00 [DBG] Augmenting SignInContext
2018-08-20 19:49:59.048 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-20 19:50:00.419 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:8000
2018-08-20 19:50:00.419 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:50:00.419 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-20 19:50:00.420 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-20 19:50:00.420 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-20 19:50:00.420 +03:00 [DBG] Start key discovery request
2018-08-20 19:50:00.457 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:50:00.457 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:50:00.468 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:8000
2018-08-20 19:50:00.469 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:8000
2018-08-20 19:50:00.470 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-20 19:50:00.471 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-20 19:50:00.473 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-20 19:50:00.474 +03:00 [DBG] Start userinfo request
2018-08-20 19:50:00.475 +03:00 [DBG] Bearer token found in header
2018-08-20 19:50:00.480 +03:00 [DBG] RPrqCJDxH75HVhOubJnOjMQI7xavoXXDH9+uOmgt9Rc= found in database: true
2018-08-20 19:50:00.511 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-20 19:50:00.514 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "17b21d11ac08bc850365f783071e833119a2b9f7fa5997d1122690431066eef4",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1534783798,
    "exp": 1534787398,
    "aud": "http://localhost:5000/resources",
    "client_id": "IoClient_Id",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "sub": "8f2a477e-0d31-4523-bb37-ee842b7f6e83",
    "auth_time": 1534783797,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-20 19:50:00.516 +03:00 [DBG] Creating userinfo response
2018-08-20 19:50:00.516 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:50:00.517 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:50:00.518 +03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture family_name name profile preferred_username nickname middle_name given_name email email_verified
2018-08-20 19:50:00.519 +03:00 [DBG] Scopes in access token: openid profile email
2018-08-20 19:50:00.525 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-08-20 19:50:00.526 +03:00 [DBG] End userinfo request
2018-08-20 19:52:48.885 +03:00 [DBG] TaskCanceledException. Exiting.
2018-08-20 19:52:48.910 +03:00 [DBG] Stopping token cleanup
